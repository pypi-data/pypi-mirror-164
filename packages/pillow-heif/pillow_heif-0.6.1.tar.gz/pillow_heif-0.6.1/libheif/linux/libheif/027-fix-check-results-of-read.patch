From 5a20339c29831cd2f72903a1ca2ff88e458dc1c2 Mon Sep 17 00:00:00 2001
From: Joachim Bauch <bauch@struktur.de>
Date: Fri, 14 May 2021 09:35:32 +0200
Subject: [PATCH] Check result of "read" call (available data was already
 checked above).

Found by Coverity Scan.
---
 libheif/box.cc | 8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

diff --git a/libheif/box.cc b/libheif/box.cc
index ce5362a5..25958385 100644
--- a/libheif/box.cc
+++ b/libheif/box.cc
@@ -240,7 +240,9 @@ heif::Error heif::BoxHeader::parse(BitstreamRange& range)
 
     if (range.prepare_read(16)) {
       m_uuid_type.resize(16);
-      range.get_istream()->read((char*) m_uuid_type.data(), 16);
+      bool success = range.get_istream()->read((char*) m_uuid_type.data(), 16);
+      assert(success);
+      (void) success;
     }
 
     m_header_size += 16;
@@ -2666,7 +2668,9 @@ Error Box_hvcC::parse(BitstreamRange& range)
 
       if (range.prepare_read(size)) {
         nal_unit.resize(size);
-        range.get_istream()->read((char*) nal_unit.data(), size);
+        bool success = range.get_istream()->read((char*) nal_unit.data(), size);
+        assert(success);
+        (void) success;
       }
 
       array.m_nal_units.push_back(std::move(nal_unit));
