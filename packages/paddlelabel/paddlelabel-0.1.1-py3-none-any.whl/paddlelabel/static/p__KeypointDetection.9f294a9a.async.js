(self.webpackChunkPaddleLabel_Frontend=self.webpackChunkPaddleLabel_Frontend||[]).push([[267],{85024:function(M){M.exports={listItem:"listItem___u4Q82",eye:"eye___BwaRm",delete:"delete___31JB_",roundBall:"roundBall___23A7l",popover:"popover___1BNET",annotationId:"annotationId___zAzX4",labelName:"labelName___2ohxn",listItemActive:"listItemActive___2QnA3"}},56159:function(M){M.exports={labelList:"labelList___v7C6K",listHeader:"listHeader___1aY8R",eye:"eye___2MKbp",roundBall:"roundBall___187XH"}},71212:function(M){M.exports={key:"key___HbxlB",mainStage:"mainStage___2kPY7",draw:"draw___1d3zf",pblock:"pblock___13HlD",progress:"progress___1iogf",rightSideBar:"rightSideBar___2SKvQ",finished:"finished___nNiaq"}},14836:function(M,O,n){"use strict";n.d(O,{Z:function(){return p}});var q=n(20228),N=n(11382),nn=n(54421),j=n(38272),C=n(57663),P=n(71577),R=n(91220),f=n(67294),K=n(56159),d=n.n(K),U=n(49111),W=n(19650),b=n(2824),H=n(11849),k=n(85024),o=n.n(k),L=n(63097),r=n(85893),X=function(s){var c=(0,H.Z)({},s.annotation),E=(0,f.useState)(c.invisible),h=(0,b.Z)(E,2),x=h[0],_=h[1],u=(0,f.useState)(0),g=(0,b.Z)(u,2),y=g[0],A=g[1];(0,f.useEffect)(function(){_(s.annotation.invisible)},[s.annotation.invisible]);var l=(0,r.jsxs)(j.ZP.Item,{className:"".concat(o().listItem," ").concat(s.active?o().listItemActive:""),unselectable:"on",onClick:function(){s.onClick(c)},children:[(0,r.jsxs)(W.Z,{align:"center",size:5,children:[(0,r.jsx)("a",{className:o().eye,style:{backgroundImage:x?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(B){B.stopPropagation(),_(!x),s.onAnnotationModify(c)}})," ",(0,r.jsx)("span",{className:o().annotationId,children:c.frontendId}),(0,r.jsx)("span",{className:o().labelName,children:c.label.name}),(0,r.jsx)(L.Z,{color:c.label.color})]}),(0,r.jsx)("a",{className:o().delete,onClick:function(B){B.stopPropagation();var D=new Date().getTime();D-y<300||(A(D),s.onAnnotationDelete(c))}})]});return l},I=X,z=n(48971),Z=function(s){var c=(0,z.YB)(),E=c.formatMessage({id:"component.PPAnnotationList.annotationList"}),h=c.formatMessage({id:"component.PPAnnotationList.addAnnotation"}),x=new Set,_=[],u=(0,R.Z)(s.annotations),g;try{for(u.s();!(g=u.n()).done;){var y=g.value;x.has(y.frontendId)||(_.push(y),x.add(y.frontendId))}}catch(A){u.e(A)}finally{u.f()}return(0,r.jsx)(N.Z,{spinning:s.disabled,indicator:(0,r.jsx)(r.Fragment,{}),children:(0,r.jsx)(j.ZP,{className:d().labelList,size:"large",header:(0,r.jsx)("div",{className:d().listHeader,children:E}),bordered:!0,dataSource:_,renderItem:function(l){var m;return(0,r.jsx)(I,{onClick:s.disabled?function(){}:s.onAnnotationSelect,annotation:l,active:s.disabled?!1:l.frontendId==((m=s.currAnnotation)===null||m===void 0?void 0:m.frontendId),onAnnotationDelete:s.onAnnotationDelete,onAnnotationModify:s.onAnnotationModify})},footer:function(){return s.onAnnotationAdd?(0,r.jsx)("div",{children:(0,r.jsx)(P.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){s.onAnnotationAdd()},block:!0,children:h})}):(0,r.jsx)("div",{})}})})},p=Z},82881:function(M,O,n){"use strict";n.r(O);var q=n(57663),N=n(71577),nn=n(34669),j=n(54458),C=n(2824),P=n(67294),R=n(71212),f=n.n(R),K=n(8088),d=n(61541),U=n(44434),W=n(5041),b=n(57436),H=n(14836),k=n(48971),o=n(85893),L=40,r=function(){var I,z=(0,P.useState)(void 0),Z=(0,C.Z)(z,2),p=Z[0],T=Z[1],s=(0,P.useState)({color:"",name:""}),c=(0,C.Z)(s,2),E=c[0],h=c[1],x=(0,P.useState)(),_=(0,C.Z)(x,2),u=_[0],g=_[1],y=(0,P.useState)([]),A=(0,C.Z)(y,2),l=A[0],m=A[1],B=(0,P.useState)(1),D=(0,C.Z)(B,2),J=D[0],F=D[1],$=function(t){t||F(1),t<.1||t>3?F(1):F(t)},S=function(t){g(t),t!=null&&t.label&&h(t.label)};(0,P.useEffect)(function(){localStorage.removeItem("history"),Y([])},[]);function Y(a,t){var e=localStorage.getItem("history"),i=e?JSON.parse(e):{index:-1,items:[]},w={currentAnnotation:t,annotations:a};if(JSON.stringify(i.items[i.index])!=JSON.stringify(w)){var Pn=i.index>L?i.index-L:0,_n=i.items.splice(Pn,i.index==0?1:i.index+1);i.items=_n.concat([w]),i.index<=L?i.index++:i.index=L+1,localStorage.setItem("history",JSON.stringify(i))}}var tn=function(){var t=localStorage.getItem("history");if(!!t){var e=JSON.parse(t);if(!!e&&!(e.index>=e.items.length-1)){e.index++,localStorage.setItem("history",JSON.stringify(e));var i=e.items[e.index];g(i.currentAnnotation),m(i.annotations)}}},on=function(){var t=localStorage.getItem("history");if(!!t){var e=JSON.parse(t);if(!(!e||!e.index)&&!(e.index<=0)){e.index--,localStorage.setItem("history",JSON.stringify(e));var i=e.items[e.index];g(i.currentAnnotation),m(i.annotations)}}},G=function(t){for(var e=[],i=0;i<l.length;i++)l[i].annotationId==t.annotationId?e.push(t):e.push(l[i]);S(t),m(e)},V=drawPolygon({currentLabel:E,currentTool:p,annotations:l,currentAnnotation:u,onAnnotationAdd:function(t){var e=l.concat([t]);m(e),u||S(t)},onAnnotationModify:G,onMouseUp:function(){Y(l,u)}}),Q=V,v=(0,k.YB)(),en=v.formatMessage({id:"pages.toolBar.polygon"}),an=v.formatMessage({id:"pages.toolBar.zoomIn"}),sn=v.formatMessage({id:"pages.toolBar.zoomOut"}),rn=v.formatMessage({id:"pages.toolBar.move"}),ln=v.formatMessage({id:"pages.toolBar.unDo"}),dn=v.formatMessage({id:"pages.toolBar.reDo"}),cn=v.formatMessage({id:"pages.toolBar.save"}),un=v.formatMessage({id:"pages.toolBar.edit"}),mn=v.formatMessage({id:"pages.toolBar.clearMark"}),vn=v.formatMessage({id:"pages.toolBar.determineOutline"}),fn=v.formatMessage({id:"pages.toolBar.divideData"}),gn=v.formatMessage({id:"pages.toolBar.export"});return(0,o.jsxs)(K.Z,{className:f().key,children:[(0,o.jsxs)(U.Z,{children:[(0,o.jsx)(d.Z,{imgSrc:"./pics/buttons/polygon.png",active:p=="polygon",onClick:function(){T("polygon"),S(void 0)},children:en}),(0,o.jsx)(d.Z,{imgSrc:"./pics/buttons/edit.png",children:un}),(0,o.jsx)(d.Z,{imgSrc:"./pics/buttons/zoom_in.png",onClick:function(){$(J+.1)},children:an}),(0,o.jsx)(d.Z,{imgSrc:"./pics/buttons/zoom_out.png",onClick:function(){$(J-.1)},children:sn}),(0,o.jsx)(d.Z,{imgSrc:"./pics/buttons/save.png",children:cn}),(0,o.jsx)(d.Z,{imgSrc:"./pics/buttons/move.png",onClick:function(){T("mover")},children:rn}),(0,o.jsx)(d.Z,{imgSrc:"./pics/buttons/prev.png",onClick:function(){on()},children:ln}),(0,o.jsx)(d.Z,{imgSrc:"./pics/buttons/next.png",onClick:function(){tn()},children:dn}),(0,o.jsx)(d.Z,{imgSrc:"./pics/buttons/clear_mark.png",children:mn})]}),(0,o.jsxs)("div",{id:"dr",className:f().mainStage,children:[(0,o.jsx)("div",{className:f().draw,children:(0,o.jsx)(b.Z,{width:(I=document.getElementById("dr"))===null||I===void 0?void 0:I.clientWidth,scale:J,annotations:l,currentTool:p,currentAnnotation:u,setCurrentAnnotation:S,onAnnotationModify:G,onAnnotationModifyComplete:function(){Y(l,u)},onMouseDown:Q.onMouseDown,onMouseMove:Q.onMouseMove,onMouseUp:Q.onMouseUp,createPolygonFunc:V.createElementsFunc})}),(0,o.jsx)("div",{className:f().pblock,children:(0,o.jsx)("div",{className:f().progress,children:(0,o.jsx)(j.Z,{percent:50,status:"active"})})})]}),(0,o.jsxs)(U.Z,{disLoc:"right",children:[(0,o.jsx)(d.Z,{imgSrc:"./pics/buttons/data_division.png",children:fn}),(0,o.jsx)(d.Z,{imgSrc:"./pics/buttons/export.png",children:gn})]}),(0,o.jsxs)("div",{className:f().rightSideBar,children:[(0,o.jsx)("div",{className:f().finished,children:(0,o.jsx)(N.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",block:!0,onClick:function(){S(void 0)},children:vn})}),(0,o.jsx)(W.Z,{selectedLabel:E,onLabelSelect:function(t){h(t),S(void 0)},onLabelModify:function(){},onLabelDelete:function(){},onLabelAdd:function(){}}),(0,o.jsx)(H.Z,{selectedAnnotation:u,annotations:l,onAnnotationSelect:function(t){t!=null&&t.delete||S(t)},onAnnotationAdd:function(){},onAnnotationModify:function(){},onAnnotationDelete:function(t){m(l.filter(function(e){return e.annotationId!=t.annotationId})),S(void 0)}})]})]})};O.default=r}}]);
