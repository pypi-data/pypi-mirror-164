"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[5735],{715735:(e,t,r)=>{r.r(t),r.d(t,{default:()=>o});var a,n=r(943323),s=r(433851);e=r.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const l=(0,n.Z)(s.Z),o=l;var i,c;(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&i.register(l,"default","/Users/chenming/superset/superset-frontend/plugins/legacy-plugin-chart-sunburst/src/ReactSunburst.js"),(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&c(e)},433851:(e,t,r)=>{r.d(t,{Z:()=>L});var a,n=r(615078),s=r.n(n),l=r(45697),o=r.n(l),i=r(328062),c=r(767190),d=r(645636),u=r(45511),p=r(177749);e=r.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const h={data:o().arrayOf(o().array),width:o().number,height:o().number,colorScheme:o().string,linearColorScheme:o().string,numberFormat:o().string,metrics:o().arrayOf(o().oneOfType([o().string,o().object]))};function g(e){return"string"==typeof e||e instanceof String?e:e.label}function f(e){const t=[];let r=e;for(;r.parent;)t.unshift(r),r=r.parent;return t}function m(e){const t={name:"root",children:[]};return e.forEach((e=>{const r=Number(e[e.length-2]),a=Number(e[e.length-1]),n=e.slice(0,-2);if(Number.isNaN(r))return;let s=t;for(let e=0;e<n.length;e+=1){const t=s.children||[],l=n[e].toString();let o;e>=n.length-1||0===n[e+1]?0!==l&&(o={name:l,m1:r,m2:a},t.push(o)):(o=t.find((t=>t.name===l&&t.level===e)),o||(o={name:l,children:[],level:e},t.push(o)),s=o)}})),function e(t){if(t.children){let r,a=0,n=0;for(let s=0;s<t.children.length;s+=1)r=e(t.children[s]),a+=r[0],n+=r[1];t.m1=a,t.m2=n}return[t.m1,t.m2]}(t),t}function b(e){return e>500?"l":e>200&&e<=500?"m":"s"}function y(e){return e>500?["0","20","40","60"]:e>200&&e<=500?["0","15","30","45"]:["0","10","20","30"]}function _(e,t){const r=s().select(e),{data:a,width:n,height:l,colorScheme:o,linearColorScheme:h,metrics:_,numberFormat:v}=t,L=b(n),x="s"===L;r.attr("class",`superset-legacy-chart-sunburst ${L}`);const H=n,G=l,M=.085*G,$=H-5-5,C=G-10-10-M,k=Math.min($,C)/2;let w,T,S,R,U,E,P,A=!0;const j=i.getScale(o);let N;const O=s().layout.partition().size([2*Math.PI,k*k]).value((e=>e.m1)),W=s().svg.arc().startAngle((e=>e.x)).endAngle((e=>e.x+e.dx)).innerRadius((e=>Math.sqrt(e.y))).outerRadius((e=>Math.sqrt(e.y+e.dy))),D=(0,c.JB)(v||d.Z.SI_3_DIGIT),F=(0,c.JB)(d.Z.PERCENT_3_POINT);r.select("svg").remove();const Z=r.append("svg:svg").attr("width",H).attr("height",G);function I(e,t){const r=[];return x?(r.push("0,0"),r.push(`${n},0`),r.push(`${n},0`),r.push(`${n},${T.height}`),r.push(`0,${T.height}`)):(r.push("0,0"),r.push(`${T.width},0`),r.push(`${T.width+T.tipTailWidth},${T.height/2}`),r.push(`${T.width},${T.height}`),r.push(`0,${T.height}`),t>0&&r.push(`${T.tipTailWidth},${T.height/2}`)),r.join(" ")}function q(e){const t=f(e),r=t[t.length-2]||null,a=(e.m1/S).toPrecision(3),l=r?(e.m1/r.m1).toPrecision(3):null,o=F(a),i=r?F(l):"",c=y(n);let d=0;const u=Math.abs(e.m1-e.m2)<1e-5;P.selectAll("*").remove(),d+=1,P.append("text").attr("class","path-abs-percent").attr("y",c[d]).text(`${o} of total`),i&&(d+=1,P.append("text").attr("class","path-cond-percent").attr("y",c[d]).text(`${i} of parent`)),d+=1,P.append("text").attr("class","path-metrics").attr("y",c[d]).text(`${g(_[0])}: ${D(e.m1)}${u?"":`, ${g(_[1])}: ${D(e.m2)}`}`),d+=1,P.append("text").attr("class","path-ratio").attr("y",c[d]).text(u?"":`${g(_[1])}/${g(_[0])}: ${F(e.m2/e.m1)}`),E.selectAll("path").style("stroke-width",null).style("stroke",null).style("opacity",.3),E.selectAll("path").filter((e=>t.includes(e))).style("opacity",1).style("stroke","#aaa"),function(e,t){const r=x?n:T.width,a=R.selectAll("g").data(e,(e=>e.name+e.depth)),l=a.enter().append("svg:g");l.append("svg:polygon").attr("points",I).style("fill",(e=>A?j(e.name):N(e.m2/e.m1))),l.append("svg:text").attr("x",(r+T.tipTailWidth)/2).attr("y",T.height/4).attr("dy","0.35em").style("fill",(e=>s().hsl(A?j(e.name):N(e.m2/e.m1)).l<.5?"white":"black")).attr("class","step-label").text((e=>e.name.replace(/_/g," "))).call(p.Z,r,T.height/2),a.attr("transform",((e,t)=>x?`translate(0, ${t*(T.height+T.spacing)})`:`translate(${t*(T.width+T.spacing)}, 0)`)),a.exit().remove(),R.select(".end-label").attr("x",(()=>x?(r+T.tipTailWidth)/2:(e.length+.5)*(T.width+T.spacing))).attr("y",(()=>x?(e.length+1)*T.height:T.height/2)).attr("dy","0.35em").text(t),R.style("visibility",null)}(t,o)}function B(){R.style("visibility","hidden"),P.selectAll("*").remove(),E.selectAll("path").on("mouseenter",null),E.selectAll("path").transition().duration(200).style("opacity",1).style("stroke",null).style("stroke-width",null).each("end",(function(){s().select(this).on("mouseenter",q)}))}var K;K=a[0],w=K.length-2+1,T={width:$/w,height:.8*M,spacing:3,tipTailWidth:10},R=Z.append("svg:g").attr("class","breadcrumbs").attr("transform","translate(5,10)"),R.append("svg:text").attr("class","end-label"),function(e){const t=m(e);w=e[0].length-2,U=Z.append("svg:g").attr("class","sunburst-vis").attr("transform",`translate(${5+$/2},${10+(x?M*w:M)+C/2})`).on("mouseleave",B),E=U.append("svg:g").attr("id","arcs"),P=U.append("svg:g").attr("class","center-label"),E.append("svg:circle").attr("r",k).style("opacity",0);const r=O.nodes(t).filter((e=>e.dx>.005));if(_[0]!==_[1]&&_[1]){A=!1;const e=s().extent(r,(e=>e.m2/e.m1));N=(0,u.Z)().get(h).createLinearScale(e)}E.selectAll("path").data(r).enter().append("svg:path").attr("display",(e=>e.depth?null:"none")).attr("d",W).attr("fill-rule","evenodd").style("fill",(e=>A?j(e.name):N(e.m2/e.m1))).style("opacity",1).on("mouseenter",q),S=t.value}(a)}_.displayName="Sunburst",_.propTypes=h;const v=_,L=v;var x,H;(x="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(x.register(h,"propTypes","/Users/chenming/superset/superset-frontend/plugins/legacy-plugin-chart-sunburst/src/Sunburst.js"),x.register(g,"metricLabel","/Users/chenming/superset/superset-frontend/plugins/legacy-plugin-chart-sunburst/src/Sunburst.js"),x.register(f,"getAncestors","/Users/chenming/superset/superset-frontend/plugins/legacy-plugin-chart-sunburst/src/Sunburst.js"),x.register(m,"buildHierarchy","/Users/chenming/superset/superset-frontend/plugins/legacy-plugin-chart-sunburst/src/Sunburst.js"),x.register(b,"getResponsiveContainerClass","/Users/chenming/superset/superset-frontend/plugins/legacy-plugin-chart-sunburst/src/Sunburst.js"),x.register(y,"getYOffset","/Users/chenming/superset/superset-frontend/plugins/legacy-plugin-chart-sunburst/src/Sunburst.js"),x.register(_,"Sunburst","/Users/chenming/superset/superset-frontend/plugins/legacy-plugin-chart-sunburst/src/Sunburst.js"),x.register(v,"default","/Users/chenming/superset/superset-frontend/plugins/legacy-plugin-chart-sunburst/src/Sunburst.js")),(H="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&H(e)},177749:(e,t,r)=>{r.d(t,{Z:()=>i});var a,n,s,l=r(615078),o=r.n(l);function i(e,t,r){e.each((function(){const e=o().select(this),a=e.text().split(/\s+/);let n=[],s=0;const l=e.attr("x"),i=e.attr("y"),c=parseFloat(e.attr("dy"));let d=e.text(null).append("tspan").attr("x",l).attr("y",i).attr("dy",`${c}em`),u=!1;a.forEach((r=>{n.push(r),d.text(n.join(" ")),d.node().getComputedTextLength()>t&&(s+=1,n.pop(),d.text(n.join(" ")),n=[r],d=e.append("tspan").attr("x",l).attr("y",i).attr("dy",`${1*s+c}em`).text(r),u=!0)})),u||void 0===r||d.attr("y",r)}))}e=r.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&n.register(i,"wrapSvgText","/Users/chenming/superset/superset-frontend/plugins/legacy-plugin-chart-sunburst/src/utils/wrapSvgText.js"),(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&s(e)},943323:(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>reactify});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(667294),_emotion_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(211965),enterModule;module=__webpack_require__.hmd(module),enterModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0,enterModule&&enterModule(module);var __signature__="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},reactHotLoader,leaveModule;function reactify(renderFn,callbacks){class ReactifiedComponent extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(e){super(e),this.container=void 0,this.setContainerRef=this.setContainerRef.bind(this)}componentDidMount(){this.execute()}componentDidUpdate(){this.execute()}componentWillUnmount(){this.container=void 0,null!=callbacks&&callbacks.componentWillUnmount&&callbacks.componentWillUnmount.bind(this)()}setContainerRef(e){this.container=e}execute(){this.container&&renderFn(this.container,this.props)}render(){const{id:e,className:t}=this.props;return(0,_emotion_react__WEBPACK_IMPORTED_MODULE_1__.tZ)("div",{ref:this.setContainerRef,id:e,className:t})}__reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}const ReactifiedClass=ReactifiedComponent;return renderFn.displayName&&(ReactifiedClass.displayName=renderFn.displayName),renderFn.propTypes&&(ReactifiedClass.propTypes={...ReactifiedClass.propTypes,...renderFn.propTypes}),renderFn.defaultProps&&(ReactifiedClass.defaultProps=renderFn.defaultProps),ReactifiedComponent}reactHotLoader="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0,reactHotLoader&&reactHotLoader.register(reactify,"reactify","/Users/chenming/superset/superset-frontend/packages/superset-ui-core/src/chart/components/reactify.tsx"),leaveModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0,leaveModule&&leaveModule(module)}}]);