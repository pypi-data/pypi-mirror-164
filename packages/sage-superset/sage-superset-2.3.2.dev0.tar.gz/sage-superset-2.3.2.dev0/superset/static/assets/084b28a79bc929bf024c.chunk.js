"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[219,7275,8146],{131774:(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var lodash_isEqual__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(618446),lodash_isEqual__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash_isEqual__WEBPACK_IMPORTED_MODULE_0__),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(667294),prop_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(45697),prop_types__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__),_superset_ui_core__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(431069),_DeckGLContainer__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(287026),_utils_explore__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(655272),_layers__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(494582),_emotion_react__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(211965),enterModule;module=__webpack_require__.hmd(module),enterModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0,enterModule&&enterModule(module);var __signature__="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e};const propTypes={formData:prop_types__WEBPACK_IMPORTED_MODULE_2___default().object.isRequired,payload:prop_types__WEBPACK_IMPORTED_MODULE_2___default().object.isRequired,setControlValue:prop_types__WEBPACK_IMPORTED_MODULE_2___default().func.isRequired,viewport:prop_types__WEBPACK_IMPORTED_MODULE_2___default().object.isRequired,onAddFilter:prop_types__WEBPACK_IMPORTED_MODULE_2___default().func,onSelect:prop_types__WEBPACK_IMPORTED_MODULE_2___default().func},defaultProps={onAddFilter(){},onSelect(){}};class DeckMulti extends react__WEBPACK_IMPORTED_MODULE_1__.PureComponent{constructor(e){super(e),this.containerRef=react__WEBPACK_IMPORTED_MODULE_1__.createRef(),this.setTooltip=e=>{const{current:t}=this.containerRef;t&&t.setTooltip(e)},this.state={subSlicesLayers:{}},this.onViewportChange=this.onViewportChange.bind(this)}componentDidMount(){const{formData:e,payload:t}=this.props;this.loadLayers(e,t)}UNSAFE_componentWillReceiveProps(e){const{formData:t,payload:r}=e;!lodash_isEqual__WEBPACK_IMPORTED_MODULE_0___default()(this.props.formData.deck_slices,e.formData.deck_slices)&&this.loadLayers(t,r)}onViewportChange(e){this.setState({viewport:e})}loadLayers(e,t,r){this.setState({subSlicesLayers:{},viewport:r}),t.data.slices.forEach((t=>{const r=[...t.form_data.filters||[],...e.filters||[],...e.extra_filters||[]],o={...t,form_data:{...t.form_data,filters:r}};_superset_ui_core__WEBPACK_IMPORTED_MODULE_6__.Z.get({endpoint:(0,_utils_explore__WEBPACK_IMPORTED_MODULE_4__.v)(o.form_data,"json")}).then((({json:e})=>{const t=_layers__WEBPACK_IMPORTED_MODULE_5__.Z[o.form_data.viz_type](o.form_data,e,this.props.onAddFilter,this.setTooltip,[],this.props.onSelect);this.setState({subSlicesLayers:{...this.state.subSlicesLayers,[o.slice_id]:t}})})).catch((()=>{}))}))}render(){const{payload:e,formData:t,setControlValue:r,height:o,width:a}=this.props,{subSlicesLayers:s}=this.state,l=Object.values(s);return(0,_emotion_react__WEBPACK_IMPORTED_MODULE_7__.tZ)(_DeckGLContainer__WEBPACK_IMPORTED_MODULE_3__.F,{ref:this.containerRef,mapboxApiAccessToken:e.data.mapboxApiKey,viewport:this.state.viewport||this.props.viewport,layers:l,mapStyle:t.mapbox_style,setControlValue:r,onViewportChange:this.onViewportChange,height:o,width:a})}__reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}DeckMulti.propTypes=propTypes,DeckMulti.defaultProps=defaultProps;const _default=DeckMulti,__WEBPACK_DEFAULT_EXPORT__=_default;var reactHotLoader,leaveModule;reactHotLoader="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0,reactHotLoader&&(reactHotLoader.register(propTypes,"propTypes","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/Multi/Multi.jsx"),reactHotLoader.register(defaultProps,"defaultProps","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/Multi/Multi.jsx"),reactHotLoader.register(DeckMulti,"DeckMulti","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/Multi/Multi.jsx"),reactHotLoader.register(_default,"default","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/Multi/Multi.jsx")),leaveModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0,leaveModule&&leaveModule(module)},803251:(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{getLayer:()=>getLayer,default:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(667294),prop_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(45697),prop_types__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__),deck_gl__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(721497),_DeckGLContainer__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(287026),_utils_colors__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(464106),_utils_sandbox__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(621207),_common__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(452154),_TooltipRow__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(101740),_emotion_react__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(211965),enterModule;module=__webpack_require__.hmd(module),enterModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0,enterModule&&enterModule(module);var __signature__="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e};const propertyMap={fillColor:"fillColor",color:"fillColor",fill:"fillColor","fill-color":"fillColor",strokeColor:"strokeColor","stroke-color":"strokeColor","stroke-width":"strokeWidth"},alterProps=(e,t)=>{const r={};return Object.keys(e).forEach((t=>{t in propertyMap?r[propertyMap[t]]=e[t]:r[t]=e[t]})),"string"==typeof e.fillColor&&(r.fillColor=(0,_utils_colors__WEBPACK_IMPORTED_MODULE_3__.hexToRGB)(e.fillColor)),"string"==typeof e.strokeColor&&(r.strokeColor=(0,_utils_colors__WEBPACK_IMPORTED_MODULE_3__.hexToRGB)(e.strokeColor)),{...r,...t}};let features;const recurseGeoJson=(e,t,r)=>{if(e&&e.features&&e.features.forEach((o=>{recurseGeoJson(o,t,e.extraProps||r)})),e&&e.geometry){const o={...e,properties:alterProps(e.properties,t)};o.extraProps||(o.extraProps=r),features.push(o)}};function setTooltipContent(e){return e.object.extraProps&&(0,_emotion_react__WEBPACK_IMPORTED_MODULE_7__.tZ)("div",{className:"deckgl-tooltip"},Object.keys(e.object.extraProps).map(((t,r)=>(0,_emotion_react__WEBPACK_IMPORTED_MODULE_7__.tZ)(_TooltipRow__WEBPACK_IMPORTED_MODULE_6__.Z,{key:`prop-${r}`,label:`${t}: `,value:`${e.object.extraProps[t]}`}))))}function getLayer(e,t,r,o){const a=e,s=a.fill_color_picker,l=a.stroke_color_picker,n=[s.r,s.g,s.b,255*s.a],i=[l.r,l.g,l.b,255*l.a],_={};let c;return n[3]>0&&(_.fillColor=n),i[3]>0&&(_.strokeColor=i),features=[],recurseGeoJson(t.data,_),a.js_data_mutator&&(c=(0,_utils_sandbox__WEBPACK_IMPORTED_MODULE_4__.Z)(a.js_data_mutator),features=c(features)),new deck_gl__WEBPACK_IMPORTED_MODULE_8__.Z({id:`geojson-layer-${a.slice_id}`,filled:a.filled,data:features,stroked:a.stroked,extruded:a.extruded,pointRadiusScale:a.point_radius_scale,...(0,_common__WEBPACK_IMPORTED_MODULE_5__.N)(a,o,setTooltipContent)})}const propTypes={formData:prop_types__WEBPACK_IMPORTED_MODULE_1___default().object.isRequired,payload:prop_types__WEBPACK_IMPORTED_MODULE_1___default().object.isRequired,setControlValue:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func.isRequired,viewport:prop_types__WEBPACK_IMPORTED_MODULE_1___default().object.isRequired,onAddFilter:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func},defaultProps={onAddFilter(){}};class DeckGLGeoJson extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(...e){super(...e),this.containerRef=react__WEBPACK_IMPORTED_MODULE_0__.createRef(),this.setTooltip=e=>{const{current:t}=this.containerRef;t&&t.setTooltip(e)}}render(){const{formData:e,payload:t,setControlValue:r,onAddFilter:o,viewport:a}=this.props,s=getLayer(e,t,o,this.setTooltip);return(0,_emotion_react__WEBPACK_IMPORTED_MODULE_7__.tZ)(_DeckGLContainer__WEBPACK_IMPORTED_MODULE_2__.F,{ref:this.containerRef,mapboxApiAccessToken:t.data.mapboxApiKey,viewport:a,layers:[s],mapStyle:e.mapbox_style,setControlValue:r})}__reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}DeckGLGeoJson.propTypes=propTypes,DeckGLGeoJson.defaultProps=defaultProps;const _default=DeckGLGeoJson,__WEBPACK_DEFAULT_EXPORT__=_default;var reactHotLoader,leaveModule;reactHotLoader="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0,reactHotLoader&&(reactHotLoader.register(propertyMap,"propertyMap","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/layers/Geojson/Geojson.jsx"),reactHotLoader.register(alterProps,"alterProps","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/layers/Geojson/Geojson.jsx"),reactHotLoader.register(features,"features","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/layers/Geojson/Geojson.jsx"),reactHotLoader.register(recurseGeoJson,"recurseGeoJson","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/layers/Geojson/Geojson.jsx"),reactHotLoader.register(setTooltipContent,"setTooltipContent","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/layers/Geojson/Geojson.jsx"),reactHotLoader.register(getLayer,"getLayer","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/layers/Geojson/Geojson.jsx"),reactHotLoader.register(propTypes,"propTypes","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/layers/Geojson/Geojson.jsx"),reactHotLoader.register(defaultProps,"defaultProps","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/layers/Geojson/Geojson.jsx"),reactHotLoader.register(DeckGLGeoJson,"DeckGLGeoJson","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/layers/Geojson/Geojson.jsx"),reactHotLoader.register(_default,"default","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/layers/Geojson/Geojson.jsx")),leaveModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0,leaveModule&&leaveModule(module)},694828:(e,t,r)=>{r.r(t),r.d(t,{getLayer:()=>d,default:()=>f});var o,a=r(399396),s=(r(667294),r(455867)),l=r(452154),n=r(621207),i=r(241667),_=r(101740),c=r(211965);function u(e){return(0,c.tZ)("div",{className:"deckgl-tooltip"},(0,c.tZ)(_.Z,{label:`${(0,s.t)("Longitude and Latitude")}: `,value:`${e.coordinate[0]}, ${e.coordinate[1]}`}),(0,c.tZ)(_.Z,{label:`${(0,s.t)("Height")}: `,value:`${e.object.elevationValue}`}))}function d(e,t,r,o){const s=e,i=s.color_picker;let _=t.data.features.map((e=>({...e,color:[i.r,i.g,i.b,255*i.a]})));s.js_data_mutator&&(_=(0,n.Z)(s.js_data_mutator)(_));const c=(0,l.Z)(s.js_agg_function,(e=>e.weight));return new a.Z({id:`grid-layer-${s.slice_id}`,data:_,pickable:!0,cellSize:s.grid_size,minColor:[0,0,0,0],extruded:s.extruded,maxColor:[i.r,i.g,i.b,255*i.a],outline:!1,getElevationValue:c,getColorValue:c,...(0,l.N)(s,o,u)})}function p(e){return e.map((e=>e.position))}e=r.hmd(e),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const g=(0,i.G)(d,p),f=g;var h,y;(h="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(h.register(u,"setTooltipContent","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/layers/Grid/Grid.jsx"),h.register(d,"getLayer","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/layers/Grid/Grid.jsx"),h.register(p,"getPoints","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/layers/Grid/Grid.jsx"),h.register(g,"default","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/layers/Grid/Grid.jsx")),(y="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&y(e)},755573:(e,t,r)=>{r.r(t),r.d(t,{default:()=>G,getLayer:()=>P});var o=r(380744),a=r(815103),s=r(104516),l=Math.PI/3,n=[0,l,2*l,3*l,4*l,5*l];function i(e){return e[0]}function _(e){return e[1]}var c=r(838550),u=r(973728),d=r(963295);function p(){}const g={colorDomain:null,colorRange:s.K,getColorValue:{type:"accessor",value:null},getColorWeight:{type:"accessor",value:1},colorAggregation:"SUM",lowerPercentile:{type:"number",value:0,min:0,max:100},upperPercentile:{type:"number",value:100,min:0,max:100},colorScaleType:"quantize",onSetColorDomain:p,elevationDomain:null,elevationRange:[0,1e3],getElevationValue:{type:"accessor",value:null},getElevationWeight:{type:"accessor",value:1},elevationAggregation:"SUM",elevationLowerPercentile:{type:"number",value:0,min:0,max:100},elevationUpperPercentile:{type:"number",value:100,min:0,max:100},elevationScale:{type:"number",min:0,value:1},elevationScaleType:"linear",onSetElevationDomain:p,radius:{type:"number",value:1e3,min:1},coverage:{type:"number",min:0,max:1,value:1},extruded:!1,hexagonAggregator:function(e,t){const{data:r,radius:a}=e,{viewport:s,attributes:u}=t,d=r.length?function(e,t){const{attributes:r}=t,o=r.positions.value,{size:a}=r.positions.getAccessor();let s,l=1/0,n=1/0,i=-1/0,_=-1/0;for(s=0;s<a*e.length;s+=a){const e=o[s],t=o[s+1];Number.isFinite(e)&&Number.isFinite(t)&&(l=Math.min(e,l),i=Math.max(e,i),n=Math.min(t,n),_=Math.max(t,_))}return[l,n,i,_].every(Number.isFinite)?[(l+i)/2,(n+_)/2]:null}(r,t):null,p=function(e,t,r){const{unitsPerMeter:o}=t.getDistanceScales(r);return e*o[0]}(a,s,d),g=[],{iterable:f,objectInfo:h}=(0,c.jB)(r),y=u.positions.value,{size:L}=u.positions.getAccessor();for(const e of f){h.index++;const t=h.index*L,r=[y[t],y[t+1]];Number.isFinite(r[0])&&Number.isFinite(r[1])?g.push({screenCoord:s.projectFlat(r),source:e,index:h.index}):o.Z.warn("HexagonLayer: invalid position")()}const b=function(){var e,t,r,o=0,a=0,s=1,c=1,u=i,d=_;function p(e){var o,a={},s=[],l=e.length;for(o=0;o<l;++o)if(!isNaN(i=+u.call(null,n=e[o],o,e))&&!isNaN(_=+d.call(null,n,o,e))){var n,i,_,c=Math.round(_/=r),p=Math.round(i=i/t-(1&c)/2),g=_-c;if(3*Math.abs(g)>1){var f=i-p,h=p+(i<p?-1:1)/2,y=c+(_<c?-1:1),L=i-h,b=_-y;f*f+g*g>L*L+b*b&&(p=h+(1&c?1:-1)/2,c=y)}var E=p+"-"+c,M=a[E];M?M.push(n):(s.push(M=a[E]=[n]),M.x=(p+(1&c)/2)*t,M.y=c*r)}return s}function g(e){var t=0,r=0;return n.map((function(o){var a=Math.sin(o)*e,s=-Math.cos(o)*e,l=a-t,n=s-r;return t=a,r=s,[l,n]}))}return p.hexagon=function(t){return"m"+g(null==t?e:+t).join("l")+"z"},p.centers=function(){for(var l=[],n=Math.round(a/r),i=Math.round(o/t),_=n*r;_<c+e;_+=r,++n)for(var u=i*t+(1&n)*t/2;u<s+t/2;u+=t)l.push([u,_]);return l},p.mesh=function(){var t=g(e).slice(0,4).join("l");return p.centers().map((function(e){return"M"+e+"m"+t})).join("")},p.x=function(e){return arguments.length?(u=e,p):u},p.y=function(e){return arguments.length?(d=e,p):d},p.radius=function(o){return arguments.length?(t=2*(e=+o)*Math.sin(l),r=1.5*e,p):e},p.size=function(e){return arguments.length?(o=a=0,s=+e[0],c=+e[1],p):[s-o,c-a]},p.extent=function(e){return arguments.length?(o=+e[0][0],a=+e[0][1],s=+e[1][0],c=+e[1][1],p):[[o,a],[s,c]]},p.radius(1)}().radius(p).x((e=>e.screenCoord[0])).y((e=>e.screenCoord[1]));return{hexagons:b(g).map(((e,t)=>({position:s.unprojectFlat([e.x,e.y]),points:e,index:t}))),radiusCommon:p}},getPosition:{type:"accessor",value:e=>e.position},material:!0,_filterData:{type:"function",value:null,optional:!0}};class f extends d.Z{shouldUpdateState({changeFlags:e}){return e.somethingChanged}initializeState(){const e=new u.Z({getAggregator:e=>e.hexagonAggregator,getCellSize:e=>e.radius});this.state={cpuAggregator:e,aggregatorState:e.state,hexagonVertices:null},this.getAttributeManager().add({positions:{size:3,accessor:"getPosition"}})}updateState(e){super.updateState(e);const{cpuAggregator:t,hexagonVertices:r}=this.state;e.changeFlags.propsOrDataChanged&&this.setState({aggregatorState:t.updateState(e,{viewport:this.context.viewport,attributes:this.getAttributes()})});const{hexagonVertices:o}=t.state.layerData||{};if(o&&r!==o){const e=this.convertLatLngToMeterOffset(o);e&&this.setState({hexagonVertices:o,vertices:e})}else this.updateRadiusAngle()}updateRadiusAngle(e){const{viewport:t}=this.context,{unitsPerMeter:r}=t.getDistanceScales(),{cpuAggregator:o}=this.state;if(o.state.layerData&&o.state.layerData.radiusCommon){const{radiusCommon:e}=o.state.layerData,t=e/r[0];this.setState({angle:90,radius:t})}}convertLatLngToMeterOffset(e){const{viewport:t}=this.context;if(Array.isArray(e)&&6===e.length){const r=e[0],o=e[3],a=[(r[0]+o[0])/2,(r[1]+o[1])/2],s=t.projectFlat(a),{metersPerUnit:l}=t.getDistanceScales(a);return e.map((e=>{const r=t.projectFlat(e);return[(r[0]-s[0])*l[0],(r[1]-s[1])*l[1]]}))}return o.Z.error("HexagonLayer: hexagonVertices needs to be an array of 6 points")(),null}getPickingInfo({info:e}){return this.state.cpuAggregator.getPickingInfo({info:e})}_onGetSublayerColor(e){return this.state.cpuAggregator.getAccessor("fillColor")(e)}_onGetSublayerElevation(e){return this.state.cpuAggregator.getAccessor("elevation")(e)}_getSublayerUpdateTriggers(){return this.state.cpuAggregator.getUpdateTriggers(this.props)}renderLayers(){const{elevationScale:e,extruded:t,coverage:r,material:o,transitions:s}=this.props,{angle:l,radius:n,cpuAggregator:i,vertices:_}=this.state,c=this.getSubLayerClass("hexagon-cell",a.Z),u=this._getSublayerUpdateTriggers();return new c({..._&&_.length?{vertices:_,radius:1}:{radius:n,angle:l},diskResolution:6,elevationScale:e,extruded:t,coverage:r,material:o,getFillColor:this._onGetSublayerColor.bind(this),getElevation:this._onGetSublayerElevation.bind(this),transitions:s&&{getFillColor:s.getColorValue||s.getColorWeight,getElevation:s.getElevationValue||s.getElevationWeight}},this.getSubLayerProps({id:"hexagon-cell",updateTriggers:u}),{data:i.state.layerData.data})}}f.layerName="HexagonLayer",f.defaultProps=g,r(667294);var h,y=r(455867),L=r(452154),b=r(621207),E=r(241667),M=r(101740),m=r(211965);function v(e){return(0,m.tZ)("div",{className:"deckgl-tooltip"},(0,m.tZ)(M.Z,{label:`${(0,y.t)("Centroid (Longitude and Latitude)")}: `,value:`(${e.coordinate[0]}, ${e.coordinate[1]})`}),(0,m.tZ)(M.Z,{label:`${(0,y.t)("Height")}: `,value:`${e.object.elevationValue}`}))}function P(e,t,r,o){const a=e,s=a.color_picker;let l=t.data.features.map((e=>({...e,color:[s.r,s.g,s.b,255*s.a]})));a.js_data_mutator&&(l=(0,b.Z)(a.js_data_mutator)(l));const n=(0,L.Z)(a.js_agg_function,(e=>e.weight));return new f({id:`hex-layer-${a.slice_id}`,data:l,pickable:!0,radius:a.grid_size,minColor:[0,0,0,0],extruded:a.extruded,maxColor:[s.r,s.g,s.b,255*s.a],outline:!1,getElevationValue:n,getColorValue:n,...(0,L.N)(a,o,v)})}function k(e){return e.map((e=>e.position))}e=r.hmd(e),(h="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&h(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const D=(0,E.G)(P,k),G=D;var C,x;(C="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(C.register(v,"setTooltipContent","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/layers/Hex/Hex.jsx"),C.register(P,"getLayer","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/layers/Hex/Hex.jsx"),C.register(k,"getPoints","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/layers/Hex/Hex.jsx"),C.register(D,"default","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/layers/Hex/Hex.jsx")),(x="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&x(e)},714228:(e,t,r)=>{r.r(t),r.d(t,{getLayer:()=>u,default:()=>g});var o,a=r(762112),s=(r(667294),r(452154)),l=r(621207),n=r(241667),i=r(101740),_=r(211965);function c(e){return e.object.extraProps&&(0,_.tZ)("div",{className:"deckgl-tooltip"},Object.keys(e.object.extraProps).map(((t,r)=>(0,_.tZ)(i.Z,{key:`prop-${r}`,label:`${t}: `,value:`${e.object.extraProps[t]}`}))))}function u(e,t,r,o){const n=e,i=n.color_picker,_=[i.r,i.g,i.b,255*i.a];let u=t.data.features.map((e=>({...e,path:e.path,width:n.line_width,color:_})));return n.js_data_mutator&&(u=(0,l.Z)(n.js_data_mutator)(u)),new a.Z({id:`path-layer-${n.slice_id}`,getColor:e=>e.color,getPath:e=>e.path,getWidth:e=>e.width,data:u,rounded:!0,widthScale:1,...(0,s.N)(n,o,c)})}function d(e){let t=[];return e.forEach((e=>{t=t.concat(e.path)})),t}e=r.hmd(e),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const p=(0,n.G)(u,d),g=p;var f,h;(f="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(f.register(c,"setTooltipContent","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/layers/Path/Path.jsx"),f.register(u,"getLayer","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/layers/Path/Path.jsx"),f.register(d,"getPoints","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/layers/Path/Path.jsx"),f.register(p,"default","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/layers/Path/Path.jsx")),(h="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&h(e)},659365:(e,t,r)=>{r.r(t),r.d(t,{getLayer:()=>g,default:()=>h});var o,a=r(328569),s=(r(667294),r(956652)),l=r(455867),n=r(452154),i=r(241667),_=r(101740),c=r(831677),u=r(211965);function d(e){return e.map((e=>e.position))}function p(e,t){return r=>{var o;const a=(null==t?void 0:t[e.point_radius_fixed.value])||(0,s.Z)(null==(o=e.point_radius_fixed)?void 0:o.value);return(0,u.tZ)("div",{className:"deckgl-tooltip"},(0,u.tZ)(_.Z,{label:`${(0,l.t)("Longitude and Latitude")}: `,value:`${r.object.position[0]}, ${r.object.position[1]}`}),r.object.cat_color&&(0,u.tZ)(_.Z,{label:`${(0,l.t)("Category")}: `,value:`${r.object.cat_color}`}),r.object.metric&&(0,u.tZ)(_.Z,{label:`${a}: `,value:`${r.object.metric}`}))}}function g(e,t,r,o,s){const l=e,i=t.data.features.map((e=>{let t=(0,c.lb)(l.point_unit,e.radius)||10;if(l.multiplier&&(t*=l.multiplier),e.color)return{...e,radius:t};const r=l.color_picker||{r:0,g:0,b:0,a:1},o=[r.r,r.g,r.b,255*r.a];return{...e,radius:t,color:o}}));return new a.Z({id:`scatter-layer-${l.slice_id}`,data:i,fp64:!0,getFillColor:e=>e.color,getRadius:e=>e.radius,radiusMinPixels:l.min_radius||null,radiusMaxPixels:l.max_radius||null,stroked:!1,...(0,n.N)(l,o,p(l,null==s?void 0:s.verboseMap))})}e=r.hmd(e),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const f=(0,i.B)(g,d),h=f;var y,L;(y="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(y.register(d,"getPoints","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/layers/Scatter/Scatter.jsx"),y.register(p,"setTooltipContent","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/layers/Scatter/Scatter.jsx"),y.register(g,"getLayer","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/layers/Scatter/Scatter.jsx"),y.register(f,"default","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/layers/Scatter/Scatter.jsx")),(L="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&L(e)},494582:(e,t,r)=>{r.d(t,{Z:()=>g});var o,a=r(694828),s=r(383324),l=r(714228),n=r(755573),i=r(659365),_=r(803251),c=r(821382),u=r(381653);e=r.hmd(e),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const d={deck_grid:a.getLayer,deck_screengrid:s.getLayer,deck_path:l.getLayer,deck_hex:n.getLayer,deck_scatter:i.getLayer,deck_geojson:_.getLayer,deck_arc:c.getLayer,deck_polygon:u.getLayer},p=d,g=p;var f,h;(f="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(f.register(d,"layerGenerators","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/layers/index.js"),f.register(p,"default","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/layers/index.js")),(h="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&h(e)},655272:(e,t,r)=>{r.d(t,{v:()=>c});var o,a,s,l=r(354998),n=r.n(l),i=r(384285);function _(e,t="base"){let r="/superset/explore/";return["json","csv","query","results","samples"].includes(t)&&(r="/superset/explore_json/"),r}function c(e,t,r=!0,o={}){if(!e.datasource)return null;const a=new(n())("/"),s=_(0,t),l=a.search(!0);Object.keys(o).forEach((e=>{l[e]=o[e]})),l.form_data=(0,i.o)(e),"standalone"===t&&(l.standalone="true");const u=a.directory(s).search(l).toString();return!r&&u.length>8e3?c({datasource:e.datasource,viz_type:e.viz_type},t,!1,{URL_IS_TOO_LONG_TO_SHARE:null}):u}e=r.hmd(e),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(a.register(8e3,"MAX_URL_LENGTH","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/utils/explore.js"),a.register(_,"getURIDirectory","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/utils/explore.js"),a.register(c,"getExploreLongUrl","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/utils/explore.js")),(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&s(e)},831677:(e,t,r)=>{r.d(t,{lb:()=>l});var o,a=r(629612);e=r.hmd(e),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const s=1609.34;function l(e,t){return"square_m"===e?Math.sqrt(t/Math.PI):"radius_m"===e?t:"radius_km"===e?1e3*t:"radius_miles"===e?t*s:"square_km"===e?1e3*Math.sqrt(t/Math.PI):"square_miles"===e?Math.sqrt(t/Math.PI)*s:null}const n=40075.16;var i,_;(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(i.register({bearing:0,latitude:31.222656842808707,longitude:6.85236157047845,pitch:0,zoom:1},"defaultViewport","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/utils/geo.js"),i.register(s,"METER_TO_MILE","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/utils/geo.js"),i.register(l,"unitToRadius","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/utils/geo.js"),i.register(n,"EARTH_CIRCUMFERENCE_KM","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/utils/geo.js"),i.register(1.60934,"MILES_PER_KM","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/utils/geo.js"),i.register((function(e,t,r){const o=t*(Math.PI/180),s=n*Math.cos(o)/2**(r+9);return(0,a.v)(e/s,2)}),"kmToPixels","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/utils/geo.js")),(_="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&_(e)},384285:(e,t,r)=>{var o,a,s;function l(e){const t=new Set;return JSON.stringify(e,((e,r)=>{if("object"==typeof r&&null!==r){if(t.has(r))try{return JSON.parse(JSON.stringify(r))}catch(e){return}t.add(r)}return r}))}r.d(t,{o:()=>l}),e=r.hmd(e),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&a.register(l,"safeStringify","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/utils/safeStringify.js"),(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&s(e)},629612:(e,t,r)=>{var o,a,s;function l(e,t){let r;return r=t?Math.round(e*(t=10**t))/t:Math.round(e),r}r.d(t,{v:()=>l}),e=r.hmd(e),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&a.register(l,"roundDecimal","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/utils/utils.js"),(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&s(e)}}]);