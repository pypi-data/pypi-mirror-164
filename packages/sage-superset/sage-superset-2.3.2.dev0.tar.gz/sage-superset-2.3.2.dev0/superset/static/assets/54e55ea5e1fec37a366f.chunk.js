"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[7979,7275,8146],{295644:(e,t,o)=>{o.d(t,{N:()=>n});const r="#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n",i={lightSources:{}};function _({color:e=[0,0,0],intensity:t=1}={}){return e.map((e=>e*t/255))}const a={};const n={name:"gouraud-lighting",dependencies:[{name:"lights",vs:r,fs:r,getUniforms:function e(t=i){if("lightSources"in t){const{ambientLight:e,pointLights:o,directionalLights:r}=t.lightSources||{};return e||o&&o.length>0||r&&r.length>0?Object.assign({},function({ambientLight:e,pointLights:t=[],directionalLights:o=[]}){const r={};return r["lighting_uAmbientLight.color"]=e?_(e):[0,0,0],t.forEach(((e,t)=>{r["lighting_uPointLight[".concat(t,"].color")]=_(e),r["lighting_uPointLight[".concat(t,"].position")]=e.position,r["lighting_uPointLight[".concat(t,"].attenuation")]=e.attenuation||[1,0,0]})),r.lighting_uPointLightCount=t.length,o.forEach(((e,t)=>{r["lighting_uDirectionalLight[".concat(t,"].color")]=_(e),r["lighting_uDirectionalLight[".concat(t,"].direction")]=e.direction})),r.lighting_uDirectionalLightCount=o.length,r}({ambientLight:e,pointLights:o,directionalLights:r}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in t){const o={pointLights:[],directionalLights:[]};for(const e of t.lights||[])switch(e.type){case"ambient":o.ambientLight=e;break;case"directional":o.directionalLights.push(e);break;case"point":o.pointLights.push(e)}return e({lightSources:o})}return{}},defines:{MAX_LIGHTS:3}}],vs:"\nuniform float lighting_uAmbient;\nuniform float lighting_uDiffuse;\nuniform float lighting_uShininess;\nuniform vec3  lighting_uSpecularColor;\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normal_worldspace);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\n      specular = pow(specular_angle, lighting_uShininess);\n    }\n    lambertian = max(lambertian, 0.0);\n    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;\n}\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = surfaceColor;\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n\nvec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = vec3(0, 0, 0);\n  vec3 surfaceColor = vec3(0, 0, 0);\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n",defines:{LIGHTING_VERTEX:1},getUniforms:function(e=a){if(!("material"in e))return{};const{material:t}=e;return t?function(e){const{ambient:t=.35,diffuse:o=.6,shininess:r=32,specularColor:i=[30,30,30]}=e;return{lighting_uAmbient:t,lighting_uDiffuse:o,lighting_uShininess:r,lighting_uSpecularColor:i.map((e=>e/255))}}(t):{lighting_uEnabled:!1}}}},639023:(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>CategoricalDeckGLContainer});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(667294),prop_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(45697),prop_types__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__),_superset_ui_core__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(328062),_AnimatableDeckGLContainer__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(815354),_components_Legend__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(36665),_utils_colors__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(464106),_utils_time__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(166911),_utils_sandbox__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(621207),_utils_fitViewport__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(74020),_emotion_react__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(211965),enterModule;module=__webpack_require__.hmd(module),enterModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0,enterModule&&enterModule(module);var __signature__="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e};const{getScale}=_superset_ui_core__WEBPACK_IMPORTED_MODULE_8__;function getCategories(e,t){const o=e.color_picker||{r:0,g:0,b:0,a:1},r=[o.r,o.g,o.b,255*o.a],i=getScale(e.color_scheme),_={};return t.forEach((t=>{if(null!=t.cat_color&&!_.hasOwnProperty(t.cat_color)){let a;a=e.dimension?(0,_utils_colors__WEBPACK_IMPORTED_MODULE_4__.hexToRGB)(i(t.cat_color),255*o.a):r,_[t.cat_color]={color:a,enabled:!0}}})),_}const propTypes={datasource:prop_types__WEBPACK_IMPORTED_MODULE_1___default().object.isRequired,formData:prop_types__WEBPACK_IMPORTED_MODULE_1___default().object.isRequired,getLayer:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func.isRequired,getPoints:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func.isRequired,height:prop_types__WEBPACK_IMPORTED_MODULE_1___default().number.isRequired,mapboxApiKey:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string.isRequired,onAddFilter:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func,payload:prop_types__WEBPACK_IMPORTED_MODULE_1___default().object.isRequired,setControlValue:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func.isRequired,viewport:prop_types__WEBPACK_IMPORTED_MODULE_1___default().object.isRequired,width:prop_types__WEBPACK_IMPORTED_MODULE_1___default().number.isRequired};class CategoricalDeckGLContainer extends react__WEBPACK_IMPORTED_MODULE_0__.PureComponent{constructor(e){super(e),this.containerRef=react__WEBPACK_IMPORTED_MODULE_0__.createRef(),this.setTooltip=e=>{const{current:t}=this.containerRef;t&&t.setTooltip(e)},this.state=this.getStateFromProps(e),this.getLayers=this.getLayers.bind(this),this.onValuesChange=this.onValuesChange.bind(this),this.toggleCategory=this.toggleCategory.bind(this),this.showSingleCategory=this.showSingleCategory.bind(this)}UNSAFE_componentWillReceiveProps(e){e.payload.form_data!==this.state.formData&&this.setState({...this.getStateFromProps(e)})}onValuesChange(e){this.setState({values:Array.isArray(e)?e:[e,e+this.state.getStep(e)]})}getStateFromProps(e,t){const o=e.payload.data.features||[],r=o.map((e=>e.__timestamp)),i=getCategories(e.formData,o);if(t&&e.payload.form_data===t.formData)return{...t,categories:i};const _=e.payload.form_data.time_grain_sqla||e.payload.form_data.granularity||"P1D",{start:a,end:n,getStep:s,values:l,disabled:c}=(0,_utils_time__WEBPACK_IMPORTED_MODULE_5__.g)(r,_),{width:p,height:g,formData:d}=e;let{viewport:u}=e;return d.autozoom&&(u=(0,_utils_fitViewport__WEBPACK_IMPORTED_MODULE_7__.Z)(u,{width:p,height:g,points:e.getPoints(o)})),u.zoom<0&&(u.zoom=0),{start:a,end:n,getStep:s,values:l,disabled:c,viewport:u,selected:[],lastClick:0,formData:e.payload.form_data,categories:i}}getLayers(e){const{getLayer:t,payload:o,formData:r,onAddFilter:i}=this.props;let _=o.data.features?[...o.data.features]:[];_=this.addColor(_,r),r.js_data_mutator&&(_=(0,_utils_sandbox__WEBPACK_IMPORTED_MODULE_6__.Z)(r.js_data_mutator)(_)),_=e[0]===e[1]||e[1]===this.end?_.filter((t=>t.__timestamp>=e[0]&&t.__timestamp<=e[1])):_.filter((t=>t.__timestamp>=e[0]&&t.__timestamp<e[1]));const a=this.state.categories;return r.dimension&&(_=_.filter((e=>a[e.cat_color]&&a[e.cat_color].enabled))),[t(r,{...o,data:{...o.data,features:_}},i,this.setTooltip,this.props.datasource)]}addColor(e,t){const o=t.color_picker||{r:0,g:0,b:0,a:1},r=getScale(t.color_scheme);return e.map((e=>{let i;return t.dimension?(i=(0,_utils_colors__WEBPACK_IMPORTED_MODULE_4__.hexToRGB)(r(e.cat_color),255*o.a),{...e,color:i}):e}))}toggleCategory(e){const t=this.state.categories[e],o={...this.state.categories,[e]:{...t,enabled:!t.enabled}};Object.values(o).every((e=>!e.enabled))&&Object.values(o).forEach((e=>{e.enabled=!0})),this.setState({categories:o})}showSingleCategory(e){const t={...this.state.categories};Object.values(t).forEach((e=>{e.enabled=!1})),t[e].enabled=!0,this.setState({categories:t})}render(){return(0,_emotion_react__WEBPACK_IMPORTED_MODULE_9__.tZ)("div",{style:{position:"relative"}},(0,_emotion_react__WEBPACK_IMPORTED_MODULE_9__.tZ)(_AnimatableDeckGLContainer__WEBPACK_IMPORTED_MODULE_2__.Z,{ref:this.containerRef,getLayers:this.getLayers,start:this.state.start,end:this.state.end,getStep:this.state.getStep,values:this.state.values,disabled:this.state.disabled,viewport:this.state.viewport,mapboxApiAccessToken:this.props.mapboxApiKey,mapStyle:this.props.formData.mapbox_style,setControlValue:this.props.setControlValue,width:this.props.width,height:this.props.height},(0,_emotion_react__WEBPACK_IMPORTED_MODULE_9__.tZ)(_components_Legend__WEBPACK_IMPORTED_MODULE_3__.Z,{forceCategorical:!0,categories:this.state.categories,format:this.props.formData.legend_format,position:this.props.formData.legend_position,showSingleCategory:this.showSingleCategory,toggleCategory:this.toggleCategory})))}__reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}var reactHotLoader,leaveModule;CategoricalDeckGLContainer.propTypes=propTypes,reactHotLoader="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0,reactHotLoader&&(reactHotLoader.register(getScale,"getScale","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/CategoricalDeckGLContainer.jsx"),reactHotLoader.register(getCategories,"getCategories","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/CategoricalDeckGLContainer.jsx"),reactHotLoader.register(propTypes,"propTypes","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/CategoricalDeckGLContainer.jsx"),reactHotLoader.register(CategoricalDeckGLContainer,"CategoricalDeckGLContainer","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/CategoricalDeckGLContainer.jsx")),leaveModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0,leaveModule&&leaveModule(module)},36665:(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>Legend});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(667294),prop_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(45697),prop_types__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__),_superset_ui_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(767190),_Legend_css__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(323270),_emotion_react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(211965),enterModule;module=__webpack_require__.hmd(module),enterModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0,enterModule&&enterModule(module);var __signature__="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e};const categoryDelimiter=" - ",propTypes={categories:prop_types__WEBPACK_IMPORTED_MODULE_1___default().object,forceCategorical:prop_types__WEBPACK_IMPORTED_MODULE_1___default().bool,format:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,position:prop_types__WEBPACK_IMPORTED_MODULE_1___default().oneOf([null,"tl","tr","bl","br"]),showSingleCategory:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func,toggleCategory:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func},defaultProps={categories:{},forceCategorical:!1,format:null,position:"tr",showSingleCategory:()=>{},toggleCategory:()=>{}};class Legend extends react__WEBPACK_IMPORTED_MODULE_0__.PureComponent{format(e){if(!this.props.format||this.props.forceCategorical)return e;const t=parseFloat(e);return(0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_3__.uf)(this.props.format,t)}formatCategoryLabel(e){if(!this.props.format)return e;if(e.includes(categoryDelimiter)){const t=e.split(categoryDelimiter);return this.format(t[0])+categoryDelimiter+this.format(t[1])}return this.format(e)}render(){if(0===Object.keys(this.props.categories).length||null===this.props.position)return null;const e=Object.entries(this.props.categories).map((([e,t])=>{const o={color:`rgba(${t.color.join(", ")})`},r=t.enabled?"◼":"◻";return(0,_emotion_react__WEBPACK_IMPORTED_MODULE_4__.tZ)("li",{key:e},(0,_emotion_react__WEBPACK_IMPORTED_MODULE_4__.tZ)("a",{href:"#",onClick:()=>this.props.toggleCategory(e),onDoubleClick:()=>this.props.showSingleCategory(e)},(0,_emotion_react__WEBPACK_IMPORTED_MODULE_4__.tZ)("span",{style:o},r)," ",this.formatCategoryLabel(e)))})),t={position:"absolute",["t"===this.props.position.charAt(0)?"top":"bottom"]:"0px",["r"===this.props.position.charAt(1)?"right":"left"]:"10px"};return(0,_emotion_react__WEBPACK_IMPORTED_MODULE_4__.tZ)("div",{className:"legend",style:t},(0,_emotion_react__WEBPACK_IMPORTED_MODULE_4__.tZ)("ul",{className:"categories"},e))}__reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}var reactHotLoader,leaveModule;Legend.propTypes=propTypes,Legend.defaultProps=defaultProps,reactHotLoader="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0,reactHotLoader&&(reactHotLoader.register(categoryDelimiter,"categoryDelimiter","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/components/Legend.jsx"),reactHotLoader.register(propTypes,"propTypes","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/components/Legend.jsx"),reactHotLoader.register(defaultProps,"defaultProps","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/components/Legend.jsx"),reactHotLoader.register(Legend,"Legend","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/components/Legend.jsx")),leaveModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0,leaveModule&&leaveModule(module)},694828:(e,t,o)=>{o.r(t),o.d(t,{getLayer:()=>g,default:()=>h});var r,i=o(399396),_=(o(667294),o(455867)),a=o(452154),n=o(621207),s=o(241667),l=o(101740),c=o(211965);function p(e){return(0,c.tZ)("div",{className:"deckgl-tooltip"},(0,c.tZ)(l.Z,{label:`${(0,_.t)("Longitude and Latitude")}: `,value:`${e.coordinate[0]}, ${e.coordinate[1]}`}),(0,c.tZ)(l.Z,{label:`${(0,_.t)("Height")}: `,value:`${e.object.elevationValue}`}))}function g(e,t,o,r){const _=e,s=_.color_picker;let l=t.data.features.map((e=>({...e,color:[s.r,s.g,s.b,255*s.a]})));_.js_data_mutator&&(l=(0,n.Z)(_.js_data_mutator)(l));const c=(0,a.Z)(_.js_agg_function,(e=>e.weight));return new i.Z({id:`grid-layer-${_.slice_id}`,data:l,pickable:!0,cellSize:_.grid_size,minColor:[0,0,0,0],extruded:_.extruded,maxColor:[s.r,s.g,s.b,255*s.a],outline:!1,getElevationValue:c,getColorValue:c,...(0,a.N)(_,r,p)})}function d(e){return e.map((e=>e.position))}e=o.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const u=(0,s.G)(g,d),h=u;var L,E;(L="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(L.register(p,"setTooltipContent","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/layers/Grid/Grid.jsx"),L.register(g,"getLayer","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/layers/Grid/Grid.jsx"),L.register(d,"getPoints","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/layers/Grid/Grid.jsx"),L.register(u,"default","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/layers/Grid/Grid.jsx")),(E="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&E(e)},323270:()=>{},241667:(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{G:()=>createDeckGLComponent,B:()=>createCategoricalDeckGLComponent});var lodash_isEqual__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(618446),lodash_isEqual__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash_isEqual__WEBPACK_IMPORTED_MODULE_0__),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(667294),_DeckGLContainer__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(287026),_CategoricalDeckGLContainer__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(639023),_utils_fitViewport__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(74020),_emotion_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(211965),enterModule;module=__webpack_require__.hmd(module),enterModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0,enterModule&&enterModule(module);var __signature__="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},reactHotLoader,leaveModule;function createDeckGLComponent(getLayer,getPoints){class Component extends react__WEBPACK_IMPORTED_MODULE_1__.PureComponent{constructor(e){super(e),this.containerRef=react__WEBPACK_IMPORTED_MODULE_1__.createRef(),this.setTooltip=e=>{const{current:t}=this.containerRef;t&&(null==t||t.setTooltip(e))};const{width:t,height:o,formData:r}=e;let{viewport:i}=e;r.autozoom&&(i=(0,_utils_fitViewport__WEBPACK_IMPORTED_MODULE_4__.Z)(i,{width:t,height:o,points:getPoints(e.payload.data.features)})),this.state={viewport:i,layer:this.computeLayer(e)},this.onViewportChange=this.onViewportChange.bind(this)}UNSAFE_componentWillReceiveProps(e){const t={...e.formData,viewport:null},o={...this.props.formData,viewport:null};lodash_isEqual__WEBPACK_IMPORTED_MODULE_0___default()(t,o)&&e.payload===this.props.payload||this.setState({layer:this.computeLayer(e)})}onViewportChange(e){this.setState({viewport:e})}computeLayer(e){const{formData:t,payload:o,onAddFilter:r}=e;return getLayer(t,o,r,this.setTooltip)}render(){const{formData:e,payload:t,setControlValue:o,height:r,width:i}=this.props,{layer:_,viewport:a}=this.state;return(0,_emotion_react__WEBPACK_IMPORTED_MODULE_5__.tZ)(_DeckGLContainer__WEBPACK_IMPORTED_MODULE_2__.F,{ref:this.containerRef,mapboxApiAccessToken:t.data.mapboxApiKey,viewport:a,layers:[_],mapStyle:e.mapbox_style,setControlValue:o,width:i,height:r,onViewportChange:this.onViewportChange})}__reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}return Component}function createCategoricalDeckGLComponent(e,t){return function(o){const{datasource:r,formData:i,height:_,payload:a,setControlValue:n,viewport:s,width:l}=o;return(0,_emotion_react__WEBPACK_IMPORTED_MODULE_5__.tZ)(_CategoricalDeckGLContainer__WEBPACK_IMPORTED_MODULE_3__.Z,{datasource:r,formData:i,mapboxApiKey:a.data.mapboxApiKey,setControlValue:n,viewport:s,getLayer:e,payload:a,getPoints:t,width:l,height:_})}}reactHotLoader="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0,reactHotLoader&&(reactHotLoader.register(createDeckGLComponent,"createDeckGLComponent","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/factory.tsx"),reactHotLoader.register(createCategoricalDeckGLComponent,"createCategoricalDeckGLComponent","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/factory.tsx")),leaveModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0,leaveModule&&leaveModule(module)}}]);