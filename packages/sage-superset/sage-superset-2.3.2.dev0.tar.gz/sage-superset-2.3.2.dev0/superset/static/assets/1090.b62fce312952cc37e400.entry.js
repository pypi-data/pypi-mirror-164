"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[1090],{662276:(e,t,o)=>{o.d(t,{S:()=>s,M:()=>i});var r,n=o(711448),a=o(751995);e=o.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const l=n.Z.RangePicker,s=(0,a.iK)(l)`
  border-radius: ${({theme:e})=>e.gridUnit}px;
`,i=n.Z;var d,c;(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(d.register(l,"AntdRangePicker","/Users/chenming/superset/superset-frontend/src/components/DatePicker/index.tsx"),d.register(s,"RangePicker","/Users/chenming/superset/superset-frontend/src/components/DatePicker/index.tsx"),d.register(i,"DatePicker","/Users/chenming/superset/superset-frontend/src/components/DatePicker/index.tsx")),(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&c(e)},976697:(e,t,o)=>{o.d(t,{Z:()=>l});var r,n=o(219181);e=o.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const a=n.Z,l=a;var s,i;(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&s.register(a,"default","/Users/chenming/superset/superset-frontend/src/components/Popover/index.tsx"),(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&i(e)},482342:(e,t,o)=>{o.d(t,{Z:()=>g}),o(667294);var r,n=o(751995),a=o(211965),l=o(455867),s=o(409882),i=o(358593),d=o(558347),c=o(87693);e=o.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);var u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},p={name:"8wgs83",styles:"margin-bottom:0;position:relative"};const m=({name:e,label:t,description:o,validationErrors:r=[],renderTrigger:u=!1,rightNode:m,leftNode:f,onClick:g,hovered:h=!1,tooltipOnClick:v=(()=>{}),warning:b,danger:Z})=>{const{gridUnit:L,colors:G}=(0,n.Fg)();if(!t)return null;const y=(null==r?void 0:r.length)>0?"text-danger":"";return(0,a.tZ)("div",{className:"ControlHeader","data-test":`${e}-header`},(0,a.tZ)("div",{className:"pull-left"},(0,a.tZ)(d.lX,{css:p},f&&(0,a.tZ)("span",null,f),(0,a.tZ)("span",{role:"button",tabIndex:0,onClick:g,className:y,style:{cursor:g?"pointer":""}},t)," ",b&&(0,a.tZ)("span",null,(0,a.tZ)(i.u,{id:"error-tooltip",placement:"top",title:b},(0,a.tZ)(c.Z.AlertSolid,{iconColor:G.alert.base,iconSize:"s"}))," "),Z&&(0,a.tZ)("span",null,(0,a.tZ)(i.u,{id:"error-tooltip",placement:"top",title:Z},(0,a.tZ)(c.Z.ErrorSolid,{iconColor:G.error.base,iconSize:"s"}))," "),(null==r?void 0:r.length)>0&&(0,a.tZ)("span",null,(0,a.tZ)(i.u,{id:"error-tooltip",placement:"top",title:null==r?void 0:r.join(" ")},(0,a.tZ)(c.Z.ErrorSolid,{iconColor:G.error.base,iconSize:"s"}))," "),h?(0,a.tZ)("span",{css:()=>a.iv`
          position: absolute;
          top: 50%;
          right: 0;
          padding-left: ${L}px;
          transform: translate(100%, -50%);
          white-space: nowrap;
        `},o&&(0,a.tZ)("span",null,(0,a.tZ)(s.V,{label:(0,l.t)("description"),tooltip:o,placement:"top",onClick:v})," "),u&&(0,a.tZ)("span",null,(0,a.tZ)(s.V,{label:(0,l.t)("bolt"),tooltip:(0,l.t)("Changing this control takes effect instantly"),placement:"top",icon:"bolt"})," ")):null)),m&&(0,a.tZ)("div",{className:"pull-right"},m),(0,a.tZ)("div",{className:"clearfix"}))};u(m,"useTheme{{ gridUnit, colors }}",(()=>[n.Fg]));const f=m,g=f;var h,v;(h="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(h.register(m,"ControlHeader","/Users/chenming/superset/superset-frontend/src/explore/components/ControlHeader.tsx"),h.register(f,"default","/Users/chenming/superset/superset-frontend/src/explore/components/ControlHeader.tsx")),(v="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&v(e)},465509:(e,t,o)=>{o.d(t,{ZP:()=>k});var r,n=o(205872),a=o.n(n),l=o(667294),s=o(115926),i=o.n(s),d=o(431069),c=o(751995),u=o(455867),p=o(216636),m=o(998286),f=o(835932),g=o(482342),h=o(737921),v=o(976697),b=o(104715),Z=o(87693),L=o(281315),G=o(358593),y=o(269856),C=o(112515),D=o(427600),x=o(653350),H=o(454076),T=o(134261),E=o(826564),F=o(51217),M=o(849225),S=("undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,o(211965));e=o.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);var U="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e};const N=e=>p.MI.has(e)?"Common":p.gn.has(e)?"Calendar":"No filter"===e?"No filter":(0,p.c_)(e).matchedFlag?"Custom":"Advanced",A=async e=>{const t=`/api/v1/time_range/?q=${i().encode_uri(e)}`;try{var o,r,n,a;const e=await d.Z.get({endpoint:t}),l=(0,p.mv)((null==e||null==(o=e.json)||null==(r=o.result)?void 0:r.since)||"",(null==e||null==(n=e.json)||null==(a=n.result)?void 0:a.until)||"");return{value:(0,p.ns)(l)}}catch(e){const t=await(0,m.O)(e);return{error:t.message||t.error}}},w=(0,c.iK)(v.Z)``,R=(0,c.iK)(L.ZP)`
  width: 272px;
`,I=c.iK.div`
  .ant-row {
    margin-top: 8px;
  }

  .ant-input-number {
    width: 100%;
  }

  .ant-picker {
    padding: 4px 17px 4px;
    border-radius: 4px;
    width: 100%;
  }

  .ant-divider-horizontal {
    margin: 16px 0;
  }

  .control-label {
    font-size: 11px;
    font-weight: 500;
    color: #b2b2b2;
    line-height: 16px;
    text-transform: uppercase;
    margin: 8px 0;
  }

  .vertical-radio {
    display: block;
    height: 40px;
    line-height: 40px;
  }

  .section-title {
    font-style: normal;
    font-weight: 500;
    font-size: 15px;
    line-height: 24px;
    margin-bottom: 8px;
  }

  .control-anchor-to {
    margin-top: 16px;
  }

  .control-anchor-to-datetime {
    width: 217px;
  }

  .footer {
    text-align: right;
  }
`,_=c.iK.span`
  span {
    margin-right: ${({theme:e})=>2*e.gridUnit}px;
    vertical-align: middle;
  }
  .text {
    vertical-align: middle;
  }
  .error {
    color: ${({theme:e})=>e.colors.error.base};
  }
`,P="date-filter-control",V=(0,x.Q)(P);function k(e){const{value:t=y.X5,onChange:o,type:r,onOpenPopover:n=H.EI,onClosePopover:s=H.EI}=e,[i,d]=(0,l.useState)(t),[m,v]=(0,l.useState)(!1),L=(0,l.useMemo)((()=>N(t)),[t]),[x,U]=(0,l.useState)(L),[P,k]=(0,l.useState)(t),[$,O]=(0,l.useState)(t),[Y,K]=(0,l.useState)(!1),[X,j]=(0,l.useState)(t),[z,W]=(0,l.useState)(t);function q(){O(t),U(L),v(!1)}(0,l.useEffect)((()=>{A(t).then((({value:e,error:o})=>{o?(j(o||""),K(!1),W(t||"")):("Common"===L||"Calendar"===L||"No filter"===L?(d(t),W("error"===r?(0,u.t)("Default value is required"):e||"")):(d(e||""),W(t||"")),K(!0)),k(t)}))}),[t]),(0,C.bX)((()=>{P!==$&&A($).then((({value:e,error:t})=>{t?(j(t||""),K(!1)):(j(e||""),K(!0)),k($)}))}),D.M$,[$]);const J=(0,c.Fg)(),Q=(0,S.tZ)(I,null,(0,S.tZ)("div",{className:"control-label"},(0,u.t)("RANGE TYPE")),(0,S.tZ)(R,{ariaLabel:(0,u.t)("RANGE TYPE"),options:p.un,value:x,onChange:function(e){"No filter"===e&&O("No filter"),U(e)}}),"No filter"!==x&&(0,S.tZ)(b.iz,null),"Common"===x&&(0,S.tZ)(T.G,{value:$,onChange:O}),"Calendar"===x&&(0,S.tZ)(E.M,{value:$,onChange:O}),"Advanced"===x&&(0,S.tZ)(M.v,{value:$,onChange:O}),"Custom"===x&&(0,S.tZ)(F.e,{value:$,onChange:O}),"No filter"===x&&(0,S.tZ)("div",{"data-test":"no-filter"}),(0,S.tZ)(b.iz,null),(0,S.tZ)("div",null,(0,S.tZ)("div",{className:"section-title"},(0,u.t)("Actual time range")),Y&&(0,S.tZ)("div",null,X),!Y&&(0,S.tZ)(_,{className:"warning"},(0,S.tZ)(Z.Z.ErrorSolidSmall,{iconColor:J.colors.error.base}),(0,S.tZ)("span",{className:"text error"},X))),(0,S.tZ)(b.iz,null),(0,S.tZ)("div",{className:"footer"},(0,S.tZ)(f.Z,{buttonStyle:"secondary",cta:!0,key:"cancel",onClick:q,"data-test":"cancel-button"},(0,u.t)("CANCEL")),(0,S.tZ)(f.Z,a()({buttonStyle:"primary",cta:!0,disabled:!Y,key:"apply",onClick:function(){o($),v(!1)}},V("apply-button")),(0,u.t)("APPLY")))),B=(0,S.tZ)(_,null,(0,S.tZ)(Z.Z.EditAlt,{iconColor:J.colors.grayscale.base}),(0,S.tZ)("span",{className:"text"},(0,u.t)("Edit time range")));return(0,S.tZ)(l.Fragment,null,(0,S.tZ)(g.Z,e),(0,S.tZ)(w,{placement:"right",trigger:"click",content:Q,title:B,defaultVisible:m,visible:m,onVisibleChange:()=>{m?(q(),s()):(O(t),U(L),v(!0),n())},overlayStyle:{width:"600px"}},(0,S.tZ)(G.u,{placement:"top",title:z},(0,S.tZ)(h.Z,{className:"pointer","data-test":"time-range-trigger"},i))))}var $,O;U(k,"useState{[actualTimeRange, setActualTimeRange](value)}\nuseState{[show, setShow](false)}\nuseMemo{guessedFrame}\nuseState{[frame, setFrame](guessedFrame)}\nuseState{[lastFetchedTimeRange, setLastFetchedTimeRange](value)}\nuseState{[timeRangeValue, setTimeRangeValue](value)}\nuseState{[validTimeRange, setValidTimeRange](false)}\nuseState{[evalResponse, setEvalResponse](value)}\nuseState{[tooltipTitle, setTooltipTitle](value)}\nuseEffect{}\nuseDebouncedEffect{}\nuseTheme{theme}",(()=>[C.bX,c.Fg])),($="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&($.register(N,"guessFrame","/Users/chenming/superset/superset-frontend/src/explore/components/controls/DateFilterControl/DateFilterLabel.tsx"),$.register(A,"fetchTimeRange","/Users/chenming/superset/superset-frontend/src/explore/components/controls/DateFilterControl/DateFilterLabel.tsx"),$.register(w,"StyledPopover","/Users/chenming/superset/superset-frontend/src/explore/components/controls/DateFilterControl/DateFilterLabel.tsx"),$.register(R,"StyledRangeType","/Users/chenming/superset/superset-frontend/src/explore/components/controls/DateFilterControl/DateFilterLabel.tsx"),$.register(I,"ContentStyleWrapper","/Users/chenming/superset/superset-frontend/src/explore/components/controls/DateFilterControl/DateFilterLabel.tsx"),$.register(_,"IconWrapper","/Users/chenming/superset/superset-frontend/src/explore/components/controls/DateFilterControl/DateFilterLabel.tsx"),$.register(P,"DATE_FILTER_CONTROL_TEST_ID","/Users/chenming/superset/superset-frontend/src/explore/components/controls/DateFilterControl/DateFilterLabel.tsx"),$.register(V,"getDateFilterControlTestId","/Users/chenming/superset/superset-frontend/src/explore/components/controls/DateFilterControl/DateFilterLabel.tsx"),$.register(k,"DateFilterLabel","/Users/chenming/superset/superset-frontend/src/explore/components/controls/DateFilterControl/DateFilterLabel.tsx")),(O="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&O(e)},849225:(e,t,o)=>{o.d(t,{v:()=>m});var r,n,a,l=o(667294),s=o(455867),i=o(216636),d=o(9875),c=o(409882),u=o(393879),p=o(211965);function m(e){const t=n(e.value||""),[o,r]=t.split(i.UD);function n(e){return e.includes(i.UD)?e:e.startsWith("Last")?[e,""].join(i.UD):e.startsWith("Next")?["",e].join(i.UD):i.UD}function a(t,n){"since"===t?e.onChange(`${n}${i.UD}${r}`):e.onChange(`${o}${i.UD}${n}`)}return t!==e.value&&e.onChange(n(e.value||"")),(0,p.tZ)(l.Fragment,null,(0,p.tZ)("div",{className:"section-title"},(0,s.t)("Configure Advanced Time Range "),(0,p.tZ)(u.Z,{placement:"rightBottom"},(0,p.tZ)("i",{className:"fa fa-info-circle text-muted"}))),(0,p.tZ)("div",{className:"control-label"},(0,s.t)("START (INCLUSIVE)")," ",(0,p.tZ)(c.V,{tooltip:(0,s.t)("Start date included in time range"),placement:"right"})),(0,p.tZ)(d.II,{key:"since",value:o,onChange:e=>a("since",e.target.value)}),(0,p.tZ)("div",{className:"control-label"},(0,s.t)("END (EXCLUSIVE)")," ",(0,p.tZ)(c.V,{tooltip:(0,s.t)("End date excluded from time range"),placement:"right"})),(0,p.tZ)(d.II,{key:"until",value:r,onChange:e=>a("until",e.target.value)}))}e=o.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&n.register(m,"AdvancedFrame","/Users/chenming/superset/superset-frontend/src/explore/components/controls/DateFilterControl/components/AdvancedFrame.tsx"),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&a(e)},826564:(e,t,o)=>{o.d(t,{M:()=>p});var r,n,a,l=o(667294),s=o(455867),i=o(287183),d=o(216636),c=o(831209),u=o(211965);function p({onChange:e,value:t}){return(0,l.useEffect)((()=>{d.LY.has(t)||e(c.gT)}),[e,t]),d.LY.has(t)?(0,u.tZ)(l.Fragment,null,(0,u.tZ)("div",{className:"section-title"},(0,s.t)("Configure Time Range: Previous...")),(0,u.tZ)(i.Y.Group,{value:t,onChange:t=>e(t.target.value)},d._S.map((({value:e,label:t})=>(0,u.tZ)(i.Y,{key:e,value:e,className:"vertical-radio"},t))))):null}e=o.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e})(p,"useEffect{}"),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&n.register(p,"CalendarFrame","/Users/chenming/superset/superset-frontend/src/explore/components/controls/DateFilterControl/components/CalendarFrame.tsx"),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&a(e)},134261:(e,t,o)=>{o.d(t,{G:()=>u});var r,n,a,l=o(667294),s=o(455867),i=o(287183),d=o(216636),c=o(211965);function u(e){let t="Last week";return d.bk.has(e.value)?t=e.value:e.onChange(t),(0,c.tZ)(l.Fragment,null,(0,c.tZ)("div",{className:"section-title"},(0,s.t)("Configure Time Range: Last...")),(0,c.tZ)(i.Y.Group,{value:t,onChange:t=>e.onChange(t.target.value)},d.Sm.map((({value:e,label:t})=>(0,c.tZ)(i.Y,{key:e,value:e,className:"vertical-radio"},t)))))}e=o.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&n.register(u,"CommonFrame","/Users/chenming/superset/superset-frontend/src/explore/components/controls/DateFilterControl/components/CommonFrame.tsx"),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&a(e)},51217:(e,t,o)=>{o.d(t,{e:()=>v});var r,n,a,l=o(593754),s=o.n(l),i=(o(667294),o(455867)),d=o(104715),c=o(9875),u=o(662276),p=o(287183),m=o(281315),f=o(409882),g=o(216636),h=o(211965);function v(e){const{customRange:t,matchedFlag:o}=(0,g.c_)(e.value);o||e.onChange((0,g.jK)(t));const{sinceDatetime:r,sinceMode:n,sinceGrain:a,sinceGrainValue:l,untilDatetime:v,untilMode:b,untilGrain:Z,untilGrainValue:L,anchorValue:G,anchorMode:y}={...t};function C(o,r){e.onChange((0,g.jK)({...t,[o]:r}))}function D(o,r){s()(r)&&r>0&&e.onChange((0,g.jK)({...t,[o]:r}))}return(0,h.tZ)("div",{"data-test":"custom-frame"},(0,h.tZ)("div",{className:"section-title"},(0,i.t)("Configure custom time range")),(0,h.tZ)(d.X2,{gutter:24},(0,h.tZ)(d.JX,{span:12},(0,h.tZ)("div",{className:"control-label"},(0,i.t)("START (INCLUSIVE)")," ",(0,h.tZ)(f.V,{tooltip:(0,i.t)("Start date included in time range"),placement:"right"})),(0,h.tZ)(m.ZP,{ariaLabel:(0,i.t)("START (INCLUSIVE)"),options:g._d,value:n,onChange:e=>C("sinceMode",e)}),"specific"===n&&(0,h.tZ)(d.X2,null,(0,h.tZ)(u.M,{showTime:!0,defaultValue:(0,g.DL)(r),onChange:e=>C("sinceDatetime",e.format(g.KZ)),allowClear:!1})),"relative"===n&&(0,h.tZ)(d.X2,{gutter:8},(0,h.tZ)(d.JX,{span:11},(0,h.tZ)(c.Rn,{placeholder:(0,i.t)("Relative quantity"),value:Math.abs(l),min:1,defaultValue:1,onChange:e=>D("sinceGrainValue",e||1),onStep:e=>D("sinceGrainValue",e||1)})),(0,h.tZ)(d.JX,{span:13},(0,h.tZ)(m.ZP,{ariaLabel:(0,i.t)("Relative period"),options:g.kj,value:a,onChange:e=>C("sinceGrain",e)})))),(0,h.tZ)(d.JX,{span:12},(0,h.tZ)("div",{className:"control-label"},(0,i.t)("END (EXCLUSIVE)")," ",(0,h.tZ)(f.V,{tooltip:(0,i.t)("End date excluded from time range"),placement:"right"})),(0,h.tZ)(m.ZP,{ariaLabel:(0,i.t)("END (EXCLUSIVE)"),options:g.hj,value:b,onChange:e=>C("untilMode",e)}),"specific"===b&&(0,h.tZ)(d.X2,null,(0,h.tZ)(u.M,{showTime:!0,defaultValue:(0,g.DL)(v),onChange:e=>C("untilDatetime",e.format(g.KZ)),allowClear:!1})),"relative"===b&&(0,h.tZ)(d.X2,{gutter:8},(0,h.tZ)(d.JX,{span:11},(0,h.tZ)(c.Rn,{placeholder:(0,i.t)("Relative quantity"),value:L,min:1,defaultValue:1,onChange:e=>D("untilGrainValue",e||1),onStep:e=>D("untilGrainValue",e||1)})),(0,h.tZ)(d.JX,{span:13},(0,h.tZ)(m.ZP,{ariaLabel:(0,i.t)("Relative period"),options:g.Ae,value:Z,onChange:e=>C("untilGrain",e)}))))),"relative"===n&&"relative"===b&&(0,h.tZ)("div",{className:"control-anchor-to"},(0,h.tZ)("div",{className:"control-label"},(0,i.t)("Anchor to")),(0,h.tZ)(d.X2,{align:"middle"},(0,h.tZ)(d.JX,null,(0,h.tZ)(p.Y.Group,{onChange:function(o){const r=o.target.value;"now"===r?e.onChange((0,g.jK)({...t,anchorValue:"now",anchorMode:r})):e.onChange((0,g.jK)({...t,anchorValue:g.V7,anchorMode:r}))},defaultValue:"now",value:y},(0,h.tZ)(p.Y,{key:"now",value:"now"},(0,i.t)("NOW")),(0,h.tZ)(p.Y,{key:"specific",value:"specific"},(0,i.t)("Date/Time")))),"now"!==y&&(0,h.tZ)(d.JX,null,(0,h.tZ)(u.M,{showTime:!0,defaultValue:(0,g.DL)(G),onChange:e=>C("anchorValue",e.format(g.KZ)),allowClear:!1,className:"control-anchor-to-datetime"})))))}e=o.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&n.register(v,"CustomFrame","/Users/chenming/superset/superset-frontend/src/explore/components/controls/DateFilterControl/components/CustomFrame.tsx"),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&a(e)},393879:(e,t,o)=>{o.d(t,{Z:()=>f});var r,n=o(205872),a=o.n(n),l=o(667294),s=o(455867),i=o(751995),d=o(358593),c=o(211965);e=o.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);var u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e};const p=(0,c.tZ)(l.Fragment,null,(0,c.tZ)("div",null,(0,c.tZ)("h3",null,"DATETIME"),(0,c.tZ)("p",null,(0,s.t)("Return to specific datetime.")),(0,c.tZ)("h4",null,(0,s.t)("Syntax")),(0,c.tZ)("pre",null,(0,c.tZ)("code",null,"datetime([string])")),(0,c.tZ)("h4",null,(0,s.t)("Example")),(0,c.tZ)("pre",null,(0,c.tZ)("code",null,'datetime("2020-03-01 12:00:00")\ndatetime("now")\ndatetime("last year")'))),(0,c.tZ)("div",null,(0,c.tZ)("h3",null,"DATEADD"),(0,c.tZ)("p",null,(0,s.t)("Moves the given set of dates by a specified interval.")),(0,c.tZ)("h4",null,(0,s.t)("Syntax")),(0,c.tZ)("pre",null,(0,c.tZ)("code",null,"dateadd([datetime], [integer], [dateunit])\ndateunit = (year | quarter | month | week | day | hour | minute | second)")),(0,c.tZ)("h4",null,(0,s.t)("Example")),(0,c.tZ)("pre",null,(0,c.tZ)("code",null,'dateadd(datetime("today"), -13, day)\ndateadd(datetime("2020-03-01"), 2, day)'))),(0,c.tZ)("div",null,(0,c.tZ)("h3",null,"DATETRUNC"),(0,c.tZ)("p",null,(0,s.t)("Truncates the specified date to the accuracy specified by the date unit.")),(0,c.tZ)("h4",null,(0,s.t)("Syntax")),(0,c.tZ)("pre",null,(0,c.tZ)("code",null,"datetrunc([datetime], [dateunit])\ndateunit = (year | quarter | month | week)")),(0,c.tZ)("h4",null,(0,s.t)("Example")),(0,c.tZ)("pre",null,(0,c.tZ)("code",null,'datetrunc(datetime("2020-03-01"), week)\ndatetrunc(datetime("2020-03-01"), month)'))),(0,c.tZ)("div",null,(0,c.tZ)("h3",null,"LASTDAY"),(0,c.tZ)("p",null,(0,s.t)("Get the last date by the date unit.")),(0,c.tZ)("h4",null,(0,s.t)("Syntax")),(0,c.tZ)("pre",null,(0,c.tZ)("code",null,"lastday([datetime], [dateunit])\ndateunit = (year | month | week)")),(0,c.tZ)("h4",null,(0,s.t)("Example")),(0,c.tZ)("pre",null,(0,c.tZ)("code",null,'lastday(datetime("today"), month)'))),(0,c.tZ)("div",null,(0,c.tZ)("h3",null,"HOLIDAY"),(0,c.tZ)("p",null,(0,s.t)("Get the specify date for the holiday")),(0,c.tZ)("h4",null,(0,s.t)("Syntax")),(0,c.tZ)("pre",null,(0,c.tZ)("code",null,"holiday([string])\nholiday([holiday string], [datetime])\nholiday([holiday string], [datetime], [country name])")),(0,c.tZ)("h4",null,(0,s.t)("Example")),(0,c.tZ)("pre",null,(0,c.tZ)("code",null,'holiday("new year")\nholiday("christmas", datetime("2019"))\nholiday("christmas", dateadd(datetime("2019"), 1, year))\nholiday("christmas", datetime("2 years ago"))\nholiday("Easter Monday", datetime("2019"), "UK")')))),m=e=>{const t=(0,i.Fg)();return(0,c.tZ)(c.ms,null,(({css:o})=>(0,c.tZ)(d.u,a()({overlayClassName:o`
            .ant-tooltip-content {
              min-width: ${125*t.gridUnit}px;
              max-height: 410px;
              overflow-y: scroll;

              .ant-tooltip-inner {
                max-width: ${125*t.gridUnit}px;
                h3 {
                  font-size: ${t.typography.sizes.m}px;
                  font-weight: ${t.typography.weights.bold};
                }
                h4 {
                  font-size: ${t.typography.sizes.m}px;
                  font-weight: ${t.typography.weights.bold};
                }
                pre {
                  border: none;
                  text-align: left;
                  word-break: break-word;
                  font-size: ${t.typography.sizes.s}px;
                }
              }
            }
          `},e))))};function f(e){return(0,c.tZ)(m,a()({title:p},e))}var g,h;u(m,"useTheme{theme}",(()=>[i.Fg])),(g="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(g.register(p,"TIME_PICKER_HELPER","/Users/chenming/superset/superset-frontend/src/explore/components/controls/DateFilterControl/components/DateFunctionTooltip.tsx"),g.register(m,"StyledTooltip","/Users/chenming/superset/superset-frontend/src/explore/components/controls/DateFilterControl/components/DateFunctionTooltip.tsx"),g.register(f,"DateFunctionTooltip","/Users/chenming/superset/superset-frontend/src/explore/components/controls/DateFilterControl/components/DateFunctionTooltip.tsx")),(h="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&h(e)},101090:(e,t,o)=>{o.d(t,{Z:()=>r.ZP});var r=o(465509);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature},831209:(e,t,o)=>{var r;o.d(t,{gT:()=>n,MZ:()=>a,po:()=>l}),e=o.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const n="previous calendar week",a="previous calendar month",l="previous calendar year";var s,i;(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(s.register(n,"PreviousCalendarWeek","/Users/chenming/superset/superset-frontend/src/explore/components/controls/DateFilterControl/types.ts"),s.register(a,"PreviousCalendarMonth","/Users/chenming/superset/superset-frontend/src/explore/components/controls/DateFilterControl/types.ts"),s.register(l,"PreviousCalendarYear","/Users/chenming/superset/superset-frontend/src/explore/components/controls/DateFilterControl/types.ts")),(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&i(e)},848784:(e,t,o)=>{o.d(t,{un:()=>i,Sm:()=>d,MI:()=>c,_S:()=>u,gn:()=>p,kj:()=>f,Ae:()=>g,_d:()=>h,hj:()=>v,bk:()=>b,LY:()=>Z,KZ:()=>L,Zv:()=>G,V7:()=>y});var r,n=o(730381),a=o.n(n),l=o(455867),s=o(831209);e=o.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const i=[{value:"Common",label:(0,l.t)("Last")},{value:"Calendar",label:(0,l.t)("Previous")},{value:"Custom",label:(0,l.t)("Custom")},{value:"Advanced",label:(0,l.t)("Advanced")},{value:"No filter",label:(0,l.t)("No filter")}],d=[{value:"Last day",label:(0,l.t)("last day")},{value:"Last week",label:(0,l.t)("last week")},{value:"Last month",label:(0,l.t)("last month")},{value:"Last quarter",label:(0,l.t)("last quarter")},{value:"Last year",label:(0,l.t)("last year")}],c=new Set(d.map((({value:e})=>e))),u=[{value:s.gT,label:(0,l.t)("previous calendar week")},{value:s.MZ,label:(0,l.t)("previous calendar month")},{value:s.po,label:(0,l.t)("previous calendar year")}],p=new Set(u.map((({value:e})=>e))),m=[{value:"second",label:e=>(0,l.t)("Seconds %s",e)},{value:"minute",label:e=>(0,l.t)("Minutes %s",e)},{value:"hour",label:e=>(0,l.t)("Hours %s",e)},{value:"day",label:e=>(0,l.t)("Days %s",e)},{value:"week",label:e=>(0,l.t)("Weeks %s",e)},{value:"month",label:e=>(0,l.t)("Months %s",e)},{value:"quarter",label:e=>(0,l.t)("Quarters %s",e)},{value:"year",label:e=>(0,l.t)("Years %s",e)}],f=m.map((e=>({value:e.value,label:e.label((0,l.t)("Before"))}))),g=m.map((e=>({value:e.value,label:e.label((0,l.t)("After"))}))),h=[{value:"specific",label:(0,l.t)("Specific Date/Time")},{value:"relative",label:(0,l.t)("Relative Date/Time")},{value:"now",label:(0,l.t)("Now")},{value:"today",label:(0,l.t)("Midnight")}],v=h.slice(),b=new Set(["Last day","Last week","Last month","Last quarter","Last year"]),Z=new Set([s.gT,s.MZ,s.po]),L="YYYY-MM-DD[T]HH:mm:ss",G=a()().utc().startOf("day").subtract(7,"days").format(L),y=a()().utc().startOf("day").format(L);var C,D;(C="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(C.register(i,"FRAME_OPTIONS","/Users/chenming/superset/superset-frontend/src/explore/components/controls/DateFilterControl/utils/constants.ts"),C.register(d,"COMMON_RANGE_OPTIONS","/Users/chenming/superset/superset-frontend/src/explore/components/controls/DateFilterControl/utils/constants.ts"),C.register(c,"COMMON_RANGE_VALUES_SET","/Users/chenming/superset/superset-frontend/src/explore/components/controls/DateFilterControl/utils/constants.ts"),C.register(u,"CALENDAR_RANGE_OPTIONS","/Users/chenming/superset/superset-frontend/src/explore/components/controls/DateFilterControl/utils/constants.ts"),C.register(p,"CALENDAR_RANGE_VALUES_SET","/Users/chenming/superset/superset-frontend/src/explore/components/controls/DateFilterControl/utils/constants.ts"),C.register(m,"GRAIN_OPTIONS","/Users/chenming/superset/superset-frontend/src/explore/components/controls/DateFilterControl/utils/constants.ts"),C.register(f,"SINCE_GRAIN_OPTIONS","/Users/chenming/superset/superset-frontend/src/explore/components/controls/DateFilterControl/utils/constants.ts"),C.register(g,"UNTIL_GRAIN_OPTIONS","/Users/chenming/superset/superset-frontend/src/explore/components/controls/DateFilterControl/utils/constants.ts"),C.register(h,"SINCE_MODE_OPTIONS","/Users/chenming/superset/superset-frontend/src/explore/components/controls/DateFilterControl/utils/constants.ts"),C.register(v,"UNTIL_MODE_OPTIONS","/Users/chenming/superset/superset-frontend/src/explore/components/controls/DateFilterControl/utils/constants.ts"),C.register(b,"COMMON_RANGE_SET","/Users/chenming/superset/superset-frontend/src/explore/components/controls/DateFilterControl/utils/constants.ts"),C.register(Z,"CALENDAR_RANGE_SET","/Users/chenming/superset/superset-frontend/src/explore/components/controls/DateFilterControl/utils/constants.ts"),C.register(L,"MOMENT_FORMAT","/Users/chenming/superset/superset-frontend/src/explore/components/controls/DateFilterControl/utils/constants.ts"),C.register(G,"SEVEN_DAYS_AGO","/Users/chenming/superset/superset-frontend/src/explore/components/controls/DateFilterControl/utils/constants.ts"),C.register(y,"MIDNIGHT","/Users/chenming/superset/superset-frontend/src/explore/components/controls/DateFilterControl/utils/constants.ts")),(D="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&D(e)},269296:(e,t,o)=>{var r;o.d(t,{UD:()=>n,mv:()=>a,ns:()=>s}),e=o.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const n=" : ",a=(e,t)=>`${e}${n}${t}`,l=(e,t)=>e.replace("T00:00:00","")||(t?"-∞":"∞"),s=e=>{const t=e.split(n);return 1===t.length?e:`${l(t[0],!0)} ≤ col < ${l(t[1])}`};var i,d;(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(i.register(n,"SEPARATOR","/Users/chenming/superset/superset-frontend/src/explore/components/controls/DateFilterControl/utils/dateFilterUtils.ts"),i.register(a,"buildTimeRangeString","/Users/chenming/superset/superset-frontend/src/explore/components/controls/DateFilterControl/utils/dateFilterUtils.ts"),i.register(l,"formatDateEndpoint","/Users/chenming/superset/superset-frontend/src/explore/components/controls/DateFilterControl/utils/dateFilterUtils.ts"),i.register(s,"formatTimeRange","/Users/chenming/superset/superset-frontend/src/explore/components/controls/DateFilterControl/utils/dateFilterUtils.ts")),(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&d(e)},122685:(e,t,o)=>{o.d(t,{DL:()=>v,c_:()=>Z,jK:()=>L});var r,n=o(730381),a=o.n(n),l=o(269296),s=o(848784);e=o.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const i=String.raw`\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.\d+)?(?:(?:[+-]\d\d:\d\d)|Z)?`,d=String.raw`TODAY|NOW`,c=String.raw`[+-]?[1-9][0-9]*`,u=String.raw`YEAR|QUARTER|MONTH|WEEK|DAY|HOUR|MINUTE|SECOND`,p=RegExp(String.raw`^DATEADD\(DATETIME\("(${i}|${d})"\),\s(${c}),\s(${u})\)$`,"i"),m=RegExp(String.raw`^${i}$|^${d}$`,"i"),f=["now","today"],g={sinceDatetime:s.Zv,sinceMode:"relative",sinceGrain:"day",sinceGrainValue:-7,untilDatetime:s.V7,untilMode:"specific",untilGrain:"day",untilGrainValue:7,anchorMode:"now",anchorValue:"now"},h=["specific","today","now"],v=e=>"now"===e?a()().utc().startOf("second"):"today"===e?a()().utc().startOf("day"):a()(e),b=e=>v(e).format(s.KZ),Z=e=>{const t=e.split(l.UD);if(2===t.length){const[e,o]=t;if(m.test(e)&&m.test(o)){const t=f.includes(e)?e:"specific",r=f.includes(o)?o:"specific";return{customRange:{...g,sinceDatetime:e,untilDatetime:o,sinceMode:t,untilMode:r},matchedFlag:!0}}const r=e.match(p);if(r&&m.test(o)&&e.includes(o)){const[e,t,n]=r.slice(1),a=f.includes(o)?o:"specific";return{customRange:{...g,sinceGrain:n,sinceGrainValue:parseInt(t,10),sinceDatetime:e,untilDatetime:e,sinceMode:"relative",untilMode:a},matchedFlag:!0}}const n=o.match(p);if(m.test(e)&&n&&o.includes(e)){const[t,o,r]=[...n.slice(1)],a=f.includes(e)?e:"specific";return{customRange:{...g,untilGrain:r,untilGrainValue:parseInt(o,10),sinceDatetime:t,untilDatetime:t,untilMode:"relative",sinceMode:a},matchedFlag:!0}}if(r&&n){const[e,t,o]=[...r.slice(1)],[a,l,s]=[...n.slice(1)];if(e===a)return{customRange:{...g,sinceGrain:o,sinceGrainValue:parseInt(t,10),sinceDatetime:e,untilGrain:s,untilGrainValue:parseInt(l,10),untilDatetime:a,anchorValue:e,sinceMode:"relative",untilMode:"relative",anchorMode:"now"===e?"now":"specific"},matchedFlag:!0}}}return{customRange:g,matchedFlag:!1}},L=e=>{const{sinceDatetime:t,sinceMode:o,sinceGrain:r,sinceGrainValue:n,untilDatetime:a,untilMode:l,untilGrain:s,untilGrainValue:i,anchorValue:d}={...e};if(h.includes(o)&&h.includes(l))return`${"specific"===o?b(t):o} : ${"specific"===l?b(a):l}`;if(h.includes(o)&&"relative"===l){const e="specific"===o?b(t):o;return`${e} : DATEADD(DATETIME("${e}"), ${i}, ${s})`}if("relative"===o&&h.includes(l)){const e="specific"===l?b(a):l;return`DATEADD(DATETIME("${e}"), ${-Math.abs(n)}, ${r}) : ${e}`}return`DATEADD(DATETIME("${d}"), ${-Math.abs(n)}, ${r}) : DATEADD(DATETIME("${d}"), ${i}, ${s})`};var G,y;(G="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(G.register(i,"iso8601","/Users/chenming/superset/superset-frontend/src/explore/components/controls/DateFilterControl/utils/dateParser.ts"),G.register(d,"datetimeConstant","/Users/chenming/superset/superset-frontend/src/explore/components/controls/DateFilterControl/utils/dateParser.ts"),G.register(c,"grainValue","/Users/chenming/superset/superset-frontend/src/explore/components/controls/DateFilterControl/utils/dateParser.ts"),G.register(u,"grain","/Users/chenming/superset/superset-frontend/src/explore/components/controls/DateFilterControl/utils/dateParser.ts"),G.register(p,"CUSTOM_RANGE_EXPRESSION","/Users/chenming/superset/superset-frontend/src/explore/components/controls/DateFilterControl/utils/dateParser.ts"),G.register(m,"ISO8601_AND_CONSTANT","/Users/chenming/superset/superset-frontend/src/explore/components/controls/DateFilterControl/utils/dateParser.ts"),G.register(f,"DATETIME_CONSTANT","/Users/chenming/superset/superset-frontend/src/explore/components/controls/DateFilterControl/utils/dateParser.ts"),G.register(g,"defaultCustomRange","/Users/chenming/superset/superset-frontend/src/explore/components/controls/DateFilterControl/utils/dateParser.ts"),G.register(h,"SPECIFIC_MODE","/Users/chenming/superset/superset-frontend/src/explore/components/controls/DateFilterControl/utils/dateParser.ts"),G.register(v,"dttmToMoment","/Users/chenming/superset/superset-frontend/src/explore/components/controls/DateFilterControl/utils/dateParser.ts"),G.register(b,"dttmToString","/Users/chenming/superset/superset-frontend/src/explore/components/controls/DateFilterControl/utils/dateParser.ts"),G.register(Z,"customTimeRangeDecode","/Users/chenming/superset/superset-frontend/src/explore/components/controls/DateFilterControl/utils/dateParser.ts"),G.register(L,"customTimeRangeEncode","/Users/chenming/superset/superset-frontend/src/explore/components/controls/DateFilterControl/utils/dateParser.ts")),(y="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&y(e)},216636:(e,t,o)=>{o.d(t,{c_:()=>r.c_,jK:()=>r.jK,DL:()=>r.DL,_S:()=>n._S,LY:()=>n.LY,gn:()=>n.gn,Sm:()=>n.Sm,bk:()=>n.bk,MI:()=>n.MI,un:()=>n.un,V7:()=>n.V7,KZ:()=>n.KZ,kj:()=>n.kj,_d:()=>n._d,Ae:()=>n.Ae,hj:()=>n.hj,UD:()=>a.UD,mv:()=>a.mv,ns:()=>a.ns});var r=o(122685),n=o(848784),a=o(269296);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature},653350:(e,t,o)=>{var r;o.d(t,{Q:()=>n}),e=o.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const n=(e,t=!1)=>(o,r=!1)=>{const n=r||t;if(!o&&e)return n?e:{"data-test":e};if(o&&!e)return n?o:{"data-test":o};if(!o&&!e)return console.warn('testWithId function has missed "prefix" and "id" params'),n?"":{"data-test":""};const a=`${e}__${o}`;return n?a:{"data-test":a}};var a,l;(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&a.register(n,"testWithId","/Users/chenming/superset/superset-frontend/src/utils/testUtils.ts"),(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&l(e)}}]);