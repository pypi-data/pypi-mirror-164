(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[800],{407407:(e,t,n)=>{"use strict";n.d(t,{Z:()=>_});var a,r=n(615078),l=n.n(r),o=n(45697),i=n.n(o),s=(n(881896),n(132383)),c=n(767190),d=n(645636),u=n(45511);e=n.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const h={data:i().shape({records:i().arrayOf(i().shape({x:i().string,y:i().string,v:i().number,perc:i().number,rank:i().number})),extents:i().arrayOf(i().number)}),width:i().number,height:i().number,bottomMargin:i().oneOfType([i().string,i().number]),colorScheme:i().string,columnX:i().string,columnY:i().string,leftMargin:i().oneOfType([i().string,i().number]),metric:i().oneOfType([i().string,i().object]),normalized:i().bool,numberFormat:i().string,showLegend:i().bool,showPercentage:i().bool,showValues:i().bool,sortXAxis:i().string,sortYAxis:i().string,xScaleInterval:i().number,yScaleInterval:i().number,yAxisBounds:i().arrayOf(i().number)};function f(e,t){return e>t?1:-1}const p={minChartWidth:150,minChartHeight:150,marginLeft:35,marginBottom:35,marginTop:10,marginRight:10};function g(e,t){const{data:n,width:a,height:r,bottomMargin:o,canvasImageRendering:i,colorScheme:h,columnX:g,columnY:m,leftMargin:_,metric:b,normalized:v,numberFormat:y,showLegend:x,showPercentage:L,showValues:w,sortXAxis:H,sortYAxis:k,xScaleInterval:C,yScaleInterval:M,yAxisBounds:T}=t,{records:B,extents:E}=n,A={top:10,right:10,bottom:35,left:35};let O=!0,R=!0;const G=(0,c.JB)(y);function P(e,t,n){let a={};const r={};B.forEach((t=>{a[t[e]]=(a[t[e]]||0)+t.v,r[t[e]]=t[e]}));const o=Object.keys(r).map((e=>r[e]));return"alpha_asc"===n?a=o.sort(f):"alpha_desc"===n?a=o.sort(f).reverse():"value_desc"===n?a=Object.keys(a).sort(((e,t)=>a[e]>a[t]?-1:1)):"value_asc"===n&&(a=Object.keys(a).sort(((e,t)=>a[t]>a[e]?-1:1))),"y"===e&&t&&a.reverse(),t?l().scale.ordinal().domain(a).rangeBands(t):l().scale.ordinal().domain(a).range(l().range(a.length))}e.innerHTML="";const $={};!function(){let e=1,t=1;B.forEach((n=>{e=Math.max(e,n.x&&n.x.toString().length||1),t=Math.max(t,n.y&&n.y.toString().length||1)})),A.left="auto"===_?Math.ceil(Math.max(A.left,6*t)):_,x&&(A.right+=40),A.bottom="auto"===o?Math.ceil(Math.max(A.bottom,4.5*e)):o}();let S=a-(A.left+A.right),D=r-(A.bottom+A.top);const U=()=>{A.left="auto"===_?p.marginLeft:_,S=a-(A.left+A.right),O=!1};S<p.minChartWidth&&U(),(D<p.minChartHeight||S<p.minChartWidth)&&(A.bottom="auto"===o?p.marginBottom:o,D=r-(A.bottom+A.top),R=!1),O&&D<p.minChartHeight&&U();const F=(0,c.JB)(d.Z.PERCENT),z=P("x",null,H),I=P("y",null,k),W=P("x",[0,S],H),j=P("y",[D,0],k),Z=[W.domain().length,j.domain().length],q=T[0]||0,N=T[1]||1,K=(0,u.Z)().get(h).createLinearScale([q,N]),V=[l().scale.linear().domain([0,Z[0]]).range([0,S]),l().scale.linear().domain([0,Z[1]]).range([0,D])],X=l().select(e);X.classed("superset-legacy-chart-heatmap",!0);const Y=X.append("canvas").attr("width",Z[0]).attr("height",Z[1]).style("width",`${S}px`).style("height",`${D}px`).style("image-rendering",i).style("left",`${A.left}px`).style("top",`${A.top}px`).style("position","absolute"),J=X.append("svg").attr("width",a).attr("height",r).attr("class","heatmap-container").style("position","relative");if(w&&J.selectAll("rect").data(B).enter().append("g").attr("transform",`translate(${A.left}, ${A.top})`).append("text").attr("transform",(e=>`translate(${W(e.x)}, ${j(e.y)})`)).attr("y",j.rangeBand()/2).attr("x",W.rangeBand()/2).attr("text-anchor","middle").attr("dy",".35em").text((e=>G(e.v))).attr("font-size",Math.min(j.rangeBand(),W.rangeBand())/3+"px").attr("fill",(e=>e.v>=E[1]/2?"white":"black")),x){const e=l().legend.color().labelFormat(G).scale(K).shapePadding(0).cells(10).shapeWidth(10).shapeHeight(10).labelOffset(3);J.append("g").attr("transform",`translate(${a-40}, ${A.top})`).call(e)}const Q=(0,s.Z)().attr("class","d3-tip").offset((function(){const e=l().mouse(this),t=e[0]-S/2;return[e[1]-20,t]})).html((function(){let e="";const t=l().mouse(this),n=Math.floor(V[0].invert(t[0])),a=Math.floor(V[1].invert(t[1])),r="object"==typeof b?b.label:b;if(n in $&&a in $[n]){const t=$[n][a];e+=`<div><b>${g}: </b>${t.x}<div>`,e+=`<div><b>${m}: </b>${t.y}<div>`,e+=`<div><b>${r}: </b>${G(t.v)}<div>`,L&&(e+=`<div><b>%: </b>${F(v?t.rank:t.perc)}<div>`),Q.style("display",null)}else Q.style("display","none");return e}));if(J.append("g").attr("transform",`translate(${A.left}, ${A.top})`).append("rect").classed("background-rect",!0).on("mousemove",Q.show).on("mouseout",Q.hide).attr("width",S).attr("height",D).call(Q),R){const e=l().svg.axis().scale(W).outerTickSize(0).tickValues(W.domain().filter(((e,t)=>!(t%C)))).orient("bottom");J.append("g").attr("class","x axis").attr("transform",`translate(${A.left},${A.top+D})`).call(e).selectAll("text").attr("x",-4).attr("y",10).attr("dy","0.3em").style("text-anchor","end").attr("transform","rotate(-45)")}if(O){const e=l().svg.axis().scale(j).outerTickSize(0).tickValues(j.domain().filter(((e,t)=>!(t%M)))).orient("left");J.append("g").attr("class","y axis").attr("transform",`translate(${A.left},${A.top})`).call(e)}!function(e){const t=e.select(".x.axis").node();t&&t.getBoundingClientRect().x+4<e.node().getBoundingClientRect().x&&e.selectAll(".x.axis").selectAll("text").attr("transform","rotate(-90)").attr("x",-6).attr("y",0).attr("dy","0.3em")}(X);const ee=Y.node().getContext("2d");ee.imageSmoothingEnabled=!1,function(){const e=new Image,t=ee.createImageData(Z[0],Z[1]),n={};B.forEach((e=>{const t=l().rgb(K(v?e.rank:e.perc)),a=z(e.x),r=I(e.y);n[a+r*z.domain().length]=t,void 0===$[a]&&($[a]={}),void 0===$[a][r]&&($[a][r]=e)}));let a=0;for(let e=0;e<Z[0]*Z[1];e+=1){let r=n[e],o=255;void 0===r&&(r=l().rgb("#F00"),o=0),t.data[a+0]=r.r,t.data[a+1]=r.g,t.data[a+2]=r.b,t.data[a+3]=o,a+=4}ee.putImageData(t,0,0),e.src=Y.node().toDataURL()}()}g.displayName="Heatmap",g.propTypes=h;const m=g,_=m;var b,v;(b="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(b.register(h,"propTypes","/Users/chenming/superset/superset-frontend/plugins/legacy-plugin-chart-heatmap/src/Heatmap.js"),b.register(f,"cmp","/Users/chenming/superset/superset-frontend/plugins/legacy-plugin-chart-heatmap/src/Heatmap.js"),b.register(p,"DEFAULT_PROPERTIES","/Users/chenming/superset/superset-frontend/plugins/legacy-plugin-chart-heatmap/src/Heatmap.js"),b.register(g,"Heatmap","/Users/chenming/superset/superset-frontend/plugins/legacy-plugin-chart-heatmap/src/Heatmap.js"),b.register(m,"default","/Users/chenming/superset/superset-frontend/plugins/legacy-plugin-chart-heatmap/src/Heatmap.js")),(v="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&v(e)},480800:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var a,r=n(943323),l=n(407407);e=n.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const o=(0,r.Z)(l.Z),i=o;var s,c;(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&s.register(o,"default","/Users/chenming/superset/superset-frontend/plugins/legacy-plugin-chart-heatmap/src/ReactHeatmap.js"),(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&c(e)},881896:(e,t,n)=>{var a=n(615078);a.legend=n(254510),e.exports=a},254510:(e,t,n)=>{e.exports={color:n(47e3),size:n(828734),symbol:n(884238)}},47e3:(e,t,n)=>{var a=n(708424);e.exports=function(){var e,t=d3.scale.linear(),n="rect",r=15,l=15,o=10,i=2,s=[5],c=[],d="",u=!1,h="",f=d3.format(".01f"),p=10,g="middle",m="to",_="vertical",b=!1,v=d3.dispatch("cellover","cellout","cellclick");function y(y){var x=a.d3_calcType(t,b,s,c,f,m),L=y.selectAll("g").data([t]);L.enter().append("g").attr("class",d+"legendCells");var w=L.selectAll("."+d+"cell").data(x.data),H=w.enter().append("g",".cell").attr("class",d+"cell").style("opacity",1e-6),k=(H.append(n).attr("class",d+"swatch"),w.select("g."+d+"cell "+n));a.d3_addEvents(H,v),w.exit().transition().style("opacity",0).remove(),a.d3_drawShapes(n,k,l,r,o,e),a.d3_addText(L,H,x.labels,d);var C=w.select("text"),M=k[0].map((function(e){return e.getBBox()}));u?k.attr("class",(function(e){return d+"swatch "+x.feature(e)})):"line"==n?k.style("stroke",x.feature):k.style("fill",x.feature);var T,B,E="start"==g?0:"middle"==g?.5:1;"vertical"===_?(T=function(e,t){return"translate(0, "+t*(M[t].height+i)+")"},B=function(e,t){return"translate("+(M[t].width+M[t].x+p)+","+(M[t].y+M[t].height/2+5)+")"}):"horizontal"===_&&(T=function(e,t){return"translate("+t*(M[t].width+i)+",0)"},B=function(e,t){return"translate("+(M[t].width*E+M[t].x)+","+(M[t].height+M[t].y+p+8)+")"}),a.d3_placement(_,w,T,C,B,g),a.d3_title(y,L,h,d),w.transition().style("opacity",1)}return y.scale=function(e){return arguments.length?(t=e,y):t},y.cells=function(e){return arguments.length?((e.length>1||e>=2)&&(s=e),y):s},y.shape=function(t,a){return arguments.length?(("rect"==t||"circle"==t||"line"==t||"path"==t&&"string"==typeof a)&&(n=t,e=a),y):n},y.shapeWidth=function(e){return arguments.length?(r=+e,y):r},y.shapeHeight=function(e){return arguments.length?(l=+e,y):l},y.shapeRadius=function(e){return arguments.length?(o=+e,y):o},y.shapePadding=function(e){return arguments.length?(i=+e,y):i},y.labels=function(e){return arguments.length?(c=e,y):c},y.labelAlign=function(e){return arguments.length?("start"!=e&&"end"!=e&&"middle"!=e||(g=e),y):g},y.labelFormat=function(e){return arguments.length?(f=e,y):f},y.labelOffset=function(e){return arguments.length?(p=+e,y):p},y.labelDelimiter=function(e){return arguments.length?(m=e,y):m},y.useClass=function(e){return arguments.length?(!0!==e&&!1!==e||(u=e),y):u},y.orient=function(e){return arguments.length?("horizontal"!=(e=e.toLowerCase())&&"vertical"!=e||(_=e),y):_},y.ascending=function(e){return arguments.length?(b=!!e,y):b},y.classPrefix=function(e){return arguments.length?(d=e,y):d},y.title=function(e){return arguments.length?(h=e,y):h},d3.rebind(y,v,"on"),y}},708424:e=>{e.exports={d3_identity:function(e){return e},d3_mergeLabels:function(e,t){if(0===t.length)return e;e=e||[];for(var n=t.length;n<e.length;n++)t.push(e[n]);return t},d3_linearLegend:function(e,t,n){var a=[];if(t.length>1)a=t;else for(var r=e.domain(),l=(r[r.length-1]-r[0])/(t-1),o=0;o<t;o++)a.push(r[0]+o*l);var i=a.map(n);return{data:a,labels:i,feature:function(t){return e(t)}}},d3_quantLegend:function(e,t,n){var a=e.range().map((function(a){var r=e.invertExtent(a);return t(r[0]),t(r[1]),t(r[0])+" "+n+" "+t(r[1])}));return{data:e.range(),labels:a,feature:this.d3_identity}},d3_ordinalLegend:function(e){return{data:e.domain(),labels:e.domain(),feature:function(t){return e(t)}}},d3_drawShapes:function(e,t,n,a,r,l){"rect"===e?t.attr("height",n).attr("width",a):"circle"===e?t.attr("r",r):"line"===e?t.attr("x1",0).attr("x2",a).attr("y1",0).attr("y2",0):"path"===e&&t.attr("d",l)},d3_addText:function(e,t,n,a){t.append("text").attr("class",a+"label"),e.selectAll("g."+a+"cell text."+a+"label").data(n).text(this.d3_identity)},d3_calcType:function(e,t,n,a,r,l){var o=e.ticks?this.d3_linearLegend(e,n,r):e.invertExtent?this.d3_quantLegend(e,r,l):this.d3_ordinalLegend(e);return o.labels=this.d3_mergeLabels(o.labels,a),t&&(o.labels=this.d3_reverse(o.labels),o.data=this.d3_reverse(o.data)),o},d3_reverse:function(e){for(var t=[],n=0,a=e.length;n<a;n++)t[n]=e[a-n-1];return t},d3_placement:function(e,t,n,a,r,l){t.attr("transform",n),a.attr("transform",r),"horizontal"===e&&a.style("text-anchor",l)},d3_addEvents:function(e,t){var n=this;e.on("mouseover.legend",(function(e){n.d3_cellOver(t,e,this)})).on("mouseout.legend",(function(e){n.d3_cellOut(t,e,this)})).on("click.legend",(function(e){n.d3_cellClick(t,e,this)}))},d3_cellOver:function(e,t,n){e.cellover.call(n,t)},d3_cellOut:function(e,t,n){e.cellout.call(n,t)},d3_cellClick:function(e,t,n){e.cellclick.call(n,t)},d3_title:function(e,t,n,a){if(""!==n){e.selectAll("text."+a+"legendTitle").data([n]).enter().append("text").attr("class",a+"legendTitle"),e.selectAll("text."+a+"legendTitle").text(n);var r=e.select("."+a+"legendTitle").map((function(e){return e[0].getBBox().height}))[0],l=-t.map((function(e){return e[0].getBBox().x}))[0];t.attr("transform","translate("+l+","+(r+10)+")")}}}},828734:(e,t,n)=>{var a=n(708424);e.exports=function(){var e,t=d3.scale.linear(),n="rect",r=15,l=2,o=[5],i=[],s="",c="",d=d3.format(".01f"),u=10,h="middle",f="to",p="vertical",g=!1,m=d3.dispatch("cellover","cellout","cellclick");function _(_){var b=a.d3_calcType(t,g,o,i,d,f),v=_.selectAll("g").data([t]);v.enter().append("g").attr("class",s+"legendCells");var y=v.selectAll("."+s+"cell").data(b.data),x=y.enter().append("g",".cell").attr("class",s+"cell").style("opacity",1e-6),L=(x.append(n).attr("class",s+"swatch"),y.select("g."+s+"cell "+n));a.d3_addEvents(x,m),y.exit().transition().style("opacity",0).remove(),"line"===n?(a.d3_drawShapes(n,L,0,r),L.attr("stroke-width",b.feature)):a.d3_drawShapes(n,L,b.feature,b.feature,b.feature,e),a.d3_addText(v,x,b.labels,s);var w,H,k=y.select("text"),C=L[0].map((function(e,a){var r=e.getBBox(),l=t(b.data[a]);return"line"===n&&"horizontal"===p?r.height=r.height+l:"line"===n&&"vertical"===p&&(r.width=r.width),r})),M=d3.max(C,(function(e){return e.height+e.y})),T=d3.max(C,(function(e){return e.width+e.x})),B="start"==h?0:"middle"==h?.5:1;"vertical"===p?(w=function(e,t){var n=d3.sum(C.slice(0,t+1),(function(e){return e.height}));return"translate(0, "+(n+t*l)+")"},H=function(e,t){return"translate("+(T+u)+","+(C[t].y+C[t].height/2+5)+")"}):"horizontal"===p&&(w=function(e,t){var n=d3.sum(C.slice(0,t+1),(function(e){return e.width}));return"translate("+(n+t*l)+",0)"},H=function(e,t){return"translate("+(C[t].width*B+C[t].x)+","+(M+u)+")"}),a.d3_placement(p,y,w,k,H,h),a.d3_title(_,v,c,s),y.transition().style("opacity",1)}return _.scale=function(e){return arguments.length?(t=e,_):t},_.cells=function(e){return arguments.length?((e.length>1||e>=2)&&(o=e),_):o},_.shape=function(t,a){return arguments.length?("rect"!=t&&"circle"!=t&&"line"!=t||(n=t,e=a),_):n},_.shapeWidth=function(e){return arguments.length?(r=+e,_):r},_.shapePadding=function(e){return arguments.length?(l=+e,_):l},_.labels=function(e){return arguments.length?(i=e,_):i},_.labelAlign=function(e){return arguments.length?("start"!=e&&"end"!=e&&"middle"!=e||(h=e),_):h},_.labelFormat=function(e){return arguments.length?(d=e,_):d},_.labelOffset=function(e){return arguments.length?(u=+e,_):u},_.labelDelimiter=function(e){return arguments.length?(f=e,_):f},_.orient=function(e){return arguments.length?("horizontal"!=(e=e.toLowerCase())&&"vertical"!=e||(p=e),_):p},_.ascending=function(e){return arguments.length?(g=!!e,_):g},_.classPrefix=function(e){return arguments.length?(s=e,_):s},_.title=function(e){return arguments.length?(c=e,_):c},d3.rebind(_,m,"on"),_}},884238:(e,t,n)=>{var a=n(708424);e.exports=function(){var e=d3.scale.linear(),t="path",n=5,r=[5],l=[],o="",i="",s=d3.format(".01f"),c="middle",d=10,u="to",h="vertical",f=!1,p=d3.dispatch("cellover","cellout","cellclick");function g(g){var m=a.d3_calcType(e,f,r,l,s,u),_=g.selectAll("g").data([e]);_.enter().append("g").attr("class",o+"legendCells");var b=_.selectAll("."+o+"cell").data(m.data),v=b.enter().append("g",".cell").attr("class",o+"cell").style("opacity",1e-6),y=(v.append(t).attr("class",o+"swatch"),b.select("g."+o+"cell "+t));a.d3_addEvents(v,p),b.exit().transition().style("opacity",0).remove(),a.d3_drawShapes(t,y,15,15,10,m.feature),a.d3_addText(_,v,m.labels,o);var x,L,w=b.select("text"),H=y[0].map((function(e){return e.getBBox()})),k=d3.max(H,(function(e){return e.height})),C=d3.max(H,(function(e){return e.width})),M="start"==c?0:"middle"==c?.5:1;"vertical"===h?(x=function(e,t){return"translate(0, "+t*(k+n)+")"},L=function(e,t){return"translate("+(C+d)+","+(H[t].y+H[t].height/2+5)+")"}):"horizontal"===h&&(x=function(e,t){return"translate("+t*(C+n)+",0)"},L=function(e,t){return"translate("+(H[t].width*M+H[t].x)+","+(k+d)+")"}),a.d3_placement(h,b,x,w,L,c),a.d3_title(g,_,i,o),b.transition().style("opacity",1)}return g.scale=function(t){return arguments.length?(e=t,g):e},g.cells=function(e){return arguments.length?((e.length>1||e>=2)&&(r=e),g):r},g.shapePadding=function(e){return arguments.length?(n=+e,g):n},g.labels=function(e){return arguments.length?(l=e,g):l},g.labelAlign=function(e){return arguments.length?("start"!=e&&"end"!=e&&"middle"!=e||(c=e),g):c},g.labelFormat=function(e){return arguments.length?(s=e,g):s},g.labelOffset=function(e){return arguments.length?(d=+e,g):d},g.labelDelimiter=function(e){return arguments.length?(u=e,g):u},g.orient=function(e){return arguments.length?("horizontal"!=(e=e.toLowerCase())&&"vertical"!=e||(h=e),g):h},g.ascending=function(e){return arguments.length?(f=!!e,g):f},g.classPrefix=function(e){return arguments.length?(o=e,g):o},g.title=function(e){return arguments.length?(i=e,g):i},d3.rebind(g,p,"on"),g}},943323:(module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>reactify});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(667294),_emotion_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(211965),enterModule;module=__webpack_require__.hmd(module),enterModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0,enterModule&&enterModule(module);var __signature__="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},reactHotLoader,leaveModule;function reactify(renderFn,callbacks){class ReactifiedComponent extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(e){super(e),this.container=void 0,this.setContainerRef=this.setContainerRef.bind(this)}componentDidMount(){this.execute()}componentDidUpdate(){this.execute()}componentWillUnmount(){this.container=void 0,null!=callbacks&&callbacks.componentWillUnmount&&callbacks.componentWillUnmount.bind(this)()}setContainerRef(e){this.container=e}execute(){this.container&&renderFn(this.container,this.props)}render(){const{id:e,className:t}=this.props;return(0,_emotion_react__WEBPACK_IMPORTED_MODULE_1__.tZ)("div",{ref:this.setContainerRef,id:e,className:t})}__reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}const ReactifiedClass=ReactifiedComponent;return renderFn.displayName&&(ReactifiedClass.displayName=renderFn.displayName),renderFn.propTypes&&(ReactifiedClass.propTypes={...ReactifiedClass.propTypes,...renderFn.propTypes}),renderFn.defaultProps&&(ReactifiedClass.defaultProps=renderFn.defaultProps),ReactifiedComponent}reactHotLoader="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0,reactHotLoader&&reactHotLoader.register(reactify,"reactify","/Users/chenming/superset/superset-frontend/packages/superset-ui-core/src/chart/components/reactify.tsx"),leaveModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0,leaveModule&&leaveModule(module)}}]);