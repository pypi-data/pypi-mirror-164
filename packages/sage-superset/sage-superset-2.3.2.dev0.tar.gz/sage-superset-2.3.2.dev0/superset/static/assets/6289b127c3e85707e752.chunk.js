"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[5296],{604759:(e,t,r)=>{r.d(t,{Z:()=>p});var o,s=r(667294),a=r(751995),n=r(455867),d=r(574520),l=r(835932),i=r(211965);e=r.hmd(e),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const u=(0,a.iK)(d.Z)`
  .modal-content {
    height: 900px;
    display: flex;
    flex-direction: column;
    align-items: stretch;
  }

  .modal-header {
    flex: 0 1 auto;
  }

  .modal-body {
    flex: 1 1 auto;
    overflow: auto;
  }

  .modal-footer {
    flex: 0 1 auto;
  }

  .ant-modal-body {
    overflow: auto;
  }
`,c=({onClickReview:e,onClickSnooze:t,onHide:r,show:o,hideFooter:a=!1})=>(0,i.tZ)(u,{show:o,onHide:r,title:(0,n.t)("Ready to review filters in this dashboard?"),hideFooter:a,footer:(0,i.tZ)(s.Fragment,null,(0,i.tZ)(l.Z,{buttonSize:"small",onClick:t},(0,n.t)("Remind me in 24 hours")),(0,i.tZ)(l.Z,{buttonSize:"small",onClick:r},(0,n.t)("Cancel")),(0,i.tZ)(l.Z,{buttonSize:"small",buttonStyle:"primary",onClick:e},(0,n.t)("Start Review"))),responsive:!0},(0,i.tZ)("div",null,(0,n.t)("filter_box will be deprecated in a future version of Superset. Please replace filter_box by dashboard filter components."))),f=c,p=f;var h,b;(h="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(h.register(u,"StyledFilterBoxMigrationModal","/Users/chenming/superset/superset-frontend/src/dashboard/components/FilterBoxMigrationModal.tsx"),h.register(c,"FilterBoxMigrationModal","/Users/chenming/superset/superset-frontend/src/dashboard/components/FilterBoxMigrationModal.tsx"),h.register(f,"default","/Users/chenming/superset/superset-frontend/src/dashboard/components/FilterBoxMigrationModal.tsx")),(b="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&b(e)},281788:(e,t,r)=>{r.d(t,{TZ:()=>d,u7:()=>l,B8:()=>i});var o,s=r(431069),a=r(68492);e=r.hmd(e),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const n=(e,t,r)=>{let o=`api/v1/dashboard/${e}/filter_state`;return t&&(o=o.concat(`/${t}`)),r&&(o=o.concat(`?tab_id=${r}`)),o},d=(e,t,r,o)=>s.Z.put({endpoint:n(e,r,o),jsonPayload:{value:t}}).then((e=>e.json.message)).catch((e=>(a.Z.error(e),null))),l=(e,t,r)=>s.Z.post({endpoint:n(e,void 0,r),jsonPayload:{value:t}}).then((e=>e.json.key)).catch((e=>(a.Z.error(e),null))),i=(e,t)=>s.Z.get({endpoint:n(e,t)}).then((({json:e})=>JSON.parse(e.value))).catch((e=>(a.Z.error(e),null)));var u,c;(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(u.register(n,"assembleEndpoint","/Users/chenming/superset/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/keyValue.tsx"),u.register(d,"updateFilterKey","/Users/chenming/superset/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/keyValue.tsx"),u.register(l,"createFilterKey","/Users/chenming/superset/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/keyValue.tsx"),u.register(i,"getFilterValue","/Users/chenming/superset/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/keyValue.tsx")),(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&c(e)},525619:(e,t,r)=>{r.r(t),r.d(t,{MigrationContext:()=>U,default:()=>Z});var o,s=r(667294),a=r(751995),n=r(593185),d=r(455867),l=r(137703),i=r(211965),u=r(505977),c=r(414114),f=r(838703),p=r(604759),h=r(405516),b=r(959954),m=r(550810),g=r(514505),_=r(700362),v=r(672570),L=r(961337),y=r(269856),H=r(427600),G=r(23525),R=r(870695),E=r(152794),S=r(281788),x=r(198983);e=r.hmd(e),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e);var D="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e};const U=s.createContext(y.Qi.NOOP);(0,_.Z)();const O=s.lazy((()=>Promise.all([r.e(1216),r.e(995),r.e(876),r.e(2671),r.e(1163),r.e(193),r.e(3112),r.e(8013),r.e(452)]).then(r.bind(r,581819)))),M=document.title,F=()=>{const e=(0,l.I0)(),t=(0,a.Fg)(),r=(0,l.v9)((e=>e.user)),{addDangerToast:o}=(0,c.e)(),{idOrSlug:_}=(0,u.UO)(),{result:D,error:F}=(0,h.QU)(_),{result:T,error:Z}=(0,h.Es)(_),{result:w,error:C}=(0,h.JL)(_),k=(0,s.useRef)(!1),N=F||Z,I=Boolean(D&&T),A=(0,G.e)(H.KD.migrationState),P=(0,n.c)(n.T.ENABLE_FILTER_BOX_MIGRATION),{dashboard_title:B,css:Q,metadata:V,id:z=0}=D||{},[j,$]=(0,s.useState)(A||y.Qi.NOOP);if((0,s.useEffect)((()=>{const t=T&&T.some((e=>{var t;return"filter_box"===(null==(t=e.form_data)?void 0:t.viz_type)}));if(D&&(0,R.M)(D,r)){if(null!=V&&V.native_filter_configuration)return void $(P?y.Qi.CONVERTED:y.Qi.NOOP);if(t)if(P){if(A&&Object.values(y.Qi).includes(A))return void $(A);const e=(0,L.rV)(L.dR.filter_box_transition_snoozed_at,{});if(Date.now()-(e[z]||0)<y.Yd)return void $(y.Qi.SNOOZED);$(y.Qi.UNDECIDED)}else(0,n.c)(n.T.DASHBOARD_NATIVE_FILTERS)&&e((0,v.Dz)((0,d.t)("filter_box will be deprecated in a future version of Superset. Please replace filter_box by dashboard filter components.")))}}),[I]),(0,s.useEffect)((()=>{z&&async function(){const t=(0,G.e)(H.KD.nativeFiltersKey);let r=t||{};const o=(0,G.e)(H.KD.nativeFilters);t&&(r=await(0,S.B8)(z,t)),o&&(r=o),I&&(k.current||(k.current=!0,(0,n.c)(n.T.DASHBOARD_NATIVE_FILTERS_SET)&&e((0,E.pi)(z))),e((0,b.Y)(D,T,j,r)))}()}),[I,j]),(0,s.useEffect)((()=>(B&&(document.title=B),()=>{document.title=M})),[B]),(0,s.useEffect)((()=>Q?(0,g.Z)(Q):()=>{}),[Q]),(0,s.useEffect)((()=>{C?o((0,d.t)("Error loading chart datasources. Filters may not work correctly.")):e((0,m.Fy)(w))}),[o,w,C,e]),N)throw N;return I?(0,i.tZ)(s.Fragment,null,(0,i.tZ)(i.xB,{styles:(0,x.A)(t)}),(0,i.tZ)(p.Z,{show:j===y.Qi.UNDECIDED,hideFooter:!P,onHide:()=>{$(y.Qi.SNOOZED)},onClickReview:()=>{$(y.Qi.REVIEWING)},onClickSnooze:()=>{const e=(0,L.rV)(L.dR.filter_box_transition_snoozed_at,{});(0,L.LS)(L.dR.filter_box_transition_snoozed_at,{...e,[z]:Date.now()}),$(y.Qi.SNOOZED)}}),(0,i.tZ)(U.Provider,{value:j},(0,i.tZ)(O,null))):(0,i.tZ)(f.Z,null)};D(F,"useDispatch{dispatch}\nuseTheme{theme}\nuseSelector{user}\nuseToasts{{ addDangerToast }}\nuseParams{{ idOrSlug }}\nuseDashboard{{ result: dashboard, error: dashboardApiError }}\nuseDashboardCharts{{ result: charts, error: chartsApiError }}\nuseDashboardDatasets{{ result: datasets, error: datasetsApiError }}\nuseRef{isDashboardHydrated}\nuseState{[filterboxMigrationState, setFilterboxMigrationState](migrationStateParam || FILTER_BOX_MIGRATION_STATES.NOOP)}\nuseEffect{}\nuseEffect{}\nuseEffect{}\nuseEffect{}\nuseEffect{}",(()=>[l.I0,a.Fg,l.v9,c.e,u.UO,h.QU,h.Es,h.JL]));const T=F,Z=T;var w,C;(w="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(w.register(U,"MigrationContext","/Users/chenming/superset/superset-frontend/src/dashboard/containers/DashboardPage.tsx"),w.register(O,"DashboardContainer","/Users/chenming/superset/superset-frontend/src/dashboard/containers/DashboardPage.tsx"),w.register(M,"originalDocumentTitle","/Users/chenming/superset/superset-frontend/src/dashboard/containers/DashboardPage.tsx"),w.register(F,"DashboardPage","/Users/chenming/superset/superset-frontend/src/dashboard/containers/DashboardPage.tsx"),w.register(T,"default","/Users/chenming/superset/superset-frontend/src/dashboard/containers/DashboardPage.tsx")),(C="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&C(e)},198983:(e,t,r)=>{r.d(t,{A:()=>a});var o,s=r(211965);e=r.hmd(e),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const a=e=>s.iv`
  .filter-card-popover {
    width: 240px;
    padding: 0;
    border-radius: 4px;

    .ant-popover-inner {
      box-shadow: 0 0 8px rgb(0 0 0 / 10%);
    }
    .ant-popover-inner-content {
      padding: ${4*e.gridUnit}px;
    }

    .ant-popover-arrow {
      display: none;
    }
  }

  .filter-card-tooltip {
    &.ant-tooltip-placement-bottom {
      padding-top: 0;
      & .ant-tooltip-arrow {
        top: -13px;
      }
    }
  }
`;var n,d;(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&n.register(a,"filterCardPopoverStyle","/Users/chenming/superset/superset-frontend/src/dashboard/styles.ts"),(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&d(e)},514505:(e,t,r)=>{var o,s,a;function n(e){const t=document.createElement("style");return t.className=e,t.type="text/css",t}function d(e){const t="CssEditor-css",r=document.head||document.getElementsByTagName("head")[0],o=document.querySelector(`.${t}`)||n(t);return"styleSheet"in o?o.styleSheet.cssText=e:o.innerHTML=e,r.appendChild(o),function(){o.remove()}}r.d(t,{Z:()=>d}),e=r.hmd(e),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(s.register(n,"createStyleElement","/Users/chenming/superset/superset-frontend/src/dashboard/util/injectCustomCss.ts"),s.register(d,"injectCustomCss","/Users/chenming/superset/superset-frontend/src/dashboard/util/injectCustomCss.ts")),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&a(e)},242190:(e,t,r)=>{r.d(t,{l6:()=>u,s_:()=>f});var o,s=r(405568),a=r(667294);e=r.hmd(e),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e);var n,d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e};!function(e){e.LOADING="loading",e.COMPLETE="complete",e.ERROR="error"}(n||(n={}));const l={status:n.LOADING,result:null,error:null};function i(e){const[t,r]=(0,a.useState)(l),o=(0,a.useRef)((()=>{}));return(0,a.useEffect)((()=>{r(l),o.current();let t=!1;return o.current=()=>{t=!0},(0,s.Z)({method:"GET",endpoint:e})({}).then((e=>{t||r({status:n.COMPLETE,result:e,error:null})})).catch((e=>{t||r({status:n.ERROR,result:null,error:e})})),()=>{t=!0}}),[e]),t}function u(e,t){return(0,a.useMemo)((()=>{if(e.status!==n.COMPLETE)return e;try{return{...e,result:t(e.result)}}catch(e){return{status:n.ERROR,result:null,error:e}}}),[e,t])}d(i,"useState{[resource, setResource](initialState)}\nuseRef{cancelRef}\nuseEffect{}"),d(u,"useMemo{}");const c=e=>e.result;function f(e){return u(i(e),c)}var p,h;d(f,"useTransformedResource{}\nuseApiResourceFullBody{}",(()=>[u,i])),(p="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(p.register(n,"ResourceStatus","/Users/chenming/superset/superset-frontend/src/hooks/apiResources/apiResources.ts"),p.register(l,"initialState","/Users/chenming/superset/superset-frontend/src/hooks/apiResources/apiResources.ts"),p.register(i,"useApiResourceFullBody","/Users/chenming/superset/superset-frontend/src/hooks/apiResources/apiResources.ts"),p.register(u,"useTransformedResource","/Users/chenming/superset/superset-frontend/src/hooks/apiResources/apiResources.ts"),p.register(c,"extractInnerResult","/Users/chenming/superset/superset-frontend/src/hooks/apiResources/apiResources.ts"),p.register(f,"useApiV1Resource","/Users/chenming/superset/superset-frontend/src/hooks/apiResources/apiResources.ts")),(h="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&h(e)},237459:(e,t,r)=>{r.d(t,{h:()=>u});var o,s=r(115926),a=r.n(s),n=r(242190);e=r.hmd(e),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e);var d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e};function l({owners:e}){return e?e.map((e=>`${e.first_name} ${e.last_name}`)):null}const i=a().encode({columns:["owners.first_name","owners.last_name"],keys:["none"]});function u(e){return(0,n.l6)((0,n.s_)(`/api/v1/chart/${e}?q=${i}`),l)}var c,f;d(u,"useTransformedResource{}\nuseApiV1Resource{}",(()=>[n.l6,n.s_])),(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(c.register(l,"extractOwnerNames","/Users/chenming/superset/superset-frontend/src/hooks/apiResources/charts.ts"),c.register(i,"ownerNamesQuery","/Users/chenming/superset/superset-frontend/src/hooks/apiResources/charts.ts"),c.register(u,"useChartOwnerNames","/Users/chenming/superset/superset-frontend/src/hooks/apiResources/charts.ts")),(f="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&f(e)},40712:(e,t,r)=>{r.d(t,{QU:()=>n,Es:()=>d,JL:()=>l});var o,s=r(242190);e=r.hmd(e),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e);var a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e};const n=e=>(0,s.l6)((0,s.s_)(`/api/v1/dashboard/${e}`),(e=>({...e,metadata:e.json_metadata&&JSON.parse(e.json_metadata)||{},position_data:e.position_json&&JSON.parse(e.position_json)})));a(n,"useTransformedResource{}\nuseApiV1Resource{}",(()=>[s.l6,s.s_]));const d=e=>(0,s.s_)(`/api/v1/dashboard/${e}/charts`);a(d,"useApiV1Resource{}",(()=>[s.s_]));const l=e=>(0,s.s_)(`/api/v1/dashboard/${e}/datasets`);var i,u;a(l,"useApiV1Resource{}",(()=>[s.s_])),(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(i.register(n,"useDashboard","/Users/chenming/superset/superset-frontend/src/hooks/apiResources/dashboards.ts"),i.register(d,"useDashboardCharts","/Users/chenming/superset/superset-frontend/src/hooks/apiResources/dashboards.ts"),i.register(l,"useDashboardDatasets","/Users/chenming/superset/superset-frontend/src/hooks/apiResources/dashboards.ts")),(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&u(e)},405516:(e,t,r)=>{r.d(t,{hb:()=>o.h,QU:()=>s.QU,Es:()=>s.Es,JL:()=>s.JL}),r(242190);var o=r(237459),s=r(40712);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature},961337:(e,t,r)=>{var o,s,a,n;function d(e,t){return i(e,t)}function l(e,t){u(e,t)}function i(e,t){try{const r=localStorage.getItem(e);return null===r?t:JSON.parse(r)}catch{return t}}function u(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch{}}r.d(t,{dR:()=>s,rV:()=>d,LS:()=>l,OH:()=>i,I_:()=>u}),e=r.hmd(e),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,function(e){e.filter_box_transition_snoozed_at="filter_box_transition_snoozed_at",e.chart_split_sizes="chart_split_sizes",e.controls_width="controls_width",e.datasource_width="datasource_width",e.is_datapanel_open="is_datapanel_open",e.homepage_chart_filter="homepage_chart_filter",e.homepage_dashboard_filter="homepage_dashboard_filter",e.homepage_collapse_state="homepage_collapse_state",e.homepage_activity_filter="homepage_activity_filter",e.sqllab__is_autocomplete_enabled="sqllab__is_autocomplete_enabled",e.explore__data_table_time_formatted_columns="explore__data_table_time_formatted_columns"}(s||(s={})),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(a.register(s,"LocalStorageKeys","/Users/chenming/superset/superset-frontend/src/utils/localStorageHelpers.ts"),a.register(d,"getItem","/Users/chenming/superset/superset-frontend/src/utils/localStorageHelpers.ts"),a.register(l,"setItem","/Users/chenming/superset/superset-frontend/src/utils/localStorageHelpers.ts"),a.register(i,"dangerouslyGetItemDoNotUse","/Users/chenming/superset/superset-frontend/src/utils/localStorageHelpers.ts"),a.register(u,"dangerouslySetItemDoNotUse","/Users/chenming/superset/superset-frontend/src/utils/localStorageHelpers.ts")),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&n(e)}}]);