"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[9662,7275,8146],{328569:(e,t,o)=>{o.d(t,{Z:()=>c});var r=o(495772),a=o(693844),i=o(151331),s=o(100281),_=o(453982);const n=[0,0,0,255],l={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,billboard:!1,getPosition:{type:"accessor",value:e=>e.position},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:n},getLineColor:{type:"accessor",value:n},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class c extends r.Z{getShaders(){return super.getShaders({vs:"#define SHADER_NAME scatterplot-layer-vertex-shader\n\nattribute vec3 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute float instanceRadius;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float radiusScale;\nuniform float radiusMinPixels;\nuniform float radiusMaxPixels;\nuniform float lineWidthScale;\nuniform float lineWidthMinPixels;\nuniform float lineWidthMaxPixels;\nuniform float stroked;\nuniform bool filled;\nuniform bool billboard;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\nvarying float outerRadiusPixels;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  outerRadiusPixels = clamp(\n    project_size_to_pixel(radiusScale * instanceRadius),\n    radiusMinPixels, radiusMaxPixels\n  );\n  float lineWidthPixels = clamp(\n    project_size_to_pixel(lineWidthScale * instanceLineWidths),\n    lineWidthMinPixels, lineWidthMaxPixels\n  );\n  outerRadiusPixels += stroked * lineWidthPixels / 2.0;\n  unitPosition = positions.xy;\n  geometry.uv = unitPosition;\n  geometry.pickingColor = instancePickingColors;\n\n  innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;\n  \n  if (billboard) {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    vec3 offset = positions * outerRadiusPixels;\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n  } else {\n    vec3 offset = positions * project_pixel_size(outerRadiusPixels);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);\n  }\n\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\n  DECKGL_FILTER_COLOR(vFillColor, geometry);\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\n  DECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n",fs:"#define SHADER_NAME scatterplot-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool filled;\nuniform float stroked;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\nvarying float outerRadiusPixels;\n\nvoid main(void) {\n  geometry.uv = unitPosition;\n\n  float distToCenter = length(unitPosition) * outerRadiusPixels;\n  float inCircle = smoothedge(distToCenter, outerRadiusPixels);\n\n  if (inCircle == 0.0) {\n    discard;\n  }\n\n  if (stroked > 0.5) {\n    float isLine = smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter);\n    if (filled) {\n      gl_FragColor = mix(vFillColor, vLineColor, isLine);\n    } else {\n      if (isLine == 0.0) {\n        discard;\n      }\n      gl_FragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);\n    }\n  } else if (filled) {\n    gl_FragColor = vFillColor;\n  } else {\n    discard;\n  }\n\n  gl_FragColor.a *= inCircle;\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[a.Z,i.Z]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState({props:e,oldProps:t,changeFlags:o}){if(super.updateState({props:e,oldProps:t,changeFlags:o}),o.extensionsChanged){var r;const{gl:e}=this.context;null===(r=this.state.model)||void 0===r||r.delete(),this.state.model=this._getModel(e),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){const{viewport:t}=this.context,{radiusUnits:o,radiusScale:r,radiusMinPixels:a,radiusMaxPixels:i,stroked:s,filled:_,billboard:n,lineWidthUnits:l,lineWidthScale:c,lineWidthMinPixels:d,lineWidthMaxPixels:u}=this.props,p="pixels"===o?t.metersPerPixel:1,g="pixels"===l?t.metersPerPixel:1;this.state.model.setUniforms(e).setUniforms({stroked:s?1:0,filled:_,billboard:n,radiusScale:r*p,radiusMinPixels:a,radiusMaxPixels:i,lineWidthScale:c*g,lineWidthMinPixels:d,lineWidthMaxPixels:u}).draw()}_getModel(e){return new s.Z(e,{...this.getShaders(),id:this.props.id,geometry:new _.Z({drawMode:6,vertexCount:4,attributes:{positions:{size:3,value:new Float32Array([-1,-1,0,1,-1,0,1,1,0,-1,1,0])}}}),isInstanced:!0})}}c.layerName="ScatterplotLayer",c.defaultProps=l},639023:(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>CategoricalDeckGLContainer});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(667294),prop_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(45697),prop_types__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__),_superset_ui_core__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(328062),_AnimatableDeckGLContainer__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(815354),_components_Legend__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(36665),_utils_colors__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(464106),_utils_time__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(166911),_utils_sandbox__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(621207),_utils_fitViewport__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(74020),_emotion_react__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(211965),enterModule;module=__webpack_require__.hmd(module),enterModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0,enterModule&&enterModule(module);var __signature__="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e};const{getScale}=_superset_ui_core__WEBPACK_IMPORTED_MODULE_8__;function getCategories(e,t){const o=e.color_picker||{r:0,g:0,b:0,a:1},r=[o.r,o.g,o.b,255*o.a],a=getScale(e.color_scheme),i={};return t.forEach((t=>{if(null!=t.cat_color&&!i.hasOwnProperty(t.cat_color)){let s;s=e.dimension?(0,_utils_colors__WEBPACK_IMPORTED_MODULE_4__.hexToRGB)(a(t.cat_color),255*o.a):r,i[t.cat_color]={color:s,enabled:!0}}})),i}const propTypes={datasource:prop_types__WEBPACK_IMPORTED_MODULE_1___default().object.isRequired,formData:prop_types__WEBPACK_IMPORTED_MODULE_1___default().object.isRequired,getLayer:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func.isRequired,getPoints:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func.isRequired,height:prop_types__WEBPACK_IMPORTED_MODULE_1___default().number.isRequired,mapboxApiKey:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string.isRequired,onAddFilter:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func,payload:prop_types__WEBPACK_IMPORTED_MODULE_1___default().object.isRequired,setControlValue:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func.isRequired,viewport:prop_types__WEBPACK_IMPORTED_MODULE_1___default().object.isRequired,width:prop_types__WEBPACK_IMPORTED_MODULE_1___default().number.isRequired};class CategoricalDeckGLContainer extends react__WEBPACK_IMPORTED_MODULE_0__.PureComponent{constructor(e){super(e),this.containerRef=react__WEBPACK_IMPORTED_MODULE_0__.createRef(),this.setTooltip=e=>{const{current:t}=this.containerRef;t&&t.setTooltip(e)},this.state=this.getStateFromProps(e),this.getLayers=this.getLayers.bind(this),this.onValuesChange=this.onValuesChange.bind(this),this.toggleCategory=this.toggleCategory.bind(this),this.showSingleCategory=this.showSingleCategory.bind(this)}UNSAFE_componentWillReceiveProps(e){e.payload.form_data!==this.state.formData&&this.setState({...this.getStateFromProps(e)})}onValuesChange(e){this.setState({values:Array.isArray(e)?e:[e,e+this.state.getStep(e)]})}getStateFromProps(e,t){const o=e.payload.data.features||[],r=o.map((e=>e.__timestamp)),a=getCategories(e.formData,o);if(t&&e.payload.form_data===t.formData)return{...t,categories:a};const i=e.payload.form_data.time_grain_sqla||e.payload.form_data.granularity||"P1D",{start:s,end:_,getStep:n,values:l,disabled:c}=(0,_utils_time__WEBPACK_IMPORTED_MODULE_5__.g)(r,i),{width:d,height:u,formData:p}=e;let{viewport:g}=e;return p.autozoom&&(g=(0,_utils_fitViewport__WEBPACK_IMPORTED_MODULE_7__.Z)(g,{width:d,height:u,points:e.getPoints(o)})),g.zoom<0&&(g.zoom=0),{start:s,end:_,getStep:n,values:l,disabled:c,viewport:g,selected:[],lastClick:0,formData:e.payload.form_data,categories:a}}getLayers(e){const{getLayer:t,payload:o,formData:r,onAddFilter:a}=this.props;let i=o.data.features?[...o.data.features]:[];i=this.addColor(i,r),r.js_data_mutator&&(i=(0,_utils_sandbox__WEBPACK_IMPORTED_MODULE_6__.Z)(r.js_data_mutator)(i)),i=e[0]===e[1]||e[1]===this.end?i.filter((t=>t.__timestamp>=e[0]&&t.__timestamp<=e[1])):i.filter((t=>t.__timestamp>=e[0]&&t.__timestamp<e[1]));const s=this.state.categories;return r.dimension&&(i=i.filter((e=>s[e.cat_color]&&s[e.cat_color].enabled))),[t(r,{...o,data:{...o.data,features:i}},a,this.setTooltip,this.props.datasource)]}addColor(e,t){const o=t.color_picker||{r:0,g:0,b:0,a:1},r=getScale(t.color_scheme);return e.map((e=>{let a;return t.dimension?(a=(0,_utils_colors__WEBPACK_IMPORTED_MODULE_4__.hexToRGB)(r(e.cat_color),255*o.a),{...e,color:a}):e}))}toggleCategory(e){const t=this.state.categories[e],o={...this.state.categories,[e]:{...t,enabled:!t.enabled}};Object.values(o).every((e=>!e.enabled))&&Object.values(o).forEach((e=>{e.enabled=!0})),this.setState({categories:o})}showSingleCategory(e){const t={...this.state.categories};Object.values(t).forEach((e=>{e.enabled=!1})),t[e].enabled=!0,this.setState({categories:t})}render(){return(0,_emotion_react__WEBPACK_IMPORTED_MODULE_9__.tZ)("div",{style:{position:"relative"}},(0,_emotion_react__WEBPACK_IMPORTED_MODULE_9__.tZ)(_AnimatableDeckGLContainer__WEBPACK_IMPORTED_MODULE_2__.Z,{ref:this.containerRef,getLayers:this.getLayers,start:this.state.start,end:this.state.end,getStep:this.state.getStep,values:this.state.values,disabled:this.state.disabled,viewport:this.state.viewport,mapboxApiAccessToken:this.props.mapboxApiKey,mapStyle:this.props.formData.mapbox_style,setControlValue:this.props.setControlValue,width:this.props.width,height:this.props.height},(0,_emotion_react__WEBPACK_IMPORTED_MODULE_9__.tZ)(_components_Legend__WEBPACK_IMPORTED_MODULE_3__.Z,{forceCategorical:!0,categories:this.state.categories,format:this.props.formData.legend_format,position:this.props.formData.legend_position,showSingleCategory:this.showSingleCategory,toggleCategory:this.toggleCategory})))}__reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}var reactHotLoader,leaveModule;CategoricalDeckGLContainer.propTypes=propTypes,reactHotLoader="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0,reactHotLoader&&(reactHotLoader.register(getScale,"getScale","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/CategoricalDeckGLContainer.jsx"),reactHotLoader.register(getCategories,"getCategories","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/CategoricalDeckGLContainer.jsx"),reactHotLoader.register(propTypes,"propTypes","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/CategoricalDeckGLContainer.jsx"),reactHotLoader.register(CategoricalDeckGLContainer,"CategoricalDeckGLContainer","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/CategoricalDeckGLContainer.jsx")),leaveModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0,leaveModule&&leaveModule(module)},36665:(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>Legend});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(667294),prop_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(45697),prop_types__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__),_superset_ui_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(767190),_Legend_css__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(323270),_emotion_react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(211965),enterModule;module=__webpack_require__.hmd(module),enterModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0,enterModule&&enterModule(module);var __signature__="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e};const categoryDelimiter=" - ",propTypes={categories:prop_types__WEBPACK_IMPORTED_MODULE_1___default().object,forceCategorical:prop_types__WEBPACK_IMPORTED_MODULE_1___default().bool,format:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,position:prop_types__WEBPACK_IMPORTED_MODULE_1___default().oneOf([null,"tl","tr","bl","br"]),showSingleCategory:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func,toggleCategory:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func},defaultProps={categories:{},forceCategorical:!1,format:null,position:"tr",showSingleCategory:()=>{},toggleCategory:()=>{}};class Legend extends react__WEBPACK_IMPORTED_MODULE_0__.PureComponent{format(e){if(!this.props.format||this.props.forceCategorical)return e;const t=parseFloat(e);return(0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_3__.uf)(this.props.format,t)}formatCategoryLabel(e){if(!this.props.format)return e;if(e.includes(categoryDelimiter)){const t=e.split(categoryDelimiter);return this.format(t[0])+categoryDelimiter+this.format(t[1])}return this.format(e)}render(){if(0===Object.keys(this.props.categories).length||null===this.props.position)return null;const e=Object.entries(this.props.categories).map((([e,t])=>{const o={color:`rgba(${t.color.join(", ")})`},r=t.enabled?"◼":"◻";return(0,_emotion_react__WEBPACK_IMPORTED_MODULE_4__.tZ)("li",{key:e},(0,_emotion_react__WEBPACK_IMPORTED_MODULE_4__.tZ)("a",{href:"#",onClick:()=>this.props.toggleCategory(e),onDoubleClick:()=>this.props.showSingleCategory(e)},(0,_emotion_react__WEBPACK_IMPORTED_MODULE_4__.tZ)("span",{style:o},r)," ",this.formatCategoryLabel(e)))})),t={position:"absolute",["t"===this.props.position.charAt(0)?"top":"bottom"]:"0px",["r"===this.props.position.charAt(1)?"right":"left"]:"10px"};return(0,_emotion_react__WEBPACK_IMPORTED_MODULE_4__.tZ)("div",{className:"legend",style:t},(0,_emotion_react__WEBPACK_IMPORTED_MODULE_4__.tZ)("ul",{className:"categories"},e))}__reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}var reactHotLoader,leaveModule;Legend.propTypes=propTypes,Legend.defaultProps=defaultProps,reactHotLoader="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0,reactHotLoader&&(reactHotLoader.register(categoryDelimiter,"categoryDelimiter","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/components/Legend.jsx"),reactHotLoader.register(propTypes,"propTypes","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/components/Legend.jsx"),reactHotLoader.register(defaultProps,"defaultProps","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/components/Legend.jsx"),reactHotLoader.register(Legend,"Legend","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/components/Legend.jsx")),leaveModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0,leaveModule&&leaveModule(module)},659365:(e,t,o)=>{o.r(t),o.d(t,{getLayer:()=>g,default:()=>h});var r,a=o(328569),i=(o(667294),o(956652)),s=o(455867),_=o(452154),n=o(241667),l=o(101740),c=o(831677),d=o(211965);function u(e){return e.map((e=>e.position))}function p(e,t){return o=>{var r;const a=(null==t?void 0:t[e.point_radius_fixed.value])||(0,i.Z)(null==(r=e.point_radius_fixed)?void 0:r.value);return(0,d.tZ)("div",{className:"deckgl-tooltip"},(0,d.tZ)(l.Z,{label:`${(0,s.t)("Longitude and Latitude")}: `,value:`${o.object.position[0]}, ${o.object.position[1]}`}),o.object.cat_color&&(0,d.tZ)(l.Z,{label:`${(0,s.t)("Category")}: `,value:`${o.object.cat_color}`}),o.object.metric&&(0,d.tZ)(l.Z,{label:`${a}: `,value:`${o.object.metric}`}))}}function g(e,t,o,r,i){const s=e,n=t.data.features.map((e=>{let t=(0,c.lb)(s.point_unit,e.radius)||10;if(s.multiplier&&(t*=s.multiplier),e.color)return{...e,radius:t};const o=s.color_picker||{r:0,g:0,b:0,a:1},r=[o.r,o.g,o.b,255*o.a];return{...e,radius:t,color:r}}));return new a.Z({id:`scatter-layer-${s.slice_id}`,data:n,fp64:!0,getFillColor:e=>e.color,getRadius:e=>e.radius,radiusMinPixels:s.min_radius||null,radiusMaxPixels:s.max_radius||null,stroked:!1,...(0,_.N)(s,r,p(s,null==i?void 0:i.verboseMap))})}e=o.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const f=(0,n.B)(g,u),h=f;var E,m;(E="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(E.register(u,"getPoints","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/layers/Scatter/Scatter.jsx"),E.register(p,"setTooltipContent","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/layers/Scatter/Scatter.jsx"),E.register(g,"getLayer","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/layers/Scatter/Scatter.jsx"),E.register(f,"default","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/layers/Scatter/Scatter.jsx")),(m="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&m(e)},831677:(e,t,o)=>{o.d(t,{lb:()=>s});var r,a=o(629612);e=o.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const i=1609.34;function s(e,t){return"square_m"===e?Math.sqrt(t/Math.PI):"radius_m"===e?t:"radius_km"===e?1e3*t:"radius_miles"===e?t*i:"square_km"===e?1e3*Math.sqrt(t/Math.PI):"square_miles"===e?Math.sqrt(t/Math.PI)*i:null}const _=40075.16;var n,l;(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(n.register({bearing:0,latitude:31.222656842808707,longitude:6.85236157047845,pitch:0,zoom:1},"defaultViewport","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/utils/geo.js"),n.register(i,"METER_TO_MILE","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/utils/geo.js"),n.register(s,"unitToRadius","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/utils/geo.js"),n.register(_,"EARTH_CIRCUMFERENCE_KM","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/utils/geo.js"),n.register(1.60934,"MILES_PER_KM","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/utils/geo.js"),n.register((function(e,t,o){const r=t*(Math.PI/180),i=_*Math.cos(r)/2**(o+9);return(0,a.v)(e/i,2)}),"kmToPixels","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/utils/geo.js")),(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&l(e)},629612:(e,t,o)=>{var r,a,i;function s(e,t){let o;return o=t?Math.round(e*(t=10**t))/t:Math.round(e),o}o.d(t,{v:()=>s}),e=o.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&a.register(s,"roundDecimal","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/utils/utils.js"),(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&i(e)},323270:()=>{},241667:(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{G:()=>createDeckGLComponent,B:()=>createCategoricalDeckGLComponent});var lodash_isEqual__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(618446),lodash_isEqual__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash_isEqual__WEBPACK_IMPORTED_MODULE_0__),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(667294),_DeckGLContainer__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(287026),_CategoricalDeckGLContainer__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(639023),_utils_fitViewport__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(74020),_emotion_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(211965),enterModule;module=__webpack_require__.hmd(module),enterModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0,enterModule&&enterModule(module);var __signature__="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},reactHotLoader,leaveModule;function createDeckGLComponent(getLayer,getPoints){class Component extends react__WEBPACK_IMPORTED_MODULE_1__.PureComponent{constructor(e){super(e),this.containerRef=react__WEBPACK_IMPORTED_MODULE_1__.createRef(),this.setTooltip=e=>{const{current:t}=this.containerRef;t&&(null==t||t.setTooltip(e))};const{width:t,height:o,formData:r}=e;let{viewport:a}=e;r.autozoom&&(a=(0,_utils_fitViewport__WEBPACK_IMPORTED_MODULE_4__.Z)(a,{width:t,height:o,points:getPoints(e.payload.data.features)})),this.state={viewport:a,layer:this.computeLayer(e)},this.onViewportChange=this.onViewportChange.bind(this)}UNSAFE_componentWillReceiveProps(e){const t={...e.formData,viewport:null},o={...this.props.formData,viewport:null};lodash_isEqual__WEBPACK_IMPORTED_MODULE_0___default()(t,o)&&e.payload===this.props.payload||this.setState({layer:this.computeLayer(e)})}onViewportChange(e){this.setState({viewport:e})}computeLayer(e){const{formData:t,payload:o,onAddFilter:r}=e;return getLayer(t,o,r,this.setTooltip)}render(){const{formData:e,payload:t,setControlValue:o,height:r,width:a}=this.props,{layer:i,viewport:s}=this.state;return(0,_emotion_react__WEBPACK_IMPORTED_MODULE_5__.tZ)(_DeckGLContainer__WEBPACK_IMPORTED_MODULE_2__.F,{ref:this.containerRef,mapboxApiAccessToken:t.data.mapboxApiKey,viewport:s,layers:[i],mapStyle:e.mapbox_style,setControlValue:o,width:a,height:r,onViewportChange:this.onViewportChange})}__reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}return Component}function createCategoricalDeckGLComponent(e,t){return function(o){const{datasource:r,formData:a,height:i,payload:s,setControlValue:_,viewport:n,width:l}=o;return(0,_emotion_react__WEBPACK_IMPORTED_MODULE_5__.tZ)(_CategoricalDeckGLContainer__WEBPACK_IMPORTED_MODULE_3__.Z,{datasource:r,formData:a,mapboxApiKey:s.data.mapboxApiKey,setControlValue:_,viewport:n,getLayer:e,payload:s,getPoints:t,width:l,height:i})}}reactHotLoader="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0,reactHotLoader&&(reactHotLoader.register(createDeckGLComponent,"createDeckGLComponent","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/factory.tsx"),reactHotLoader.register(createCategoricalDeckGLComponent,"createCategoricalDeckGLComponent","/Users/chenming/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/factory.tsx")),leaveModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0,leaveModule&&leaveModule(module)}}]);