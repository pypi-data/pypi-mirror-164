"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[6693],{696693:(e,t,r)=>{r.r(t),r.d(t,{default:()=>c});var n,a,l,s=r(667294),o=r(263475),u=r(211965);function c({height:e,width:t,echartOptions:r,setDataMask:n,labelMap:a,groupby:l,selectedValues:c,formData:d}){const i=(0,s.useCallback)((e=>{if(!d.emitFilter)return;const t=e.map((e=>a[e]));n({extraFormData:{filters:0===e.length?[]:l.map(((e,r)=>{const n=t.map((e=>e[r]));return null==n?{col:e,op:"IS NULL"}:{col:e,op:"IN",val:n}}))},filterState:{value:t.length?t:null,selectedValues:e.length?e:null}})}),[l,a,n,c]),f={click:e=>{const{name:t}=e,r=Object.values(c);r.includes(t)?i(r.filter((e=>e!==t))):i([t])}};return(0,u.tZ)(o.Z,{height:e,width:t,echartOptions:r,eventHandlers:f,selectedValues:c})}e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e),("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e})(c,"useCallback{handleChange}"),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&a.register(c,"EchartsFunnel","/Users/chenming/superset/superset-frontend/plugins/plugin-chart-echarts/src/Funnel/EchartsFunnel.tsx"),(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&l(e)},263475:(e,t,r)=>{r.d(t,{Z:()=>f});var n,a=r(667294),l=r(751995),s=r(229027),o=r(211965);e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e};const c=l.iK.div`
  height: ${({height:e})=>e};
  width: ${({width:e})=>e};
`;function d({width:e,height:t,echartOptions:r,eventHandlers:n,zrEventHandlers:l,selectedValues:u={}},d){const i=(0,a.useRef)(null),f=(0,a.useRef)(),h=(0,a.useMemo)((()=>Object.keys(u)||[]),[u]),p=(0,a.useRef)([]);return(0,a.useImperativeHandle)(d,(()=>({getEchartInstance:()=>f.current}))),(0,a.useEffect)((()=>{i.current&&(f.current||(f.current=(0,s.S1)(i.current)),Object.entries(n||{}).forEach((([e,t])=>{var r,n;null==(r=f.current)||r.off(e),null==(n=f.current)||n.on(e,t)})),Object.entries(l||{}).forEach((([e,t])=>{var r,n;null==(r=f.current)||r.getZr().off(e),null==(n=f.current)||n.getZr().on(e,t)})),f.current.setOption(r,!0))}),[r,n,l]),(0,a.useEffect)((()=>{f.current&&(f.current.dispatchAction({type:"downplay",dataIndex:p.current.filter((e=>!h.includes(e)))}),h.length&&f.current.dispatchAction({type:"highlight",dataIndex:h}),p.current=h)}),[h]),(0,a.useEffect)((()=>{f.current&&f.current.resize({width:e,height:t})}),[e,t]),(0,o.tZ)(c,{ref:i,height:t,width:e})}u(d,"useRef{divRef}\nuseRef{chartRef}\nuseMemo{currentSelection}\nuseRef{previousSelection}\nuseImperativeHandle{}\nuseEffect{}\nuseEffect{}\nuseEffect{}",(()=>[a.useImperativeHandle]));const i=(0,a.forwardRef)(d),f=i;var h,p;(h="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(h.register(c,"Styles","/Users/chenming/superset/superset-frontend/plugins/plugin-chart-echarts/src/components/Echart.tsx"),h.register(d,"Echart","/Users/chenming/superset/superset-frontend/plugins/plugin-chart-echarts/src/components/Echart.tsx"),h.register(i,"default","/Users/chenming/superset/superset-frontend/plugins/plugin-chart-echarts/src/components/Echart.tsx")),(p="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&p(e)}}]);