"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[3535],{3535:(e,t,n)=>{n.r(t),n.d(t,{default:()=>s});var r,a=n(943323),o=n(20720);e=n.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const i=(0,a.Z)(o.Z),s=i;var u,l;(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&u.register(i,"default","/Users/chenming/superset/superset-frontend/plugins/legacy-plugin-chart-treemap/src/ReactTreemap.js"),(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&l(e)},20720:(e,t,n)=>{n.d(t,{Z:()=>w});var r=n(644059),a=n(694017);function o(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function i(e,t,n,r,a){for(var o,i=e.children,s=-1,u=i.length,l=e.value&&(r-t)/e.value;++s<u;)(o=i[s]).y0=n,o.y1=a,o.x0=t,o.x1=t+=o.value*l}function s(e,t,n,r,a){for(var o,i=e.children,s=-1,u=i.length,l=e.value&&(a-n)/e.value;++s<u;)(o=i[s]).x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*l}const u=function e(t){function n(e,n,r,a,o){!function(e,t,n,r,a,o){for(var u,l,c,d,p,h,f,g,m,v,y,_=[],b=t.children,x=0,L=0,M=b.length,T=t.value;x<M;){c=a-n,d=o-r;do{p=b[L++].value}while(!p&&L<M);for(h=f=p,y=p*p*(v=Math.max(d/c,c/d)/(T*e)),m=Math.max(f/y,y/h);L<M;++L){if(p+=l=b[L].value,l<h&&(h=l),l>f&&(f=l),y=p*p*v,(g=Math.max(f/y,y/h))>m){p-=l;break}m=g}_.push(u={value:p,dice:c<d,children:b.slice(x,L)}),u.dice?i(u,n,r,a,T?r+=d*p/T:o):s(u,n,r,T?n+=c*p/T:a,o),T-=p,x=L}}(t,e,n,r,a,o)}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}((1+Math.sqrt(5))/2);function l(e){if("function"!=typeof e)throw new Error;return e}function c(){return 0}function d(e){return function(){return e}}var p,h=n(671939),f=n(45697),g=n.n(f),m=n(767190),v=n(328062);e=n.hmd(e),(p="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&p(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const y=e=>()=>e().apply(void 0,arguments),_=g().shape({name:g().string,value:g().number.isRequired}),b={name:g().string,children:g().arrayOf(g().oneOfType([g().shape(y((()=>b))),_]))},x=g().oneOfType([g().shape(b),_]),L={data:g().arrayOf(x),width:g().number,height:g().number,colorScheme:g().string,margin:g().shape({top:g().number,right:g().number,bottom:g().number,left:g().number}),numberFormat:g().string,treemapRatio:g().number};function M(e){return function(t){var n;(n=t.ancestors().map((e=>e.node)),"string"==typeof n?new r.Y1([document.querySelectorAll(n)],[document.documentElement]):new r.Y1([null==n?[]:n],r.Jz)).classed("node--hover",e).select("rect").attr("width",(t=>t.x1-t.x0-e)).attr("height",(t=>t.y1-t.y0-e))}}function T(e,t){const{data:n,width:r,height:i,numberFormat:s,colorScheme:p,treemapRatio:f}=t,g=(0,a.Z)(e);g.classed("superset-legacy-chart-treemap",!0);const y=(0,m.JB)(s),_=v.getScale(p),b=n;if(g.selectAll("*").remove(),b.length>0){const[e]=b,t=function(){var e=u,t=!1,n=1,r=1,a=[0],i=c,s=c,p=c,h=c,f=c;function g(e){return e.x0=e.y0=0,e.x1=n,e.y1=r,e.eachBefore(m),a=[0],t&&e.eachBefore(o),e}function m(t){var n=a[t.depth],r=t.x0+n,o=t.y0+n,u=t.x1-n,l=t.y1-n;u<r&&(r=u=(r+u)/2),l<o&&(o=l=(o+l)/2),t.x0=r,t.y0=o,t.x1=u,t.y1=l,t.children&&(n=a[t.depth+1]=i(t)/2,r+=f(t)-n,o+=s(t)-n,(u-=p(t)-n)<r&&(r=u=(r+u)/2),(l-=h(t)-n)<o&&(o=l=(o+l)/2),e(t,r,o,u,l))}return g.round=function(e){return arguments.length?(t=!!e,g):t},g.size=function(e){return arguments.length?(n=+e[0],r=+e[1],g):[n,r]},g.tile=function(t){return arguments.length?(e=l(t),g):e},g.padding=function(e){return arguments.length?g.paddingInner(e).paddingOuter(e):g.paddingInner()},g.paddingInner=function(e){return arguments.length?(i="function"==typeof e?e:d(+e),g):i},g.paddingOuter=function(e){return arguments.length?g.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):g.paddingTop()},g.paddingTop=function(e){return arguments.length?(s="function"==typeof e?e:d(+e),g):s},g.paddingRight=function(e){return arguments.length?(p="function"==typeof e?e:d(+e),g):p},g.paddingBottom=function(e){return arguments.length?(h="function"==typeof e?e:d(+e),g):h},g.paddingLeft=function(e){return arguments.length?(f="function"==typeof e?e:d(+e),g):f},g}().size([r,i]).paddingOuter(3).paddingTop(19).paddingInner(1).tile(u.ratio(f)).round(!0),n=t((0,h.ZP)(e).sum((e=>e.value)).sort(((e,t)=>t.height-e.height||t.value-e.value))),a=g.append("svg").attr("class","treemap").attr("width",r).attr("height",i).selectAll(".node").data(n.descendants()).enter().append("g").attr("transform",(e=>`translate(${e.x0},${e.y0})`)).attr("class","node").each((function(e){e.node=this})).on("mouseover",M(!0)).on("mouseout",M(!1));a.append("rect").attr("id",(e=>`rect-${e.data.name}`)).attr("width",(e=>e.x1-e.x0)).attr("height",(e=>e.y1-e.y0)).style("fill",(e=>_(e.depth))),a.append("clipPath").attr("id",(e=>`clip-${e.data.name}`)).append("use").attr("xlink:href",(e=>`#rect-${e.data.name}`));const s=a.append("text").attr("clip-path",(e=>`url(#clip-${e.data.name})`));s.filter((e=>e.children)).selectAll("tspan").data((e=>e.data.name.slice(Math.max(0,e.data.name.lastIndexOf(".")+1)).split(/(?=[A-Z][^A-Z])/g).concat(`Â ${y(e.value)}`))).enter().append("tspan").attr("x",((e,t)=>t?null:4)).attr("y",13).text((e=>e)),s.filter((e=>!e.children)).selectAll("tspan").data((e=>e.data.name.slice(Math.max(0,e.data.name.lastIndexOf(".")+1)).split(/(?=[A-Z][^A-Z])/g).concat(y(e.value)))).enter().append("tspan").attr("x",4).attr("y",((e,t)=>13+10*t)).text((e=>e)),a.append("title").text((e=>`${e.data.name}\n${y(e.value)}`))}}T.displayName="Treemap",T.propTypes=L;const H=T,w=H;var G,R;(G="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(G.register(y,"lazyFunction","/Users/chenming/superset/superset-frontend/plugins/legacy-plugin-chart-treemap/src/Treemap.js"),G.register(_,"leafType","/Users/chenming/superset/superset-frontend/plugins/legacy-plugin-chart-treemap/src/Treemap.js"),G.register(b,"parentShape","/Users/chenming/superset/superset-frontend/plugins/legacy-plugin-chart-treemap/src/Treemap.js"),G.register(x,"nodeType","/Users/chenming/superset/superset-frontend/plugins/legacy-plugin-chart-treemap/src/Treemap.js"),G.register(L,"propTypes","/Users/chenming/superset/superset-frontend/plugins/legacy-plugin-chart-treemap/src/Treemap.js"),G.register(M,"hovered","/Users/chenming/superset/superset-frontend/plugins/legacy-plugin-chart-treemap/src/Treemap.js"),G.register(T,"Treemap","/Users/chenming/superset/superset-frontend/plugins/legacy-plugin-chart-treemap/src/Treemap.js"),G.register(H,"default","/Users/chenming/superset/superset-frontend/plugins/legacy-plugin-chart-treemap/src/Treemap.js")),(R="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&R(e)},671939:(e,t,n)=>{function r(e){var t=0,n=e.children,r=n&&n.length;if(r)for(;--r>=0;)t+=n[r].value;else t=1;e.value=t}function a(e,t){var n,r,a,i,l,c=new u(e),d=+e.value&&(c.value=e.value),p=[c];for(null==t&&(t=o);n=p.pop();)if(d&&(n.value=+n.data.value),(a=t(n.data))&&(l=a.length))for(n.children=new Array(l),i=l-1;i>=0;--i)p.push(r=n.children[i]=new u(a[i])),r.parent=n,r.depth=n.depth+1;return c.eachBefore(s)}function o(e){return e.children}function i(e){e.data=e.data.data}function s(e){var t=0;do{e.height=t}while((e=e.parent)&&e.height<++t)}function u(e){this.data=e,this.depth=this.height=0,this.parent=null}n.d(t,{ZP:()=>a}),u.prototype=a.prototype={constructor:u,count:function(){return this.eachAfter(r)},each:function(e){var t,n,r,a,o=this,i=[o];do{for(t=i.reverse(),i=[];o=t.pop();)if(e(o),n=o.children)for(r=0,a=n.length;r<a;++r)i.push(n[r])}while(i.length);return this},eachAfter:function(e){for(var t,n,r,a=this,o=[a],i=[];a=o.pop();)if(i.push(a),t=a.children)for(n=0,r=t.length;n<r;++n)o.push(t[n]);for(;a=i.pop();)e(a);return this},eachBefore:function(e){for(var t,n,r=this,a=[r];r=a.pop();)if(e(r),t=r.children)for(n=t.length-1;n>=0;--n)a.push(t[n]);return this},sum:function(e){return this.eachAfter((function(t){for(var n=+e(t.data)||0,r=t.children,a=r&&r.length;--a>=0;)n+=r[a].value;t.value=n}))},sort:function(e){return this.eachBefore((function(t){t.children&&t.children.sort(e)}))},path:function(e){for(var t=this,n=function(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),a=null;for(e=n.pop(),t=r.pop();e===t;)a=e,e=n.pop(),t=r.pop();return a}(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var a=r.length;e!==n;)r.splice(a,0,e),e=e.parent;return r},ancestors:function(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},descendants:function(){var e=[];return this.each((function(t){e.push(t)})),e},leaves:function(){var e=[];return this.eachBefore((function(t){t.children||e.push(t)})),e},links:function(){var e=this,t=[];return e.each((function(n){n!==e&&t.push({source:n.parent,target:n})})),t},copy:function(){return a(this).eachBefore(i)}}},943323:(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>reactify});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(667294),_emotion_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(211965),enterModule;module=__webpack_require__.hmd(module),enterModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0,enterModule&&enterModule(module);var __signature__="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},reactHotLoader,leaveModule;function reactify(renderFn,callbacks){class ReactifiedComponent extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(e){super(e),this.container=void 0,this.setContainerRef=this.setContainerRef.bind(this)}componentDidMount(){this.execute()}componentDidUpdate(){this.execute()}componentWillUnmount(){this.container=void 0,null!=callbacks&&callbacks.componentWillUnmount&&callbacks.componentWillUnmount.bind(this)()}setContainerRef(e){this.container=e}execute(){this.container&&renderFn(this.container,this.props)}render(){const{id:e,className:t}=this.props;return(0,_emotion_react__WEBPACK_IMPORTED_MODULE_1__.tZ)("div",{ref:this.setContainerRef,id:e,className:t})}__reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}const ReactifiedClass=ReactifiedComponent;return renderFn.displayName&&(ReactifiedClass.displayName=renderFn.displayName),renderFn.propTypes&&(ReactifiedClass.propTypes={...ReactifiedClass.propTypes,...renderFn.propTypes}),renderFn.defaultProps&&(ReactifiedClass.defaultProps=renderFn.defaultProps),ReactifiedComponent}reactHotLoader="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0,reactHotLoader&&reactHotLoader.register(reactify,"reactify","/Users/chenming/superset/superset-frontend/packages/superset-ui-core/src/chart/components/reactify.tsx"),leaveModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0,leaveModule&&leaveModule(module)}}]);