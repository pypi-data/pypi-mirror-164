"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[9452],{129848:(e,t,s)=>{s.d(t,{Z:()=>c}),s(667294);var a,l=s(751995),n=s(358593),r=s(87693),o=s(211965);e=s.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const i=l.iK.span`
  white-space: nowrap;
  min-width: 100px;
  svg,
  i {
    margin-right: 8px;

    &:hover {
      path {
        fill: ${({theme:e})=>e.colors.primary.base};
      }
    }
  }
`,d=l.iK.span`
  color: ${({theme:e})=>e.colors.grayscale.base};
`;function c({actions:e}){return(0,o.tZ)(i,{className:"actions"},e.map(((e,t)=>{const s=r.Z[e.icon];return e.tooltip?(0,o.tZ)(n.u,{id:`${e.label}-tooltip`,title:e.tooltip,placement:e.placement,key:t},(0,o.tZ)(d,{role:"button",tabIndex:0,className:"action-button","data-test":e.label,onClick:e.onClick},(0,o.tZ)(s,null))):(0,o.tZ)(d,{role:"button",tabIndex:0,className:"action-button",onClick:e.onClick,"data-test":e.label,key:t},(0,o.tZ)(s,null))})))}var u,p;(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(u.register(i,"StyledActions","/Users/chenming/superset/superset-frontend/src/components/ListView/ActionsBar.tsx"),u.register(d,"ActionWrapper","/Users/chenming/superset/superset-frontend/src/components/ListView/ActionsBar.tsx"),u.register(c,"ActionsBar","/Users/chenming/superset/superset-frontend/src/components/ListView/ActionsBar.tsx")),(p="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&p(e)},690909:(e,t,s)=>{s.d(t,{Z:()=>S});var a,l=s(667294),n=s(751995),r=s(455867),o=s(34858),i=s(87693),d=s(440768),c=s(574520),u=s(414114),p=s(794670),m=s(211965);e=s.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);var g="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e};const f=n.iK.div`
  margin: ${({theme:e})=>2*e.gridUnit}px auto
    ${({theme:e})=>4*e.gridUnit}px auto;
`,h=(0,n.iK)(p.ry)`
  border-radius: ${({theme:e})=>e.borderRadius}px;
  border: 1px solid ${({theme:e})=>e.colors.secondary.light2};
`,b=n.iK.div`
  margin-bottom: ${({theme:e})=>10*e.gridUnit}px;

  .control-label {
    margin-bottom: ${({theme:e})=>2*e.gridUnit}px;
  }

  .required {
    margin-left: ${({theme:e})=>e.gridUnit/2}px;
    color: ${({theme:e})=>e.colors.error.base};
  }

  input[type='text'] {
    padding: ${({theme:e})=>1.5*e.gridUnit}px
      ${({theme:e})=>2*e.gridUnit}px;
    border: 1px solid ${({theme:e})=>e.colors.grayscale.light2};
    border-radius: ${({theme:e})=>e.gridUnit}px;
    width: 50%;
  }
`,C=({addDangerToast:e,onCssTemplateAdd:t,onHide:s,show:a,cssTemplate:n=null})=>{const[u,p]=(0,l.useState)(!0),[g,C]=(0,l.useState)(null),[y,S]=(0,l.useState)(!0),v=null!==n,{state:{loading:Z,resource:w},fetchResource:_,createResource:L,updateResource:H}=(0,o.LE)("css_template",(0,r.t)("css_template"),e),T=()=>{S(!0),s()};return(0,l.useEffect)((()=>{if(v&&(!g||!g.id||n&&n.id!==g.id||y&&a)){if(n&&null!==n.id&&!Z){const e=n.id||0;_(e)}}else!v&&(!g||g.id||y&&a)&&C({template_name:"",css:""})}),[n]),(0,l.useEffect)((()=>{w&&C(w)}),[w]),(0,l.useEffect)((()=>{g&&g.template_name.length&&g.css&&g.css.length?p(!1):p(!0)}),[g?g.template_name:"",g?g.css:""]),y&&a&&S(!1),(0,m.tZ)(c.Z,{disablePrimaryButton:u,onHandledPrimaryAction:()=>{if(v){if(g&&g.id){const e=g.id;delete g.id,delete g.created_by,H(e,g).then((e=>{e&&(t&&t(),T())}))}}else g&&L(g).then((e=>{e&&(t&&t(),T())}))},onHide:T,primaryButtonName:v?(0,r.t)("Save"):(0,r.t)("Add"),show:a,width:"55%",title:(0,m.tZ)("h4",{"data-test":"css-template-modal-title"},v?(0,m.tZ)(i.Z.EditAlt,{css:d.xL}):(0,m.tZ)(i.Z.PlusLarge,{css:d.xL}),v?(0,r.t)("Edit CSS template properties"):(0,r.t)("Add CSS template"))},(0,m.tZ)(f,null,(0,m.tZ)("h4",null,(0,r.t)("Basic information"))),(0,m.tZ)(b,null,(0,m.tZ)("div",{className:"control-label"},(0,r.t)("CSS template name"),(0,m.tZ)("span",{className:"required"},"*")),(0,m.tZ)("input",{name:"template_name",onChange:e=>{const{target:t}=e,s={...g,template_name:g?g.template_name:"",css:g?g.css:""};s[t.name]=t.value,C(s)},type:"text",value:null==g?void 0:g.template_name})),(0,m.tZ)(b,null,(0,m.tZ)("div",{className:"control-label"},(0,r.t)("css"),(0,m.tZ)("span",{className:"required"},"*")),(0,m.tZ)(h,{onChange:e=>{const t={...g,template_name:g?g.template_name:"",css:e};C(t)},value:null==g?void 0:g.css,width:"100%"})))};g(C,"useState{[disableSave, setDisableSave](true)}\nuseState{[currentCssTemplate, setCurrentCssTemplate](null)}\nuseState{[isHidden, setIsHidden](true)}\nuseSingleViewResource{{ state: { loading, resource }, fetchResource, createResource, updateResource, }}\nuseEffect{}\nuseEffect{}\nuseEffect{}",(()=>[o.LE]));const y=(0,u.Z)(C),S=y;var v,Z;(v="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(v.register(f,"StyledCssTemplateTitle","/Users/chenming/superset/superset-frontend/src/views/CRUD/csstemplates/CssTemplateModal.tsx"),v.register(h,"StyledCssEditor","/Users/chenming/superset/superset-frontend/src/views/CRUD/csstemplates/CssTemplateModal.tsx"),v.register(b,"TemplateContainer","/Users/chenming/superset/superset-frontend/src/views/CRUD/csstemplates/CssTemplateModal.tsx"),v.register(C,"CssTemplateModal","/Users/chenming/superset/superset-frontend/src/views/CRUD/csstemplates/CssTemplateModal.tsx"),v.register(y,"default","/Users/chenming/superset/superset-frontend/src/views/CRUD/csstemplates/CssTemplateModal.tsx")),(Z="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&Z(e)},899163:(e,t,s)=>{s.r(t),s.d(t,{default:()=>_});var a,l=s(667294),n=s(455867),r=s(431069),o=s(115926),i=s.n(o),d=s(730381),c=s.n(d),u=s(34858),p=s(440768),m=s(414114),g=s(620755),f=s(217198),h=s(358593),b=s(419259),C=s(129848),y=s(550859),S=s(690909),v=s(211965);function Z({addDangerToast:e,addSuccessToast:t,user:s}){const{state:{loading:a,resourceCount:o,resourceCollection:d,bulkSelectEnabled:m},hasPerm:Z,fetchData:w,refreshData:_,toggleBulkSelect:L}=(0,u.Yi)("css_template",(0,n.t)("CSS templates"),e),[H,T]=(0,l.useState)(!1),[x,U]=(0,l.useState)(null),D=Z("can_write"),G=Z("can_write"),$=Z("can_write"),[k,M]=(0,l.useState)(null),A=[{id:"template_name",desc:!0}],E=(0,l.useMemo)((()=>[{accessor:"template_name",Header:(0,n.t)("Name")},{Cell:({row:{original:{changed_on_delta_humanized:e,changed_by:t}}})=>{let s="null";return t&&(s=`${t.first_name} ${t.last_name}`),(0,v.tZ)(h.u,{id:"allow-run-async-header-tooltip",title:(0,n.t)("Last modified by %s",s),placement:"right"},(0,v.tZ)("span",null,e))},Header:(0,n.t)("Last modified"),accessor:"changed_on_delta_humanized",size:"xl",disableSortBy:!0},{Cell:({row:{original:{created_on:e}}})=>{const t=new Date(e),s=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return c()(s).fromNow()},Header:(0,n.t)("Created on"),accessor:"created_on",size:"xl",disableSortBy:!0},{accessor:"created_by",disableSortBy:!0,Header:(0,n.t)("Created by"),Cell:({row:{original:{created_by:e}}})=>e?`${e.first_name} ${e.last_name}`:"",size:"xl"},{Cell:({row:{original:e}})=>{const t=[G?{label:"edit-action",tooltip:(0,n.t)("Edit template"),placement:"bottom",icon:"Edit",onClick:()=>(U(e),void T(!0))}:null,$?{label:"delete-action",tooltip:(0,n.t)("Delete template"),placement:"bottom",icon:"Trash",onClick:()=>M(e)}:null].filter((e=>!!e));return(0,v.tZ)(C.Z,{actions:t})},Header:(0,n.t)("Actions"),id:"actions",disableSortBy:!0,hidden:!G&&!$,size:"xl"}]),[$,D]),R={name:(0,n.t)("CSS templates")},B=[];D&&B.push({name:(0,v.tZ)(l.Fragment,null,(0,v.tZ)("i",{className:"fa fa-plus"})," ",(0,n.t)("CSS template")),buttonStyle:"primary",onClick:()=>{U(null),T(!0)}}),$&&B.push({name:(0,n.t)("Bulk select"),onClick:L,buttonStyle:"secondary"}),R.buttons=B;const N=(0,l.useMemo)((()=>[{Header:(0,n.t)("Created by"),id:"created_by",input:"select",operator:y.p.relationOneMany,unfilteredLabel:"All",fetchSelects:(0,p.tm)("css_template","created_by",(0,p.v$)((e=>(0,n.t)("An error occurred while fetching dataset datasource values: %s",e))),s),paginate:!0},{Header:(0,n.t)("Search"),id:"template_name",input:"search",operator:y.p.contains}]),[]);return(0,v.tZ)(l.Fragment,null,(0,v.tZ)(g.Z,R),(0,v.tZ)(S.Z,{addDangerToast:e,cssTemplate:x,onCssTemplateAdd:()=>_(),onHide:()=>T(!1),show:H}),k&&(0,v.tZ)(f.Z,{description:(0,n.t)("This action will permanently delete the template."),onConfirm:()=>{k&&(({id:s,template_name:a})=>{r.Z.delete({endpoint:`/api/v1/css_template/${s}`}).then((()=>{_(),M(null),t((0,n.t)("Deleted: %s",a))}),(0,p.v$)((t=>e((0,n.t)("There was an issue deleting %s: %s",a,t)))))})(k)},onHide:()=>M(null),open:!0,title:(0,n.t)("Delete Template?")}),(0,v.tZ)(b.Z,{title:(0,n.t)("Please confirm"),description:(0,n.t)("Are you sure you want to delete the selected templates?"),onConfirm:s=>{r.Z.delete({endpoint:`/api/v1/css_template/?q=${i().encode(s.map((({id:e})=>e)))}`}).then((({json:e={}})=>{_(),t(e.message)}),(0,p.v$)((t=>e((0,n.t)("There was an issue deleting the selected templates: %s",t)))))}},(e=>{const t=$?[{key:"delete",name:(0,n.t)("Delete"),onSelect:e,type:"danger"}]:[];return(0,v.tZ)(y.Z,{className:"css-templates-list-view",columns:E,count:o,data:d,fetchData:w,filters:N,initialSort:A,loading:a,pageSize:25,bulkActions:t,bulkSelectEnabled:m,disableBulkSelect:L})})))}e=s.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e),("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e})(Z,"useListViewResource{{ state: { loading, resourceCount: templatesCount, resourceCollection: templates, bulkSelectEnabled, }, hasPerm, fetchData, refreshData, toggleBulkSelect, }}\nuseState{[cssTemplateModalOpen, setCssTemplateModalOpen](false)}\nuseState{[currentCssTemplate, setCurrentCssTemplate](null)}\nuseState{[templateCurrentlyDeleting, setTemplateCurrentlyDeleting](null)}\nuseMemo{columns}\nuseMemo{filters}",(()=>[u.Yi]));const w=(0,m.Z)(Z),_=w;var L,H;(L="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(L.register(25,"PAGE_SIZE","/Users/chenming/superset/superset-frontend/src/views/CRUD/csstemplates/CssTemplatesList.tsx"),L.register(Z,"CssTemplatesList","/Users/chenming/superset/superset-frontend/src/views/CRUD/csstemplates/CssTemplatesList.tsx"),L.register(w,"default","/Users/chenming/superset/superset-frontend/src/views/CRUD/csstemplates/CssTemplatesList.tsx")),(H="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&H(e)}}]);