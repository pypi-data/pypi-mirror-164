"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[2341],{2798:(e,t,l)=>{l.r(t),l.d(t,{default:()=>le});var a=l(6252),r=l(9963),s=l(3577);const o={class:"card"},n={class:"card-body"},i=(0,a._)("h1",null,"Request for Change",-1),d=(0,a._)("hr",null,null,-1),c=(0,a._)("hr",null,null,-1),u={class:"row"},m=(0,a._)("div",{class:"col-md-4"},[(0,a._)("h2",null,"Type and Version"),(0,a._)("p",{class:"text-instructions"}," Please specify how urgent this RFC's status really is. Optionally you can also specify the version or release number. ")],-1),f={class:"col-md-4"},p={class:"form-group"},h=(0,a.Uk)(" Request for Change Type: "),y={key:0,class:"error"},v={class:"col-md-4"},g={class:"form-group"},_=(0,a._)("label",null,"Version/Release Number",-1),M=(0,a._)("hr",null,null,-1),R={class:"row"},w=(0,a._)("div",{class:"col-md-4"},[(0,a._)("h2",null,"Important Dates"),(0,a._)("p",{class:"text-instructions"}," Please supply the implementation start and end dates. Please also suply the release date of the change to the general consumer. ")],-1),S={class:"row col-md-8"},b={class:"col-md-12"},C={key:0,class:"error"},k={class:"col-sm-4"},D={class:"form-group"},T=(0,a._)("label",null,"Implementation Start: ",-1),$={class:"col-sm-4"},q={class:"form-group"},L=(0,a._)("label",null,"Implementation End: ",-1),U={class:"col-sm-4"},I={class:"form-group"},E=(0,a._)("label",null,"Release Date: ",-1),V=(0,a._)("hr",null,null,-1),x={class:"row"},B=(0,a._)("div",{class:"col-md-4"},[(0,a._)("h2",null,"Change LEAD: "),(0,a._)("p",{class:"text-instructions"}," Please supply the LEAD who will be leading this Request for Change. ")],-1),F={class:"col-md-4"},P={class:"table user-table-module"},Z=["src"],O=(0,a._)("div",{class:"spacer"},null,-1),A={class:"user-card-email"},N={key:0},W={key:1,class:"row submit-row"},H={class:"col-md-12"};var j=l(1010),Y=l(9974),z=l(9860),G=l(4250),J=l(3058),K=l(8416),Q=l(3766),X=l(2587);const ee=l(9669),te={name:"RfcInformation",setup:()=>({v$:(0,Q.ZP)()}),components:{NDatePicker:Y.Z,NSelect:z.Z,RfcDescription:j.Z},props:{groupLeaderCount:{type:Number,default:0},isReadOnly:{type:Boolean,default:!1},rfcChangeLead:{type:Array,default:()=>[]},rfcResults:{type:Array,default:()=>[]},rootUrl:{type:String,default:"/"},staticUrl:{type:String,default:"/"},userLevel:{type:Number,default:0}},computed:{...(0,G.Se)({changeTaskCount:"getChangeTaskCount",rfcImplementationEndModel:"getEndDate",rfcImplementationStartModel:"getStartDate",rfcReleaseModel:"getReleaseDateModel"}),checkDateValidation:function(){const e=!this.v$.rfcImplementationStartModel.required&&this.v$.rfcImplementationStartModel.$dirty,t=!this.v$.rfcImplementationEndModel.required&&this.v$.rfcImplementationEndModel.$dirty,l=!this.v$.rfcReleaseModel.required&&this.v$.rfcReleaseModel.$dirty;return e||t||l}},mixins:[J.Z,K.Z],data(){return{rfcChangeLeadFixList:[],rfcChangeLeadModel:"",rfcTitleModel:this.rfcResults[0].fields.rfc_title,rfcSummaryModel:this.rfcResults[0].fields.rfc_summary,rfcStatus:[{label:"Draft",value:1},{label:"Waiting for approval",value:2},{label:"Approved",value:3},{label:"Started",value:4},{label:"Finished",value:5},{label:"Rejected",value:6}],rfcType:[{label:"Emergency",value:4},{label:"High",value:3},{label:"Medium",value:2},{label:"Low",value:1}],rfcTypeModel:"",rfcVersionModel:this.rfcResults[0].fields.rfc_version_number}},validations:{rfcTitleModel:{required:X.C1},rfcSummaryModel:{required:X.C1,maxLength:(0,X.BS)(63e4)},rfcImplementationStartModel:{required:X.C1},rfcImplementationEndModel:{required:X.C1},rfcReleaseModel:{required:X.C1},rfcTypeModel:{required:X.C1},rfcVersionModel:{maxLength:(0,X.BS)(25)}},methods:{updateRFC:async function(){if(!await this.v$.$validate())return void this.showValidationErrorModal();const e=new FormData;e.set("rfc_title",this.rfcTitleModel),e.set("rfc_summary",this.rfcSummaryModel),e.set("rfc_type",this.rfcTypeModel),e.set("rfc_version_number",this.rfcVersionModel),e.set("rfc_implementation_start_date",new Date(this.rfcImplementationStartModel).toISOString()),e.set("rfc_implementation_end_date",new Date(this.rfcImplementationEndModel).toISOString()),e.set("rfc_implementation_release_date",new Date(this.rfcReleaseModel).toISOString()),this.showLoadingModal("Project"),ee.post(`${this.rootUrl}rfc_information/${this.rfcResults[0].pk}/save/`,e).then((e=>{this.closeLoadingModal()})).catch((e=>{this.showErrorModal(e,this.destination)}))},updateRFCStatus:function(){const e=new FormData;e.set("rfc_status","2"),ee.post(`${this.rootUrl}rfc_information/${this.rfcResults[0].pk}/update_status/`,e).then((e=>{window.location.reload(!0)})).catch((e=>{this.showErrorModal(e,"Request for Change",this.rfcResults[0].pk)}))},updateValues:function(e){this[e.modelName]=e.modelValue}},mounted(){this.rfcTypeModel=this.rfcResults[0].fields.rfc_type,this.$store.commit({type:"updateUrl",rootUrl:this.rootUrl,staticUrl:this.staticUrl}),this.$store.commit({type:"updateUserLevel",userLevel:this.userLevel});const e=new Date(this.rfcResults[0].fields.rfc_implementation_end_date),t=new Date(this.rfcResults[0].fields.rfc_implementation_release_date),l=new Date(this.rfcResults[0].fields.rfc_implementation_start_date);this.$store.commit({type:"updateRfcDates",endDateModel:e.getTime(),releaseDateModel:t.getTime(),startDateModel:l.getTime()})}},le=(0,l(3744).Z)(te,[["render",function(e,t,l,j,Y,z){const G=(0,a.up)("rfc-description"),J=(0,a.up)("n-select"),K=(0,a.up)("n-date-picker");return(0,a.wg)(),(0,a.iD)("div",o,[(0,a._)("div",n,[i,d,(0,a.Wm)(G,{"rfc-results":l.rfcResults,"is-read-only":l.isReadOnly,onUpdate_values:t[0]||(t[0]=e=>z.updateValues(e))},null,8,["rfc-results","is-read-only"]),(0,a.kq)(" Request for Change Types and Release Number "),c,(0,a._)("div",u,[m,(0,a._)("div",f,[(0,a._)("div",p,[(0,a._)("label",null,[h,!j.v$.rfcTypeModel.required&&j.v$.rfcTypeModel.$dirty?((0,a.wg)(),(0,a.iD)("span",y," Please suppy a title.")):(0,a.kq)("v-if",!0)]),(0,a.Wm)(J,{options:Y.rfcType,disabled:l.isReadOnly,value:Y.rfcTypeModel,"onUpdate:value":t[1]||(t[1]=e=>Y.rfcTypeModel=e)},null,8,["options","disabled","value"])])]),(0,a._)("div",v,[(0,a._)("div",g,[_,(0,a.wy)((0,a._)("input",{type:"text",maxlength:"25",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=e=>Y.rfcVersionModel=e)},null,512),[[r.vModelText,Y.rfcVersionModel]])])])]),(0,a.kq)(" Implementation and Release Dates "),M,(0,a._)("div",R,[w,(0,a._)("div",S,[(0,a.kq)(" Validation row "),(0,a._)("div",b,[z.checkDateValidation?((0,a.wg)(),(0,a.iD)("span",C," Please select an appropriate date for ALL fields.")):(0,a.kq)("v-if",!0)]),(0,a.kq)(" Dates Row "),(0,a._)("div",k,[(0,a._)("div",D,[T,(0,a.Wm)(K,{type:"datetime",value:e.rfcImplementationStartModel,"onUpdate:value":t[3]||(t[3]=t=>e.rfcImplementationStartModel=t),"input-class":"form-control"},null,8,["value"])])]),(0,a._)("div",$,[(0,a._)("div",q,[L,(0,a.Wm)(K,{type:"datetime",value:e.rfcImplementationEndModel,"onUpdate:value":t[4]||(t[4]=t=>e.rfcImplementationEndModel=t),"input-class":"form-control"},null,8,["value"])])]),(0,a._)("div",U,[(0,a._)("div",I,[E,(0,a.Wm)(K,{type:"datetime",value:e.rfcReleaseModel,"onUpdate:value":t[5]||(t[5]=t=>e.rfcReleaseModel=t),"input-class":"form-control"},null,8,["value"])])])])]),(0,a.kq)(" RFC Change Lead User "),V,(0,a._)("div",x,[B,(0,a._)("div",F,[(0,a._)("table",P,[(0,a._)("tbody",null,[(0,a._)("tr",null,[(0,a._)("td",null,[(0,a._)("img",{src:`${l.staticUrl}/NearBeach/images/placeholder/people_tax.svg`,alt:"default profile",class:"default-user-profile"},null,8,Z)]),(0,a._)("td",null,[(0,a._)("strong",null,(0,s.toDisplayString)(l.rfcChangeLead[0].username)+": ",1),(0,a.Uk)((0,s.toDisplayString)(l.rfcChangeLead[0].first_name)+" "+(0,s.toDisplayString)(l.rfcChangeLead[0].last_name)+" ",1),O,(0,a._)("p",A,(0,s.toDisplayString)(l.rfcChangeLead[0].email),1)])])])])])]),(0,a.kq)(" Update Button "),l.isReadOnly?(0,a.kq)("v-if",!0):((0,a.wg)(),(0,a.iD)("hr",N)),l.isReadOnly?(0,a.kq)("v-if",!0):((0,a.wg)(),(0,a.iD)("div",W,[(0,a._)("div",H,[l.userLevel>1&&e.changeTaskCount>0?((0,a.wg)(),(0,a.iD)("a",{key:0,href:"javascript:void(0)",class:"btn btn-dark",onClick:t[6]||(t[6]=(...e)=>z.updateRFCStatus&&z.updateRFCStatus(...e))},"Submit RFC for Approval")):(0,a.kq)("v-if",!0),l.userLevel>1?((0,a.wg)(),(0,a.iD)("a",{key:1,href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:t[7]||(t[7]=(...e)=>z.updateRFC&&z.updateRFC(...e))},"Update Request for Change")):(0,a.kq)("v-if",!0)])]))])])}]])},1010:(e,t,l)=>{l.d(t,{Z:()=>w});var a=l(6252),r=l(9963);const s={class:"row"},o=(0,a._)("div",{class:"col-md-4"},[(0,a._)("h2",null,"Description"),(0,a._)("p",{class:"text-instructions"}," Place a detailed description here. This should cover what your Request For Change (RFC) will entail and why it should be implemented within the time frames specified below. ")],-1),n={class:"col-md-8",style:{"min-height":"610px"}},i={class:"form-group"},d=(0,a.Uk)(" Request for Change Title: "),c={key:0,class:"error"},u=(0,a._)("br",null,null,-1),m=(0,a.Uk)("Request for Change Summary: "),f={key:0,class:"error"},p={key:1,class:"error"},h=(0,a._)("br",null,null,-1),y=["src"];var v=l(3766),g=l(2587),_=l(7267),M=l(4250);const R={name:"RfcDescription",setup:()=>({v$:(0,v.ZP)()}),components:{editor:_.Z},props:{isReadOnly:{type:Boolean,default:!1},rfcResults:{type:Array,default:function(){return[]}}},data:()=>({rfcSummaryModel:"",rfcTitleModel:""}),computed:{...(0,M.Se)({staticUrl:"getStaticUrl"})},validations:{rfcSummaryModel:{required:g.C1,maxLength:(0,g.BS)(63e4)},rfcTitleModel:{required:g.C1,maxLength:(0,g.BS)(250)}},methods:{updateValues:function(e,t){this.$emit("update_values",{modelName:e,modelValue:t})}},watch:{rfcSummaryModel:function(){this.updateValues("rfcSummaryModel",this.rfcSummaryModel)},rfcTitleModel:function(){this.updateValues("rfcTitleModel",this.rfcTitleModel)}},updated(){this.v$.$touch(),this.$emit("update_validation",{tab:"tab_0",value:!this.v$.$invalid})},mounted(){this.rfcResults.length>0&&(this.rfcSummaryModel=this.rfcResults[0].fields.rfc_summary,this.rfcTitleModel=this.rfcResults[0].fields.rfc_title),this.v$.$touch()}},w=(0,l(3744).Z)(R,[["render",function(e,t,l,v,g,_){const M=(0,a.up)("editor");return(0,a.wg)(),(0,a.iD)("div",s,[o,(0,a._)("div",n,[(0,a._)("div",i,[(0,a._)("label",null,[d,!v.v$.rfcTitleModel.required&&v.v$.rfcTitleModel.$dirty?((0,a.wg)(),(0,a.iD)("span",c," Please suppy a title.")):(0,a.kq)("v-if",!0)]),(0,a.wy)((0,a._)("input",{type:"text",maxlength:"255",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=t=>e.rfcTitleModel=t)},null,512),[[r.vModelText,e.rfcTitleModel]])]),u,(0,a.kq)(" RFC SUMMARY "),(0,a._)("label",null,[m,!v.v$.rfcSummaryModel.required&&v.v$.rfcSummaryModel.$dirty?((0,a.wg)(),(0,a.iD)("span",f," Please supply a description.")):(0,a.kq)("v-if",!0),v.v$.rfcSummaryModel.maxLength?(0,a.kq)("v-if",!0):((0,a.wg)(),(0,a.iD)("span",p," Sorry - too many characters."))]),h,(0,a._)("img",{src:`${e.staticUrl}NearBeach/images/placeholder/body_text.svg`,class:"loader-image",alt:"loading image for Tinymce"},null,8,y),(0,a.Wm)(M,{init:{height:500,menubar:!1,plugins:["lists","table"],toolbar:["undo redo | formatselect | alignleft aligncenter alignright alignjustify","bold italic strikethrough underline backcolor | table | bullist numlist outdent indent | removeformat"]},content_css:!1,skin:!1,disabled:l.isReadOnly,modelValue:e.rfcSummaryModel,"onUpdate:modelValue":t[1]||(t[1]=t=>e.rfcSummaryModel=t)},null,8,["disabled","modelValue"])])])}]])},3058:(e,t,l)=>{l.d(t,{Z:()=>r});var a=l(5169);const r={methods:{showErrorModal:function(e,t,l){new a.u_(document.getElementById("loadingModal")).hide(),document.getElementById("errorModalContent").innerHTML=`<strong>HTML ISSUE:</strong> We could not save the new requirement<hr>${e}`,new a.u_(document.getElementById("errorModal")).show()},showValidationErrorModal:function(){document.getElementById("errorModalContent").innerHTML="<strong>FORM ISSUE:</strong> Sorry, but can you please fill out the form completely.",new a.u_(document.getElementById("errorModal")).show()}}}},8416:(e,t,l)=>{l.d(t,{Z:()=>r});var a=l(5169);const r={methods:{closeLoadingModal:function(){let e=new a.u_(document.getElementById("loadingModal"));document.getElementById("loadingModalContent").innerHTML="UPDATED SUCCESSFULLY",setTimeout((()=>{e.hide()}),1e3)},showLoadingModal:function(e){new a.u_(document.getElementById("loadingModal")).show(),document.getElementById("loadingModalContent").innerHTML=`Updating your ${e} details`}}}}}]);