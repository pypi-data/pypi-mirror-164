"use strict";(self.webpackChunkmeganote_python_editor_extension=self.webpackChunkmeganote_python_editor_extension||[]).push([[260],{260:(t,e,n)=>{n.r(e),n.d(e,{default:()=>_});var o=n(379),i=n.n(o),r=n(760);i()(r.Z,{insert:"head",singleton:!1}),r.Z.locals;var s=n(46),a=n(751);class l extends s.ABCWidgetFactory{constructor(t){super(t.factoryOptions),this._services=t.editorServices,this.options=t}createNewWidget(t){const e=this._services.factoryService.newDocumentEditor,n=new a.FileEditor({factory:t=>e(t),context:t,mimeTypeService:this._services.mimeTypeService});return this.options.instanceCreator({content:n,context:t})}}var d=n(912);new d.LabIcon({name:"meganote:rIcon",svgstr:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="xMidYMid" width="32" height="32" viewBox="0 0 724 561">\n  <defs>\n    <linearGradient id="gradientFill-1" x1="0" x2="1" y1="0" y2="1" gradientUnits="objectBoundingBox" spreadMethod="pad">\n      <stop offset="0" stop-color="rgb(203,206,208)" stop-opacity="1"/>\n      <stop offset="1" stop-color="rgb(132,131,139)" stop-opacity="1"/>\n    </linearGradient>\n    <linearGradient id="gradientFill-2" x1="0" x2="1" y1="0" y2="1" gradientUnits="objectBoundingBox" spreadMethod="pad">\n      <stop offset="0" stop-color="rgb(39,109,195)" stop-opacity="1"/>\n      <stop offset="1" stop-color="rgb(22,92,170)" stop-opacity="1"/>\n    </linearGradient>\n  </defs>\n  <path d="M361.453,485.937 C162.329,485.937 0.906,377.828 0.906,244.469 C0.906,111.109 162.329,3.000 361.453,3.000 C560.578,3.000 722.000,111.109 722.000,244.469 C722.000,377.828 560.578,485.937 361.453,485.937 ZM416.641,97.406 C265.289,97.406 142.594,171.314 142.594,262.484 C142.594,353.654 265.289,427.562 416.641,427.562 C567.992,427.562 679.687,377.033 679.687,262.484 C679.687,147.971 567.992,97.406 416.641,97.406 Z" fill="url(#gradientFill-1)" fill-rule="evenodd"/>\n  <path d="M550.000,377.000 C550.000,377.000 571.822,383.585 584.500,390.000 C588.899,392.226 596.510,396.668 602.000,402.500 C607.378,408.212 610.000,414.000 610.000,414.000 L696.000,559.000 L557.000,559.062 L492.000,437.000 C492.000,437.000 478.690,414.131 470.500,407.500 C463.668,401.969 460.755,400.000 454.000,400.000 C449.298,400.000 420.974,400.000 420.974,400.000 L421.000,558.974 L298.000,559.026 L298.000,152.938 L545.000,152.938 C545.000,152.938 657.500,154.967 657.500,262.000 C657.500,369.033 550.000,377.000 550.000,377.000 ZM496.500,241.024 L422.037,240.976 L422.000,310.026 L496.500,310.002 C496.500,310.002 531.000,309.895 531.000,274.877 C531.000,239.155 496.500,241.024 496.500,241.024 Z" fill="url(#gradientFill-2)" fill-rule="evenodd"/>\n</svg>\n'});const c=new d.LabIcon({name:"meganote:pyIcon",svgstr:'<svg width="32" height="32" viewBox="0 0 238 237" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" overflow="hidden">\n    <defs>\n        <clipPath id="clip0">\n            <path d="M706-314 944-314 944-77 706-77Z" fill-rule="evenodd" clip-rule="evenodd"/>\n        </clipPath>\n    </defs>\n    <g clip-path="url(#clip0)" transform="translate(-706 314)">\n        <path d="M792.441-295.763C786.496-295.763 781.697-290.979 781.697-285.062 781.697-279.166 786.496-274.382 792.441-274.382 798.365-274.382 803.184-279.166 803.184-285.062 803.184-290.979 798.365-295.763 792.441-295.763ZM823.472-312.998C833.277-313.043 843.484-312.329 853.336-310.724 868.899-308.185 882-296.728 882-281.516L882-228.072C882-212.398 869.282-199.557 853.336-199.557L796.03-199.557C776.58-199.557 760.189-183.169 760.189-164.641L760.189-139 740.485-139C723.817-139 714.114-150.877 710.037-167.494 704.538-189.82 704.772-203.124 710.037-224.505 714.602-243.159 729.189-253 745.857-253L767.365-253 824.693-253 824.693-260.134 767.365-260.134 767.365-281.516C767.365-297.715 771.76-306.527 796.03-310.724 804.268-312.151 813.668-312.953 823.472-312.998Z" fill="#366A96" fill-rule="evenodd"/>\n        <path d="M857.377-117.071C851.466-117.071 846.655-112.267 846.655-106.348 846.655-100.406 851.466-95.6026 857.377-95.6026 863.31-95.6026 868.099-100.406 868.099-106.348 868.099-112.267 863.31-117.071 857.377-117.071ZM889.563-253 911.007-253C927.662-253 935.502-240.696 939.614-224.39 945.334-201.743 945.589-184.804 939.614-167.148 933.828-150 927.642-138.539 911.007-138.539L882.402-138.539 825.211-138.539 825.211-131.375 882.402-131.375 882.402-109.908C882.402-93.6435 868.205-85.4055 853.796-81.2973 832.12-75.1034 814.722-76.0513 796.606-81.2973 781.476-85.6801 768-94.6332 768-109.908L768-163.568C768-179.01 780.947-192.199 796.606-192.199L853.796-192.199C872.846-192.199 889.563-208.568 889.563-227.971Z" fill="#FFC836" fill-rule="evenodd"/>\n    </g>\n</svg>\n'});var u=n(493),p=n(991),h=n(256),g=n(7),m=n(250),v=n(74),f=n(921),y=n(2),b=n(276),C=n(974),w=n(992),S=n(271),x=n.n(S);const k=(0,S.forwardRef)((({specs:t},e)=>{var n,o,i;const r=null!==(i=null===(o=Object.values(null!==(n=t.kernelspecs)&&void 0!==n?n:[])[0])||void 0===o?void 0:o.name)&&void 0!==i?i:"",[s,a]=(0,S.useState)(r);(0,S.useImperativeHandle)(e,(()=>({getSelection:()=>s})));const l=Object.keys(t.kernelspecs).length?Object.entries(t.kernelspecs).map((([t,e])=>{var n;return x().createElement("option",{key:t,value:t},null!==(n=null==e?void 0:e.display_name)&&void 0!==n?n:t)})):x().createElement("option",{key:"no-kernel",value:"no-kernel"},"No Kernel");return x().createElement("select",{className:"ScriptEditor-KernelSelector",onChange:t=>a(t.target.value),value:s},l)}));class E extends p.ReactWidget{constructor(t,e){super(),this.specs=t,this.ref=e}render(){return x().createElement(k,{ref:this.ref,specs:this.specs})}}var O=n(748);class A{constructor(){this.getKernelSpecs=async()=>(await this.kernelSpecManager.ready,await this.kernelSpecManager.specs),this.getKernelSpecsByLanguage=async t=>{var e;const n=await this.getKernelSpecs();return Object.entries(null!==(e=null==n?void 0:n.kernelspecs)&&void 0!==e?e:[]).filter((e=>{var n;return!1===(null===(n=e[1])||void 0===n?void 0:n.language.includes(t))})).forEach((t=>null==n||delete n.kernelspecs[t[0]])),n},this.kernelSpecManager=new O.KernelSpecManager}}const M="Could not start session to execute script.";class P{constructor(t){this.errorDialog=t=>(this.disableRun(!1),(0,p.showDialog)({title:"Error",body:t,buttons:[p.Dialog.okButton()]})),this.runScript=async(t,e,n,o)=>{var i;if(!t)return this.disableRun(!0),this.errorDialog("Could not run script because no supporting kernel is defined.");if(!this.sessionConnection){this.disableRun(!0);try{await this.startSession(t,e)}catch(t){return this.errorDialog(M)}if(this.sessionConnection=this.sessionConnection,!(null===(i=this.sessionConnection)||void 0===i?void 0:i.kernel))return this.errorDialog(M);const r=this.sessionConnection.kernel.requestExecute({code:n});r.onIOPub=t=>{const e={};"error"===t.msg_type?e.error={type:t.content.ename,output:t.content.evalue}:"execute_result"===t.msg_type||"display_data"===t.msg_type?"text/plain"in t.content.data?e.output=t.content.data["text/plain"]:console.log("Ignoring received message "+t):"stream"===t.msg_type?e.output=t.content.text:"status"===t.msg_type&&(e.status=t.content.execution_state),o(e)};try{await r.done,this.shutdownSession()}catch(t){console.log("Exception: done = "+JSON.stringify(t))}}},this.startSession=async(t,e)=>{const n={kernel:{name:t},path:e,type:"file",name:e};return this.sessionConnection=await this.sessionManager.startNew(n),this.sessionConnection.setPath(e),this.sessionConnection},this.shutdownSession=async()=>{var t;if(this.sessionConnection){const e=null===(t=this.sessionConnection.kernel)||void 0===t?void 0:t.name;try{this.disableRun(!1),await this.sessionConnection.shutdown(),this.sessionConnection=null,console.log(e+" kernel shut down")}catch(t){console.log("Exception: shutdown = "+JSON.stringify(t))}}},this.disableRun=t,this.kernelSpecManager=new O.KernelSpecManager,this.kernelManager=new O.KernelManager,this.sessionManager=new O.SessionManager({kernelManager:this.kernelManager}),this.sessionConnection=null}}const T="ScriptEditor-OutputArea-error",W="ScriptEditor-Run";class j extends s.DocumentWidget{constructor(t){super(t),this.initializeKernelSpecs=async()=>{var t,e;const n=await this.controller.getKernelSpecsByLanguage(this.getLanguage());if(this.kernelName=null===(e=Object.values(null!==(t=null==n?void 0:n.kernelspecs)&&void 0!==t?t:[])[0])||void 0===e?void 0:e.name,this.kernelSelectorRef=x().createRef(),null!==n){const t=new E(n,this.kernelSelectorRef);this.toolbar.insertItem(3,"select",t)}},this.createOutputAreaWidget=()=>{this.dockPanel=new d.DockPanelSvg({tabsMovable:!1}),w.Widget.attach(this.dockPanel,document.body),window.addEventListener("resize",(()=>{var t;null===(t=this.dockPanel)||void 0===t||t.fit()}));const t=new b.OutputAreaModel,e=new C.RenderMimeRegistry({initialFactories:C.standardRendererFactories});this.outputAreaWidget=new b.OutputArea({rendermime:e,model:t}),this.outputAreaWidget.addClass("ScriptEditor-OutputArea"),this.layout.addWidget(this.dockPanel)},this.runScript=async()=>{var t,e;this.runDisabled||(this.kernelName=null===(e=null===(t=this.kernelSelectorRef)||void 0===t?void 0:t.current)||void 0===e?void 0:e.getSelection(),this.resetOutputArea(),this.kernelName&&this.displayOutputArea(),await this.runner.runScript(this.kernelName,this.context.path,this.model.value.text,this.handleKernelMsg))},this.stopRun=async()=>{var t;await this.runner.shutdownSession(),(null===(t=this.dockPanel)||void 0===t?void 0:t.isEmpty)||this.updatePromptText(" ")},this.disableRun=t=>{this.runDisabled=t,document.querySelector("#"+this.id+" ."+W).disabled=t},this.resetOutputArea=()=>{var t,e,n;null===(t=this.dockPanel)||void 0===t||t.hide(),null===(e=this.outputAreaWidget)||void 0===e||e.model.clear(),null===(n=this.outputAreaWidget)||void 0===n||n.removeClass(T)},this.handleKernelMsg=async t=>{let e="";t.status?this.displayKernelStatus(t.status):(t.error?(e="Error : "+t.error.type+" - "+t.error.output,this.getOutputAreaChildWidget().addClass(T)):t.output&&(e=t.output),this.displayOutput(e))},this.createScrollButtons=t=>{var e,n;const o=document.createElement("button"),i=document.createElement("button");o.className="ScriptEditor-scrollTop",i.className="ScriptEditor-scrollBottom",o.onclick=function(){t.node.scrollTop=0},i.onclick=function(){t.node.scrollTop=t.node.scrollHeight},d.caretUpEmptyThinIcon.element({container:o,elementPosition:"center",title:"Top"}),d.caretDownEmptyThinIcon.element({container:i,elementPosition:"center",title:"Bottom"}),null===(e=this.dockPanel)||void 0===e||e.node.appendChild(o),null===(n=this.dockPanel)||void 0===n||n.node.appendChild(i)},this.displayOutputArea=()=>{var t,e,n,o;if(void 0!==this.outputAreaWidget){if(null===(t=this.dockPanel)||void 0===t||t.show(),void 0!==this.dockPanel&&w.BoxLayout.setStretch(this.dockPanel,1),null===(e=this.dockPanel)||void 0===e?void 0:e.isEmpty){this.scrollingWidget=new y.ScrollingWidget({content:this.outputAreaWidget}),this.createScrollButtons(this.scrollingWidget),null===(n=this.dockPanel)||void 0===n||n.addWidget(this.scrollingWidget,{mode:"split-bottom"});const t=null===(o=this.dockPanel)||void 0===o?void 0:o.tabBars().next();void 0!==t&&(t.id="tab-ScriptEditor-output",null!==t.currentTitle&&(t.currentTitle.label="Console Output",t.currentTitle.closable=!0),t.disposed.connect(((t,e)=>{this.stopRun(),this.resetOutputArea()}),this))}this.outputAreaWidget.model.add({name:"stdout",output_type:"stream",text:["Waiting for kernel to start..."]}),this.updatePromptText(" "),this.setOutputAreaClasses()}},this.displayKernelStatus=t=>{"busy"===t?(this.emptyOutput=!0,this.displayOutput(" "),this.updatePromptText("*")):"idle"===t&&this.updatePromptText(" ")},this.displayOutput=t=>{var e,n,o,i;if(t){const r={name:"stdout",output_type:"stream",text:[t]};this.emptyOutput?(null===(e=this.outputAreaWidget)||void 0===e||e.model.clear(!1),null===(n=this.outputAreaWidget)||void 0===n||n.model.add(r),this.emptyOutput=!1,null===(o=this.outputAreaWidget)||void 0===o||o.model.clear(!0)):null===(i=this.outputAreaWidget)||void 0===i||i.model.add(r),this.updatePromptText("*"),this.setOutputAreaClasses()}},this.setOutputAreaClasses=()=>{this.getOutputAreaChildWidget().addClass("ScriptEditor-OutputArea-child"),this.getOutputAreaOutputWidget().addClass("ScriptEditor-OutputArea-output"),this.getOutputAreaPromptWidget().addClass("ScriptEditor-OutputArea-prompt")},this.getOutputAreaChildWidget=()=>{var t;return(null===(t=this.outputAreaWidget)||void 0===t?void 0:t.layout).widgets[0]},this.getOutputAreaOutputWidget=()=>this.getOutputAreaChildWidget().layout.widgets[1],this.getOutputAreaPromptWidget=()=>this.getOutputAreaChildWidget().layout.widgets[0],this.updatePromptText=t=>{this.getOutputAreaPromptWidget().node.innerText="["+t+"]:"},this.saveFile=async()=>{if(this.model.readOnly)return(0,p.showDialog)({title:"Cannot Save",body:"Document is read-only",buttons:[p.Dialog.okButton()]});this.context.save().then((()=>{if(!this.isDisposed)return this.context.createCheckpoint()}))},this.addClass("ScriptEditor"),this.model=this.content.model,this.runner=new P(this.disableRun),this.kernelSelectorRef=null,this.kernelName="",this.emptyOutput=!0,this.runDisabled=!1,this.controller=new A,this.title.icon=this.getIcon();const e=new p.ToolbarButton({icon:d.saveIcon,onClick:this.saveFile,tooltip:"Save file contents"}),n=new p.ToolbarButton({className:W,icon:d.runIcon,onClick:this.runScript,tooltip:"Run"}),o=new p.ToolbarButton({icon:d.stopIcon,onClick:this.stopRun,tooltip:"Stop"}),i=this.toolbar;i.addItem("save",e),i.addItem("run",n),i.addItem("stop",o),this.toolbar.addClass("ScriptEditor-Toolbar"),this.createOutputAreaWidget(),this.context.ready.then((()=>{this.initializeKernelSpecs()}))}}class L extends j{constructor(t){super(t)}getLanguage(){return"python"}getIcon(){return c}}const I="Python Editor",B="python",R="python-editor-extension",N="script-editor:create-new-python-editor",D="docmanager:open",F={id:R,autoStart:!0,requires:[h.IEditorServices,a.IEditorTracker,p.ICommandPalette,f.ISettingRegistry,g.IFileBrowserFactory],optional:[u.ILayoutRestorer,v.IMainMenu,m.ILauncher],activate:(t,e,n,o,i,r,s,a,d)=>{console.log("python-editor extension is activated!");const u=new l({editorServices:e,factoryOptions:{name:I,fileTypes:[B],defaultFor:[B]},instanceCreator:t=>new L(t)});t.docRegistry.addFileType({name:B,displayName:"Python File",extensions:[".py"],pattern:".*\\.py$",mimeTypes:["text/x-python"],icon:c});const{restored:g}=t,m=new p.WidgetTracker({namespace:R});let v=Object.assign({},h.CodeEditor.defaultConfig);s&&s.restore(m,{command:D,args:t=>({path:t.context.path,factory:I}),name:t=>t.context.path});const f=e=>{v=Object.assign(Object.assign({},h.CodeEditor.defaultConfig),e.get("editorConfig").composite),t.commands.notifyCommandChanged()},y=()=>{m.forEach((t=>{b(t)}))},b=t=>{n.has(t)||n.add(t);const e=t.content.editor;Object.keys(v).forEach((t=>{const n=t;e.setOption(n,v[n])}))};Promise.all([i.load("@jupyterlab/fileeditor-extension:plugin"),g]).then((([t])=>{f(t),y(),t.changed.connect((()=>{f(t),y()}))})).catch((t=>{console.error(t.message),y()})),t.docRegistry.addWidgetFactory(u),u.widgetCreated.connect(((t,e)=>{m.add(e),e.context.pathChanged.connect((()=>{m.save(e)})),b(e)})),m.widgetAdded.connect(((t,e)=>{b(e)})),d&&d.add({command:N,category:"Editor",rank:4}),a&&a.fileMenu.newMenu.addGroup([{command:N,args:{isMenu:!0}}],92),t.commands.addCommand(N,{label:t=>t.isPalette?"New Python Editor":"Python Editor",caption:"Create a new Python Editor",icon:t=>t.isPalette?void 0:c,execute:e=>{return n=e.cwd||r.defaultBrowser.model.path,t.commands.execute("docmanager:new-untitled",{path:n,type:"file",ext:".py"}).then((e=>t.commands.execute(D,{path:e.path,factory:I})));var n}}),o.addItem({command:N,args:{isPalette:!0},category:"Editor"})}},_=F},150:(t,e,n)=>{n.d(e,{Z:()=>r});var o=n(645),i=n.n(o)()((function(t){return t[1]}));i.push([t.id,"/*\n    See the JupyterLab Developer Guide for useful CSS Patterns:\n\n    https://jupyterlab.readthedocs.io/en/stable/developer/css.html\n*/\n\n.ScriptEditor-OutputArea-error {\n    background-color: var(--jp-rendermime-error-background);\n}\n\n.ScriptEditor-OutputArea-child {\n    border-top: 1px solid var(--jp-border-color2);\n    border-bottom: 1px solid var(--jp-border-color2);\n}\n\n.ScriptEditor-OutputArea-prompt {\n    flex: 0 0 37px;\n    border-right: 1px solid var(--jp-border-color2);\n    display: flex;\n    justify-content: center;\n}\n\n.ScriptEditor-OutputArea-output {\n    padding: var(--jp-code-padding);\n    border: var(--jp-border-width) solid transparent;\n    margin-right: 64px;\n}\n\n.ScriptEditor-scrollTop {\n    top: 33px;\n}\n\n.ScriptEditor-scrollBottom {\n    top: 62px;\n}\n\n.ScriptEditor-scrollBottom,\n.ScriptEditor-scrollTop {\n    position: absolute;\n    right: 21px;\n    z-index: 1;\n    background-color: transparent;\n    width: 30px;\n    height: 30px;\n    border-width: 0px;\n    border-style: solid;\n    border-radius: 5px;\n}\n\nbutton.ScriptEditor-scrollTop:hover {\n    background-color: var(--jp-layout-color2);\n}\n\nbutton.ScriptEditor-scrollBottom:hover {\n    background-color: var(--jp-layout-color2);\n}\n\n.ScriptEditor-scrollBottom g[fill],\n.ScriptEditor-scrollTop g[fill] {\n    fill: var(--jp-inverse-layout-color3);\n}\n\n.jp-Document .jp-Toolbar.ScriptEditor-Toolbar {\n    justify-content: flex-start;\n}\n\nselect.ScriptEditor-KernelSelector {\n    border: none;\n    background: none;\n    color: var(--jp-ui-font-color1);\n    display: inline-block;\n    vertical-align: text-bottom;\n}\n",""]);const r=i},760:(t,e,n)=>{n.d(e,{Z:()=>a});var o=n(645),i=n.n(o),r=n(150),s=i()((function(t){return t[1]}));s.i(r.Z),s.push([t.id,"\n",""]);const a=s},645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=t(e);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,o){"string"==typeof t&&(t=[[null,t,""]]);var i={};if(o)for(var r=0;r<this.length;r++){var s=this[r][0];null!=s&&(i[s]=!0)}for(var a=0;a<t.length;a++){var l=[].concat(t[a]);o&&i[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),e.push(l))}},e}},379:(t,e,n)=>{var o,i=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}(),r=[];function s(t){for(var e=-1,n=0;n<r.length;n++)if(r[n].identifier===t){e=n;break}return e}function a(t,e){for(var n={},o=[],i=0;i<t.length;i++){var a=t[i],l=e.base?a[0]+e.base:a[0],d=n[l]||0,c="".concat(l," ").concat(d);n[l]=d+1;var u=s(c),p={css:a[1],media:a[2],sourceMap:a[3]};-1!==u?(r[u].references++,r[u].updater(p)):r.push({identifier:c,updater:m(p,e),references:1}),o.push(c)}return o}function l(t){var e=document.createElement("style"),o=t.attributes||{};if(void 0===o.nonce){var r=n.nc;r&&(o.nonce=r)}if(Object.keys(o).forEach((function(t){e.setAttribute(t,o[t])})),"function"==typeof t.insert)t.insert(e);else{var s=i(t.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(e)}return e}var d,c=(d=[],function(t,e){return d[t]=e,d.filter(Boolean).join("\n")});function u(t,e,n,o){var i=n?"":o.media?"@media ".concat(o.media," {").concat(o.css,"}"):o.css;if(t.styleSheet)t.styleSheet.cssText=c(e,i);else{var r=document.createTextNode(i),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(r,s[e]):t.appendChild(r)}}function p(t,e,n){var o=n.css,i=n.media,r=n.sourceMap;if(i?t.setAttribute("media",i):t.removeAttribute("media"),r&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleSheet)t.styleSheet.cssText=o;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(o))}}var h=null,g=0;function m(t,e){var n,o,i;if(e.singleton){var r=g++;n=h||(h=l(e)),o=u.bind(null,n,r,!1),i=u.bind(null,n,r,!0)}else n=l(e),o=p.bind(null,n,e),i=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return o(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;o(t=e)}else i()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=(void 0===o&&(o=Boolean(window&&document&&document.all&&!window.atob)),o));var n=a(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var o=0;o<n.length;o++){var i=s(n[o]);r[i].references--}for(var l=a(t,e),d=0;d<n.length;d++){var c=s(n[d]);0===r[c].references&&(r[c].updater(),r.splice(c,1))}n=l}}}}}]);